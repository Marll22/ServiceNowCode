/*! RESOURCE: /scripts/snc-code-editor/codemirror-bundle.min.js */
!(function (e, t) {
  'object' == typeof exports && 'undefined' != typeof module
    ? (module.exports = t())
    : 'function' == typeof define && define.amd
    ? define(t)
    : ((e = e || self), (e.CodeMirror = t()));
})(this, function () {
  'use strict';
  function e(e) {
    return new RegExp('(^|\\s)' + e + '(?:$|\\s)\\s*');
  }
  function t(e) {
    for (var t = e.childNodes.length; t > 0; --t) e.removeChild(e.firstChild);
    return e;
  }
  function n(e, n) {
    return t(e).appendChild(n);
  }
  function r(e, t, n, r) {
    var i = document.createElement(e);
    if (
      (n && (i.className = n), r && (i.style.cssText = r), 'string' == typeof t)
    )
      i.appendChild(document.createTextNode(t));
    else if (t) for (var o = 0; o < t.length; ++o) i.appendChild(t[o]);
    return i;
  }
  function i(e, t, n, i) {
    var o = r(e, t, n, i);
    return o.setAttribute('role', 'presentation'), o;
  }
  function o(e, t) {
    if ((3 == t.nodeType && (t = t.parentNode), e.contains))
      return e.contains(t);
    do if ((11 == t.nodeType && (t = t.host), t == e)) return !0;
    while ((t = t.parentNode));
  }
  function l() {
    var e;
    try {
      e = document.activeElement;
    } catch (t) {
      e = document.body || null;
    }
    for (; e && e.shadowRoot && e.shadowRoot.activeElement; )
      e = e.shadowRoot.activeElement;
    return e;
  }
  function a(t, n) {
    var r = t.className;
    e(n).test(r) || (t.className += (r ? ' ' : '') + n);
  }
  function s(t, n) {
    for (var r = t.split(' '), i = 0; i < r.length; i++)
      r[i] && !e(r[i]).test(n) && (n += ' ' + r[i]);
    return n;
  }
  function c(e) {
    var t = Array.prototype.slice.call(arguments, 1);
    return function () {
      return e.apply(null, t);
    };
  }
  function u(e, t, n) {
    t || (t = {});
    for (var r in e)
      !e.hasOwnProperty(r) ||
        (n === !1 && t.hasOwnProperty(r)) ||
        (t[r] = e[r]);
    return t;
  }
  function f(e, t, n, r, i) {
    null == t && ((t = e.search(/[^\s\u00a0]/)), t == -1 && (t = e.length));
    for (var o = r || 0, l = i || 0; ; ) {
      var a = e.indexOf('\t', o);
      if (a < 0 || a >= t) return l + (t - o);
      (l += a - o), (l += n - (l % n)), (o = a + 1);
    }
  }
  function d(e, t) {
    for (var n = 0; n < e.length; ++n) if (e[n] == t) return n;
    return -1;
  }
  function h(e, t, n) {
    for (var r = 0, i = 0; ; ) {
      var o = e.indexOf('\t', r);
      o == -1 && (o = e.length);
      var l = o - r;
      if (o == e.length || i + l >= t) return r + Math.min(l, t - i);
      if (((i += o - r), (i += n - (i % n)), (r = o + 1), i >= t)) return r;
    }
  }
  function p(e) {
    for (; Zl.length <= e; ) Zl.push(g(Zl) + ' ');
    return Zl[e];
  }
  function g(e) {
    return e[e.length - 1];
  }
  function m(e, t) {
    for (var n = [], r = 0; r < e.length; r++) n[r] = t(e[r], r);
    return n;
  }
  function v(e, t, n) {
    for (var r = 0, i = n(t); r < e.length && n(e[r]) <= i; ) r++;
    e.splice(r, 0, t);
  }
  function y() {}
  function b(e, t) {
    var n;
    return (
      Object.create
        ? (n = Object.create(e))
        : ((y.prototype = e), (n = new y())),
      t && u(t, n),
      n
    );
  }
  function x(e) {
    return (
      /\w/.test(e) ||
      (e > '' && (e.toUpperCase() != e.toLowerCase() || Ql.test(e)))
    );
  }
  function w(e, t) {
    return t ? !!(t.source.indexOf('\\w') > -1 && x(e)) || t.test(e) : x(e);
  }
  function C(e) {
    for (var t in e) if (e.hasOwnProperty(t) && e[t]) return !1;
    return !0;
  }
  function k(e) {
    return e.charCodeAt(0) >= 768 && Jl.test(e);
  }
  function S(e, t, n) {
    for (; (n < 0 ? t > 0 : t < e.length) && k(e.charAt(t)); ) t += n;
    return t;
  }
  function L(e, t, n) {
    for (var r = t > n ? -1 : 1; ; ) {
      if (t == n) return t;
      var i = (t + n) / 2,
        o = r < 0 ? Math.ceil(i) : Math.floor(i);
      if (o == t) return e(o) ? t : n;
      e(o) ? (n = o) : (t = o + r);
    }
  }
  function T(e, t, n, r) {
    if (!e) return r(t, n, 'ltr', 0);
    for (var i = !1, o = 0; o < e.length; ++o) {
      var l = e[o];
      ((l.from < n && l.to > t) || (t == n && l.to == t)) &&
        (r(
          Math.max(l.from, t),
          Math.min(l.to, n),
          1 == l.level ? 'rtl' : 'ltr',
          o
        ),
        (i = !0));
    }
    i || r(t, n, 'ltr');
  }
  function M(e, t, n) {
    var r;
    ea = null;
    for (var i = 0; i < e.length; ++i) {
      var o = e[i];
      if (o.from < t && o.to > t) return i;
      o.to == t && (o.from != o.to && 'before' == n ? (r = i) : (ea = i)),
        o.from == t && (o.from != o.to && 'before' != n ? (r = i) : (ea = i));
    }
    return null != r ? r : ea;
  }
  function O(e, t) {
    var n = e.order;
    return null == n && (n = e.order = ta(e.text, t)), n;
  }
  function N(e, t) {
    return (e._handlers && e._handlers[t]) || na;
  }
  function A(e, t, n) {
    if (e.removeEventListener) e.removeEventListener(t, n, !1);
    else if (e.detachEvent) e.detachEvent('on' + t, n);
    else {
      var r = e._handlers,
        i = r && r[t];
      if (i) {
        var o = d(i, n);
        o > -1 && (r[t] = i.slice(0, o).concat(i.slice(o + 1)));
      }
    }
  }
  function P(e, t) {
    var n = N(e, t);
    if (n.length)
      for (
        var r = Array.prototype.slice.call(arguments, 2), i = 0;
        i < n.length;
        ++i
      )
        n[i].apply(null, r);
  }
  function D(e, t, n) {
    return (
      'string' == typeof t &&
        (t = {
          type: t,
          preventDefault: function () {
            this.defaultPrevented = !0;
          },
        }),
      P(e, n || t.type, e, t),
      R(t) || t.codemirrorIgnore
    );
  }
  function H(e) {
    var t = e._handlers && e._handlers.cursorActivity;
    if (t)
      for (
        var n =
            e.curOp.cursorActivityHandlers ||
            (e.curOp.cursorActivityHandlers = []),
          r = 0;
        r < t.length;
        ++r
      )
        d(n, t[r]) == -1 && n.push(t[r]);
  }
  function F(e, t) {
    return N(e, t).length > 0;
  }
  function W(e) {
    (e.prototype.on = function (e, t) {
      ra(this, e, t);
    }),
      (e.prototype.off = function (e, t) {
        A(this, e, t);
      });
  }
  function E(e) {
    e.preventDefault ? e.preventDefault() : (e.returnValue = !1);
  }
  function I(e) {
    e.stopPropagation ? e.stopPropagation() : (e.cancelBubble = !0);
  }
  function R(e) {
    return null != e.defaultPrevented ? e.defaultPrevented : 0 == e.returnValue;
  }
  function z(e) {
    E(e), I(e);
  }
  function B(e) {
    return e.target || e.srcElement;
  }
  function j(e) {
    var t = e.which;
    return (
      null == t &&
        (1 & e.button
          ? (t = 1)
          : 2 & e.button
          ? (t = 3)
          : 4 & e.button && (t = 2)),
      Fl && e.ctrlKey && 1 == t && (t = 3),
      t
    );
  }
  function q(e) {
    if (null == Ul) {
      var t = r('span', '​');
      n(e, r('span', [t, document.createTextNode('x')])),
        0 != e.firstChild.offsetHeight &&
          (Ul = t.offsetWidth <= 1 && t.offsetHeight > 2 && !(Cl && kl < 8));
    }
    var i = Ul
      ? r('span', '​')
      : r(
          'span',
          ' ',
          null,
          'display: inline-block; width: 1px; margin-right: -1px'
        );
    return i.setAttribute('cm-text', ''), i;
  }
  function G(e) {
    if (null != Kl) return Kl;
    var r = n(e, document.createTextNode('AخA')),
      i = Rl(r, 0, 1).getBoundingClientRect(),
      o = Rl(r, 1, 2).getBoundingClientRect();
    return t(e), !(!i || i.left == i.right) && (Kl = o.right - i.right < 3);
  }
  function U(e) {
    if (null != sa) return sa;
    var t = n(e, r('span', 'x')),
      i = t.getBoundingClientRect(),
      o = Rl(t, 0, 1).getBoundingClientRect();
    return (sa = Math.abs(i.left - o.left) > 1);
  }
  function K(e, t) {
    arguments.length > 2 &&
      (t.dependencies = Array.prototype.slice.call(arguments, 2)),
      (ca[e] = t);
  }
  function V(e, t) {
    ua[e] = t;
  }
  function _(e) {
    if ('string' == typeof e && ua.hasOwnProperty(e)) e = ua[e];
    else if (e && 'string' == typeof e.name && ua.hasOwnProperty(e.name)) {
      var t = ua[e.name];
      'string' == typeof t && (t = { name: t }),
        (e = b(t, e)),
        (e.name = t.name);
    } else {
      if ('string' == typeof e && /^[\w\-]+\/[\w\-]+\+xml$/.test(e))
        return _('application/xml');
      if ('string' == typeof e && /^[\w\-]+\/[\w\-]+\+json$/.test(e))
        return _('application/json');
    }
    return 'string' == typeof e ? { name: e } : e || { name: 'null' };
  }
  function $(e, t) {
    t = _(t);
    var n = ca[t.name];
    if (!n) return $(e, 'text/plain');
    var r = n(e, t);
    if (fa.hasOwnProperty(t.name)) {
      var i = fa[t.name];
      for (var o in i)
        i.hasOwnProperty(o) &&
          (r.hasOwnProperty(o) && (r['_' + o] = r[o]), (r[o] = i[o]));
    }
    if (
      ((r.name = t.name),
      t.helperType && (r.helperType = t.helperType),
      t.modeProps)
    )
      for (var l in t.modeProps) r[l] = t.modeProps[l];
    return r;
  }
  function X(e, t) {
    var n = fa.hasOwnProperty(e) ? fa[e] : (fa[e] = {});
    u(t, n);
  }
  function Y(e, t) {
    if (t === !0) return t;
    if (e.copyState) return e.copyState(t);
    var n = {};
    for (var r in t) {
      var i = t[r];
      i instanceof Array && (i = i.concat([])), (n[r] = i);
    }
    return n;
  }
  function Z(e, t) {
    for (var n; e.innerMode && ((n = e.innerMode(t)), n && n.mode != e); )
      (t = n.state), (e = n.mode);
    return n || { mode: e, state: t };
  }
  function Q(e, t, n) {
    return !e.startState || e.startState(t, n);
  }
  function J(e, t) {
    if (((t -= e.first), t < 0 || t >= e.size))
      throw new Error(
        'There is no line ' + (t + e.first) + ' in the document.'
      );
    for (var n = e; !n.lines; )
      for (var r = 0; ; ++r) {
        var i = n.children[r],
          o = i.chunkSize();
        if (t < o) {
          n = i;
          break;
        }
        t -= o;
      }
    return n.lines[t];
  }
  function ee(e, t, n) {
    var r = [],
      i = t.line;
    return (
      e.iter(t.line, n.line + 1, function (e) {
        var o = e.text;
        i == n.line && (o = o.slice(0, n.ch)),
          i == t.line && (o = o.slice(t.ch)),
          r.push(o),
          ++i;
      }),
      r
    );
  }
  function te(e, t, n) {
    var r = [];
    return (
      e.iter(t, n, function (e) {
        r.push(e.text);
      }),
      r
    );
  }
  function ne(e, t) {
    var n = t - e.height;
    if (n) for (var r = e; r; r = r.parent) r.height += n;
  }
  function re(e) {
    if (null == e.parent) return null;
    for (
      var t = e.parent, n = d(t.lines, e), r = t.parent;
      r;
      t = r, r = r.parent
    )
      for (var i = 0; r.children[i] != t; ++i) n += r.children[i].chunkSize();
    return n + t.first;
  }
  function ie(e, t) {
    var n = e.first;
    e: do {
      for (var r = 0; r < e.children.length; ++r) {
        var i = e.children[r],
          o = i.height;
        if (t < o) {
          e = i;
          continue e;
        }
        (t -= o), (n += i.chunkSize());
      }
      return n;
    } while (!e.lines);
    for (var l = 0; l < e.lines.length; ++l) {
      var a = e.lines[l],
        s = a.height;
      if (t < s) break;
      t -= s;
    }
    return n + l;
  }
  function oe(e, t) {
    return t >= e.first && t < e.first + e.size;
  }
  function le(e, t) {
    return String(e.lineNumberFormatter(t + e.firstLineNumber));
  }
  function ae(e, t, n) {
    return (
      void 0 === n && (n = null),
      this instanceof ae
        ? ((this.line = e), (this.ch = t), void (this.sticky = n))
        : new ae(e, t, n)
    );
  }
  function se(e, t) {
    return e.line - t.line || e.ch - t.ch;
  }
  function ce(e, t) {
    return e.sticky == t.sticky && 0 == se(e, t);
  }
  function ue(e) {
    return ae(e.line, e.ch);
  }
  function fe(e, t) {
    return se(e, t) < 0 ? t : e;
  }
  function de(e, t) {
    return se(e, t) < 0 ? e : t;
  }
  function he(e, t) {
    return Math.max(e.first, Math.min(t, e.first + e.size - 1));
  }
  function pe(e, t) {
    if (t.line < e.first) return ae(e.first, 0);
    var n = e.first + e.size - 1;
    return t.line > n
      ? ae(n, J(e, n).text.length)
      : ge(t, J(e, t.line).text.length);
  }
  function ge(e, t) {
    var n = e.ch;
    return null == n || n > t ? ae(e.line, t) : n < 0 ? ae(e.line, 0) : e;
  }
  function me(e, t) {
    for (var n = [], r = 0; r < t.length; r++) n[r] = pe(e, t[r]);
    return n;
  }
  function ve(e, t, n, r) {
    var i = [e.state.modeGen],
      o = {};
    Le(
      e,
      t.text,
      e.doc.mode,
      n,
      function (e, t) {
        return i.push(e, t);
      },
      o,
      r
    );
    for (
      var l = n.state,
        a = function (r) {
          n.baseTokens = i;
          var a = e.state.overlays[r],
            s = 1,
            c = 0;
          (n.state = !0),
            Le(
              e,
              t.text,
              a.mode,
              n,
              function (e, t) {
                for (var n = s; c < e; ) {
                  var r = i[s];
                  r > e && i.splice(s, 1, e, i[s + 1], r),
                    (s += 2),
                    (c = Math.min(e, r));
                }
                if (t)
                  if (a.opaque)
                    i.splice(n, s - n, e, 'overlay ' + t), (s = n + 2);
                  else
                    for (; n < s; n += 2) {
                      var o = i[n + 1];
                      i[n + 1] = (o ? o + ' ' : '') + 'overlay ' + t;
                    }
              },
              o
            ),
            (n.state = l),
            (n.baseTokens = null),
            (n.baseTokenPos = 1);
        },
        s = 0;
      s < e.state.overlays.length;
      ++s
    )
      a(s);
    return { styles: i, classes: o.bgClass || o.textClass ? o : null };
  }
  function ye(e, t, n) {
    if (!t.styles || t.styles[0] != e.state.modeGen) {
      var r = be(e, re(t)),
        i =
          t.text.length > e.options.maxHighlightLength &&
          Y(e.doc.mode, r.state),
        o = ve(e, t, r);
      i && (r.state = i),
        (t.stateAfter = r.save(!i)),
        (t.styles = o.styles),
        o.classes
          ? (t.styleClasses = o.classes)
          : t.styleClasses && (t.styleClasses = null),
        n === e.doc.highlightFrontier &&
          (e.doc.modeFrontier = Math.max(
            e.doc.modeFrontier,
            ++e.doc.highlightFrontier
          ));
    }
    return t.styles;
  }
  function be(e, t, n) {
    var r = e.doc,
      i = e.display;
    if (!r.mode.startState) return new pa(r, !0, t);
    var o = Te(e, t, n),
      l = o > r.first && J(r, o - 1).stateAfter,
      a = l ? pa.fromSaved(r, l, o) : new pa(r, Q(r.mode), o);
    return (
      r.iter(o, t, function (n) {
        xe(e, n.text, a);
        var r = a.line;
        (n.stateAfter =
          r == t - 1 || r % 5 == 0 || (r >= i.viewFrom && r < i.viewTo)
            ? a.save()
            : null),
          a.nextLine();
      }),
      n && (r.modeFrontier = a.line),
      a
    );
  }
  function xe(e, t, n, r) {
    var i = e.doc.mode,
      o = new da(t, e.options.tabSize, n);
    for (o.start = o.pos = r || 0, '' == t && we(i, n.state); !o.eol(); )
      Ce(i, o, n.state), (o.start = o.pos);
  }
  function we(e, t) {
    if (e.blankLine) return e.blankLine(t);
    if (e.innerMode) {
      var n = Z(e, t);
      return n.mode.blankLine ? n.mode.blankLine(n.state) : void 0;
    }
  }
  function Ce(e, t, n, r) {
    for (var i = 0; i < 10; i++) {
      r && (r[0] = Z(e, n).mode);
      var o = e.token(t, n);
      if (t.pos > t.start) return o;
    }
    throw new Error('Mode ' + e.name + ' failed to advance stream.');
  }
  function ke(e, t, n, r) {
    var i,
      o = e.doc,
      l = o.mode;
    t = pe(o, t);
    var a,
      s = J(o, t.line),
      c = be(e, t.line, n),
      u = new da(s.text, e.options.tabSize, c);
    for (r && (a = []); (r || u.pos < t.ch) && !u.eol(); )
      (u.start = u.pos),
        (i = Ce(l, u, c.state)),
        r && a.push(new ga(u, i, Y(o.mode, c.state)));
    return r ? a : new ga(u, i, c.state);
  }
  function Se(e, t) {
    if (e)
      for (;;) {
        var n = e.match(/(?:^|\s+)line-(background-)?(\S+)/);
        if (!n) break;
        e = e.slice(0, n.index) + e.slice(n.index + n[0].length);
        var r = n[1] ? 'bgClass' : 'textClass';
        null == t[r]
          ? (t[r] = n[2])
          : new RegExp('(?:^|\\s)' + n[2] + '(?:$|\\s)').test(t[r]) ||
            (t[r] += ' ' + n[2]);
      }
    return e;
  }
  function Le(e, t, n, r, i, o, l) {
    var a = n.flattenSpans;
    null == a && (a = e.options.flattenSpans);
    var s,
      c = 0,
      u = null,
      f = new da(t, e.options.tabSize, r),
      d = e.options.addModeClass && [null];
    for ('' == t && Se(we(n, r.state), o); !f.eol(); ) {
      if (
        (f.pos > e.options.maxHighlightLength
          ? ((a = !1), l && xe(e, t, r, f.pos), (f.pos = t.length), (s = null))
          : (s = Se(Ce(n, f, r.state, d), o)),
        d)
      ) {
        var h = d[0].name;
        h && (s = 'm-' + (s ? h + ' ' + s : h));
      }
      if (!a || u != s) {
        for (; c < f.start; ) (c = Math.min(f.start, c + 5e3)), i(c, u);
        u = s;
      }
      f.start = f.pos;
    }
    for (; c < f.pos; ) {
      var p = Math.min(f.pos, c + 5e3);
      i(p, u), (c = p);
    }
  }
  function Te(e, t, n) {
    for (
      var r,
        i,
        o = e.doc,
        l = n ? -1 : t - (e.doc.mode.innerMode ? 1e3 : 100),
        a = t;
      a > l;
      --a
    ) {
      if (a <= o.first) return o.first;
      var s = J(o, a - 1),
        c = s.stateAfter;
      if (
        c &&
        (!n || a + (c instanceof ha ? c.lookAhead : 0) <= o.modeFrontier)
      )
        return a;
      var u = f(s.text, null, e.options.tabSize);
      (null == i || r > u) && ((i = a - 1), (r = u));
    }
    return i;
  }
  function Me(e, t) {
    if (
      ((e.modeFrontier = Math.min(e.modeFrontier, t)),
      !(e.highlightFrontier < t - 10))
    ) {
      for (var n = e.first, r = t - 1; r > n; r--) {
        var i = J(e, r).stateAfter;
        if (i && (!(i instanceof ha) || r + i.lookAhead < t)) {
          n = r + 1;
          break;
        }
      }
      e.highlightFrontier = Math.min(e.highlightFrontier, n);
    }
  }
  function Oe() {
    ma = !0;
  }
  function Ne() {
    va = !0;
  }
  function Ae(e, t, n) {
    (this.marker = e), (this.from = t), (this.to = n);
  }
  function Pe(e, t) {
    if (e)
      for (var n = 0; n < e.length; ++n) {
        var r = e[n];
        if (r.marker == t) return r;
      }
  }
  function De(e, t) {
    for (var n, r = 0; r < e.length; ++r)
      e[r] != t && (n || (n = [])).push(e[r]);
    return n;
  }
  function He(e, t, n) {
    var r =
      n && window.WeakSet && (n.markedSpans || (n.markedSpans = new WeakSet()));
    r && r.has(e.markedSpans)
      ? e.markedSpans.push(t)
      : ((e.markedSpans = e.markedSpans ? e.markedSpans.concat([t]) : [t]),
        r && r.add(e.markedSpans)),
      t.marker.attachLine(e);
  }
  function Fe(e, t, n) {
    var r;
    if (e)
      for (var i = 0; i < e.length; ++i) {
        var o = e[i],
          l = o.marker,
          a = null == o.from || (l.inclusiveLeft ? o.from <= t : o.from < t);
        if (
          a ||
          (o.from == t && 'bookmark' == l.type && (!n || !o.marker.insertLeft))
        ) {
          var s = null == o.to || (l.inclusiveRight ? o.to >= t : o.to > t);
          (r || (r = [])).push(new Ae(l, o.from, s ? null : o.to));
        }
      }
    return r;
  }
  function We(e, t, n) {
    var r;
    if (e)
      for (var i = 0; i < e.length; ++i) {
        var o = e[i],
          l = o.marker,
          a = null == o.to || (l.inclusiveRight ? o.to >= t : o.to > t);
        if (
          a ||
          (o.from == t && 'bookmark' == l.type && (!n || o.marker.insertLeft))
        ) {
          var s =
            null == o.from || (l.inclusiveLeft ? o.from <= t : o.from < t);
          (r || (r = [])).push(
            new Ae(l, s ? null : o.from - t, null == o.to ? null : o.to - t)
          );
        }
      }
    return r;
  }
  function Ee(e, t) {
    if (t.full) return null;
    var n = oe(e, t.from.line) && J(e, t.from.line).markedSpans,
      r = oe(e, t.to.line) && J(e, t.to.line).markedSpans;
    if (!n && !r) return null;
    var i = t.from.ch,
      o = t.to.ch,
      l = 0 == se(t.from, t.to),
      a = Fe(n, i, l),
      s = We(r, o, l),
      c = 1 == t.text.length,
      u = g(t.text).length + (c ? i : 0);
    if (a)
      for (var f = 0; f < a.length; ++f) {
        var d = a[f];
        if (null == d.to) {
          var h = Pe(s, d.marker);
          h ? c && (d.to = null == h.to ? null : h.to + u) : (d.to = i);
        }
      }
    if (s)
      for (var p = 0; p < s.length; ++p) {
        var m = s[p];
        if ((null != m.to && (m.to += u), null == m.from)) {
          var v = Pe(a, m.marker);
          v || ((m.from = u), c && (a || (a = [])).push(m));
        } else (m.from += u), c && (a || (a = [])).push(m);
      }
    a && (a = Ie(a)), s && s != a && (s = Ie(s));
    var y = [a];
    if (!c) {
      var b,
        x = t.text.length - 2;
      if (x > 0 && a)
        for (var w = 0; w < a.length; ++w)
          null == a[w].to &&
            (b || (b = [])).push(new Ae(a[w].marker, null, null));
      for (var C = 0; C < x; ++C) y.push(b);
      y.push(s);
    }
    return y;
  }
  function Ie(e) {
    for (var t = 0; t < e.length; ++t) {
      var n = e[t];
      null != n.from &&
        n.from == n.to &&
        n.marker.clearWhenEmpty !== !1 &&
        e.splice(t--, 1);
    }
    return e.length ? e : null;
  }
  function Re(e, t, n) {
    var r = null;
    if (
      (e.iter(t.line, n.line + 1, function (e) {
        if (e.markedSpans)
          for (var t = 0; t < e.markedSpans.length; ++t) {
            var n = e.markedSpans[t].marker;
            !n.readOnly || (r && d(r, n) != -1) || (r || (r = [])).push(n);
          }
      }),
      !r)
    )
      return null;
    for (var i = [{ from: t, to: n }], o = 0; o < r.length; ++o)
      for (var l = r[o], a = l.find(0), s = 0; s < i.length; ++s) {
        var c = i[s];
        if (!(se(c.to, a.from) < 0 || se(c.from, a.to) > 0)) {
          var u = [s, 1],
            f = se(c.from, a.from),
            h = se(c.to, a.to);
          (f < 0 || (!l.inclusiveLeft && !f)) &&
            u.push({ from: c.from, to: a.from }),
            (h > 0 || (!l.inclusiveRight && !h)) &&
              u.push({ from: a.to, to: c.to }),
            i.splice.apply(i, u),
            (s += u.length - 3);
        }
      }
    return i;
  }
  function ze(e) {
    var t = e.markedSpans;
    if (t) {
      for (var n = 0; n < t.length; ++n) t[n].marker.detachLine(e);
      e.markedSpans = null;
    }
  }
  function Be(e, t) {
    if (t) {
      for (var n = 0; n < t.length; ++n) t[n].marker.attachLine(e);
      e.markedSpans = t;
    }
  }
  function je(e) {
    return e.inclusiveLeft ? -1 : 0;
  }
  function qe(e) {
    return e.inclusiveRight ? 1 : 0;
  }
  function Ge(e, t) {
    var n = e.lines.length - t.lines.length;
    if (0 != n) return n;
    var r = e.find(),
      i = t.find(),
      o = se(r.from, i.from) || je(e) - je(t);
    if (o) return -o;
    var l = se(r.to, i.to) || qe(e) - qe(t);
    return l ? l : t.id - e.id;
  }
  function Ue(e, t) {
    var n,
      r = va && e.markedSpans;
    if (r)
      for (var i = void 0, o = 0; o < r.length; ++o)
        (i = r[o]),
          i.marker.collapsed &&
            null == (t ? i.from : i.to) &&
            (!n || Ge(n, i.marker) < 0) &&
            (n = i.marker);
    return n;
  }
  function Ke(e) {
    return Ue(e, !0);
  }
  function Ve(e) {
    return Ue(e, !1);
  }
  function _e(e, t) {
    var n,
      r = va && e.markedSpans;
    if (r)
      for (var i = 0; i < r.length; ++i) {
        var o = r[i];
        o.marker.collapsed &&
          (null == o.from || o.from < t) &&
          (null == o.to || o.to > t) &&
          (!n || Ge(n, o.marker) < 0) &&
          (n = o.marker);
      }
    return n;
  }
  function $e(e, t, n, r, i) {
    var o = J(e, t),
      l = va && o.markedSpans;
    if (l)
      for (var a = 0; a < l.length; ++a) {
        var s = l[a];
        if (s.marker.collapsed) {
          var c = s.marker.find(0),
            u = se(c.from, n) || je(s.marker) - je(i),
            f = se(c.to, r) || qe(s.marker) - qe(i);
          if (
            !((u >= 0 && f <= 0) || (u <= 0 && f >= 0)) &&
            ((u <= 0 &&
              (s.marker.inclusiveRight && i.inclusiveLeft
                ? se(c.to, n) >= 0
                : se(c.to, n) > 0)) ||
              (u >= 0 &&
                (s.marker.inclusiveRight && i.inclusiveLeft
                  ? se(c.from, r) <= 0
                  : se(c.from, r) < 0)))
          )
            return !0;
        }
      }
  }
  function Xe(e) {
    for (var t; (t = Ke(e)); ) e = t.find(-1, !0).line;
    return e;
  }
  function Ye(e) {
    for (var t; (t = Ve(e)); ) e = t.find(1, !0).line;
    return e;
  }
  function Ze(e) {
    for (var t, n; (t = Ve(e)); )
      (e = t.find(1, !0).line), (n || (n = [])).push(e);
    return n;
  }
  function Qe(e, t) {
    var n = J(e, t),
      r = Xe(n);
    return n == r ? t : re(r);
  }
  function Je(e, t) {
    if (t > e.lastLine()) return t;
    var n,
      r = J(e, t);
    if (!et(e, r)) return t;
    for (; (n = Ve(r)); ) r = n.find(1, !0).line;
    return re(r) + 1;
  }
  function et(e, t) {
    var n = va && t.markedSpans;
    if (n)
      for (var r = void 0, i = 0; i < n.length; ++i)
        if (((r = n[i]), r.marker.collapsed)) {
          if (null == r.from) return !0;
          if (
            !r.marker.widgetNode &&
            0 == r.from &&
            r.marker.inclusiveLeft &&
            tt(e, t, r)
          )
            return !0;
        }
  }
  function tt(e, t, n) {
    if (null == n.to) {
      var r = n.marker.find(1, !0);
      return tt(e, r.line, Pe(r.line.markedSpans, n.marker));
    }
    if (n.marker.inclusiveRight && n.to == t.text.length) return !0;
    for (var i = void 0, o = 0; o < t.markedSpans.length; ++o)
      if (
        ((i = t.markedSpans[o]),
        i.marker.collapsed &&
          !i.marker.widgetNode &&
          i.from == n.to &&
          (null == i.to || i.to != n.from) &&
          (i.marker.inclusiveLeft || n.marker.inclusiveRight) &&
          tt(e, t, i))
      )
        return !0;
  }
  function nt(e) {
    e = Xe(e);
    for (var t = 0, n = e.parent, r = 0; r < n.lines.length; ++r) {
      var i = n.lines[r];
      if (i == e) break;
      t += i.height;
    }
    for (var o = n.parent; o; n = o, o = n.parent)
      for (var l = 0; l < o.children.length; ++l) {
        var a = o.children[l];
        if (a == n) break;
        t += a.height;
      }
    return t;
  }
  function rt(e) {
    if (0 == e.height) return 0;
    for (var t, n = e.text.length, r = e; (t = Ke(r)); ) {
      var i = t.find(0, !0);
      (r = i.from.line), (n += i.from.ch - i.to.ch);
    }
    for (r = e; (t = Ve(r)); ) {
      var o = t.find(0, !0);
      (n -= r.text.length - o.from.ch),
        (r = o.to.line),
        (n += r.text.length - o.to.ch);
    }
    return n;
  }
  function it(e) {
    var t = e.display,
      n = e.doc;
    (t.maxLine = J(n, n.first)),
      (t.maxLineLength = rt(t.maxLine)),
      (t.maxLineChanged = !0),
      n.iter(function (e) {
        var n = rt(e);
        n > t.maxLineLength && ((t.maxLineLength = n), (t.maxLine = e));
      });
  }
  function ot(e, t, n, r) {
    (e.text = t),
      e.stateAfter && (e.stateAfter = null),
      e.styles && (e.styles = null),
      null != e.order && (e.order = null),
      ze(e),
      Be(e, n);
    var i = r ? r(e) : 1;
    i != e.height && ne(e, i);
  }
  function lt(e) {
    (e.parent = null), ze(e);
  }
  function at(e, t) {
    if (!e || /^\s*$/.test(e)) return null;
    var n = t.addModeClass ? wa : xa;
    return n[e] || (n[e] = e.replace(/\S+/g, 'cm-$&'));
  }
  function st(e, t) {
    var n = i('span', null, null, Sl ? 'padding-right: .1px' : null),
      r = {
        pre: i('pre', [n], 'CodeMirror-line'),
        content: n,
        col: 0,
        pos: 0,
        cm: e,
        trailingSpace: !1,
        splitSpaces: e.getOption('lineWrapping'),
      };
    t.measure = {};
    for (var o = 0; o <= (t.rest ? t.rest.length : 0); o++) {
      var l = o ? t.rest[o - 1] : t.line,
        a = void 0;
      (r.pos = 0),
        (r.addToken = ut),
        G(e.display.measure) &&
          (a = O(l, e.doc.direction)) &&
          (r.addToken = dt(r.addToken, a)),
        (r.map = []);
      var c = t != e.display.externalMeasured && re(l);
      pt(l, r, ye(e, l, c)),
        l.styleClasses &&
          (l.styleClasses.bgClass &&
            (r.bgClass = s(l.styleClasses.bgClass, r.bgClass || '')),
          l.styleClasses.textClass &&
            (r.textClass = s(l.styleClasses.textClass, r.textClass || ''))),
        0 == r.map.length &&
          r.map.push(0, 0, r.content.appendChild(q(e.display.measure))),
        0 == o
          ? ((t.measure.map = r.map), (t.measure.cache = {}))
          : ((t.measure.maps || (t.measure.maps = [])).push(r.map),
            (t.measure.caches || (t.measure.caches = [])).push({}));
    }
    if (Sl) {
      var u = r.content.lastChild;
      (/\bcm-tab\b/.test(u.className) ||
        (u.querySelector && u.querySelector('.cm-tab'))) &&
        (r.content.className = 'cm-tab-wrap-hack');
    }
    return (
      P(e, 'renderLine', e, t.line, r.pre),
      r.pre.className && (r.textClass = s(r.pre.className, r.textClass || '')),
      r
    );
  }
  function ct(e) {
    var t = r('span', '•', 'cm-invalidchar');
    return (
      (t.title = '\\u' + e.charCodeAt(0).toString(16)),
      t.setAttribute('aria-label', t.title),
      t
    );
  }
  function ut(e, t, n, i, o, l, a) {
    if (t) {
      var s,
        c = e.splitSpaces ? ft(t, e.trailingSpace) : t,
        u = e.cm.state.specialChars,
        f = !1;
      if (u.test(t)) {
        s = document.createDocumentFragment();
        for (var d = 0; ; ) {
          u.lastIndex = d;
          var h = u.exec(t),
            g = h ? h.index - d : t.length - d;
          if (g) {
            var m = document.createTextNode(c.slice(d, d + g));
            Cl && kl < 9 ? s.appendChild(r('span', [m])) : s.appendChild(m),
              e.map.push(e.pos, e.pos + g, m),
              (e.col += g),
              (e.pos += g);
          }
          if (!h) break;
          d += g + 1;
          var v = void 0;
          if ('\t' == h[0]) {
            var y = e.cm.options.tabSize,
              b = y - (e.col % y);
            (v = s.appendChild(r('span', p(b), 'cm-tab'))),
              v.setAttribute('role', 'presentation'),
              v.setAttribute('cm-text', '\t'),
              (e.col += b);
          } else
            '\r' == h[0] || '\n' == h[0]
              ? ((v = s.appendChild(
                  r('span', '\r' == h[0] ? '␍' : '␤', 'cm-invalidchar')
                )),
                v.setAttribute('cm-text', h[0]),
                (e.col += 1))
              : ((v = e.cm.options.specialCharPlaceholder(h[0])),
                v.setAttribute('cm-text', h[0]),
                Cl && kl < 9 ? s.appendChild(r('span', [v])) : s.appendChild(v),
                (e.col += 1));
          e.map.push(e.pos, e.pos + 1, v), e.pos++;
        }
      } else
        (e.col += t.length),
          (s = document.createTextNode(c)),
          e.map.push(e.pos, e.pos + t.length, s),
          Cl && kl < 9 && (f = !0),
          (e.pos += t.length);
      if (
        ((e.trailingSpace = 32 == c.charCodeAt(t.length - 1)),
        n || i || o || f || l || a)
      ) {
        var x = n || '';
        i && (x += i), o && (x += o);
        var w = r('span', [s], x, l);
        if (a)
          for (var C in a)
            a.hasOwnProperty(C) &&
              'style' != C &&
              'class' != C &&
              w.setAttribute(C, a[C]);
        return e.content.appendChild(w);
      }
      e.content.appendChild(s);
    }
  }
  function ft(e, t) {
    if (e.length > 1 && !/  /.test(e)) return e;
    for (var n = t, r = '', i = 0; i < e.length; i++) {
      var o = e.charAt(i);
      ' ' != o ||
        !n ||
        (i != e.length - 1 && 32 != e.charCodeAt(i + 1)) ||
        (o = ' '),
        (r += o),
        (n = ' ' == o);
    }
    return r;
  }
  function dt(e, t) {
    return function (n, r, i, o, l, a, s) {
      i = i ? i + ' cm-force-border' : 'cm-force-border';
      for (var c = n.pos, u = c + r.length; ; ) {
        for (
          var f = void 0, d = 0;
          d < t.length && ((f = t[d]), !(f.to > c && f.from <= c));
          d++
        );
        if (f.to >= u) return e(n, r, i, o, l, a, s);
        e(n, r.slice(0, f.to - c), i, o, null, a, s),
          (o = null),
          (r = r.slice(f.to - c)),
          (c = f.to);
      }
    };
  }
  function ht(e, t, n, r) {
    var i = !r && n.widgetNode;
    i && e.map.push(e.pos, e.pos + t, i),
      !r &&
        e.cm.display.input.needsContentAttribute &&
        (i || (i = e.content.appendChild(document.createElement('span'))),
        i.setAttribute('cm-marker', n.id)),
      i && (e.cm.display.input.setUneditable(i), e.content.appendChild(i)),
      (e.pos += t),
      (e.trailingSpace = !1);
  }
  function pt(e, t, n) {
    var r = e.markedSpans,
      i = e.text,
      o = 0;
    if (r)
      for (
        var l, a, s, c, u, f, d, h = i.length, p = 0, g = 1, m = '', v = 0;
        ;

      ) {
        if (v == p) {
          (s = c = u = a = ''), (d = null), (f = null), (v = 1 / 0);
          for (var y = [], b = void 0, x = 0; x < r.length; ++x) {
            var w = r[x],
              C = w.marker;
            if ('bookmark' == C.type && w.from == p && C.widgetNode) y.push(C);
            else if (
              w.from <= p &&
              (null == w.to ||
                w.to > p ||
                (C.collapsed && w.to == p && w.from == p))
            ) {
              if (
                (null != w.to &&
                  w.to != p &&
                  v > w.to &&
                  ((v = w.to), (c = '')),
                C.className && (s += ' ' + C.className),
                C.css && (a = (a ? a + ';' : '') + C.css),
                C.startStyle && w.from == p && (u += ' ' + C.startStyle),
                C.endStyle &&
                  w.to == v &&
                  (b || (b = [])).push(C.endStyle, w.to),
                C.title && ((d || (d = {})).title = C.title),
                C.attributes)
              )
                for (var k in C.attributes)
                  (d || (d = {}))[k] = C.attributes[k];
              C.collapsed && (!f || Ge(f.marker, C) < 0) && (f = w);
            } else w.from > p && v > w.from && (v = w.from);
          }
          if (b)
            for (var S = 0; S < b.length; S += 2)
              b[S + 1] == v && (c += ' ' + b[S]);
          if (!f || f.from == p)
            for (var L = 0; L < y.length; ++L) ht(t, 0, y[L]);
          if (f && (f.from || 0) == p) {
            if (
              (ht(
                t,
                (null == f.to ? h + 1 : f.to) - p,
                f.marker,
                null == f.from
              ),
              null == f.to)
            )
              return;
            f.to == p && (f = !1);
          }
        }
        if (p >= h) break;
        for (var T = Math.min(h, v); ; ) {
          if (m) {
            var M = p + m.length;
            if (!f) {
              var O = M > T ? m.slice(0, T - p) : m;
              t.addToken(
                t,
                O,
                l ? l + s : s,
                u,
                p + O.length == v ? c : '',
                a,
                d
              );
            }
            if (M >= T) {
              (m = m.slice(T - p)), (p = T);
              break;
            }
            (p = M), (u = '');
          }
          (m = i.slice(o, (o = n[g++]))), (l = at(n[g++], t.cm.options));
        }
      }
    else
      for (var N = 1; N < n.length; N += 2)
        t.addToken(t, i.slice(o, (o = n[N])), at(n[N + 1], t.cm.options));
  }
  function gt(e, t, n) {
    (this.line = t),
      (this.rest = Ze(t)),
      (this.size = this.rest ? re(g(this.rest)) - n + 1 : 1),
      (this.node = this.text = null),
      (this.hidden = et(e, t));
  }
  function mt(e, t, n) {
    for (var r, i = [], o = t; o < n; o = r) {
      var l = new gt(e.doc, J(e.doc, o), o);
      (r = o + l.size), i.push(l);
    }
    return i;
  }
  function vt(e) {
    Ca
      ? Ca.ops.push(e)
      : (e.ownsGroup = Ca = { ops: [e], delayedCallbacks: [] });
  }
  function yt(e) {
    var t = e.delayedCallbacks,
      n = 0;
    do {
      for (; n < t.length; n++) t[n].call(null);
      for (var r = 0; r < e.ops.length; r++) {
        var i = e.ops[r];
        if (i.cursorActivityHandlers)
          for (; i.cursorActivityCalled < i.cursorActivityHandlers.length; )
            i.cursorActivityHandlers[i.cursorActivityCalled++].call(null, i.cm);
      }
    } while (n < t.length);
  }
  function bt(e, t) {
    var n = e.ownsGroup;
    if (n)
      try {
        yt(n);
      } finally {
        (Ca = null), t(n);
      }
  }
  function xt(e, t) {
    var n = N(e, t);
    if (n.length) {
      var r,
        i = Array.prototype.slice.call(arguments, 2);
      Ca
        ? (r = Ca.delayedCallbacks)
        : ka
        ? (r = ka)
        : ((r = ka = []), setTimeout(wt, 0));
      for (
        var o = function (e) {
            r.push(function () {
              return n[e].apply(null, i);
            });
          },
          l = 0;
        l < n.length;
        ++l
      )
        o(l);
    }
  }
  function wt() {
    var e = ka;
    ka = null;
    for (var t = 0; t < e.length; ++t) e[t]();
  }
  function Ct(e, t, n, r) {
    for (var i = 0; i < t.changes.length; i++) {
      var o = t.changes[i];
      'text' == o
        ? Tt(e, t)
        : 'gutter' == o
        ? Ot(e, t, n, r)
        : 'class' == o
        ? Mt(e, t)
        : 'widget' == o && Nt(e, t, r);
    }
    t.changes = null;
  }
  function kt(e) {
    return (
      e.node == e.text &&
        ((e.node = r('div', null, null, 'position: relative')),
        e.text.parentNode && e.text.parentNode.replaceChild(e.node, e.text),
        e.node.appendChild(e.text),
        Cl && kl < 8 && (e.node.style.zIndex = 2)),
      e.node
    );
  }
  function St(e, t) {
    var n = t.bgClass
      ? t.bgClass + ' ' + (t.line.bgClass || '')
      : t.line.bgClass;
    if ((n && (n += ' CodeMirror-linebackground'), t.background))
      n
        ? (t.background.className = n)
        : (t.background.parentNode.removeChild(t.background),
          (t.background = null));
    else if (n) {
      var i = kt(t);
      (t.background = i.insertBefore(r('div', null, n), i.firstChild)),
        e.display.input.setUneditable(t.background);
    }
  }
  function Lt(e, t) {
    var n = e.display.externalMeasured;
    return n && n.line == t.line
      ? ((e.display.externalMeasured = null), (t.measure = n.measure), n.built)
      : st(e, t);
  }
  function Tt(e, t) {
    var n = t.text.className,
      r = Lt(e, t);
    t.text == t.node && (t.node = r.pre),
      t.text.parentNode.replaceChild(r.pre, t.text),
      (t.text = r.pre),
      r.bgClass != t.bgClass || r.textClass != t.textClass
        ? ((t.bgClass = r.bgClass), (t.textClass = r.textClass), Mt(e, t))
        : n && (t.text.className = n);
  }
  function Mt(e, t) {
    St(e, t),
      t.line.wrapClass
        ? (kt(t).className = t.line.wrapClass)
        : t.node != t.text && (t.node.className = '');
    var n = t.textClass
      ? t.textClass + ' ' + (t.line.textClass || '')
      : t.line.textClass;
    t.text.className = n || '';
  }
  function Ot(e, t, n, i) {
    if (
      (t.gutter && (t.node.removeChild(t.gutter), (t.gutter = null)),
      t.gutterBackground &&
        (t.node.removeChild(t.gutterBackground), (t.gutterBackground = null)),
      t.line.gutterClass)
    ) {
      var o = kt(t);
      (t.gutterBackground = r(
        'div',
        null,
        'CodeMirror-gutter-background ' + t.line.gutterClass,
        'left: ' +
          (e.options.fixedGutter ? i.fixedPos : -i.gutterTotalWidth) +
          'px; width: ' +
          i.gutterTotalWidth +
          'px'
      )),
        e.display.input.setUneditable(t.gutterBackground),
        o.insertBefore(t.gutterBackground, t.text);
    }
    var l = t.line.gutterMarkers;
    if (e.options.lineNumbers || l) {
      var a = kt(t),
        s = (t.gutter = r(
          'div',
          null,
          'CodeMirror-gutter-wrapper',
          'left: ' +
            (e.options.fixedGutter ? i.fixedPos : -i.gutterTotalWidth) +
            'px'
        ));
      if (
        (s.setAttribute('aria-hidden', 'true'),
        e.display.input.setUneditable(s),
        a.insertBefore(s, t.text),
        t.line.gutterClass && (s.className += ' ' + t.line.gutterClass),
        !e.options.lineNumbers ||
          (l && l['CodeMirror-linenumbers']) ||
          (t.lineNumber = s.appendChild(
            r(
              'div',
              le(e.options, n),
              'CodeMirror-linenumber CodeMirror-gutter-elt',
              'left: ' +
                i.gutterLeft['CodeMirror-linenumbers'] +
                'px; width: ' +
                e.display.lineNumInnerWidth +
                'px'
            )
          )),
        l)
      )
        for (var c = 0; c < e.display.gutterSpecs.length; ++c) {
          var u = e.display.gutterSpecs[c].className,
            f = l.hasOwnProperty(u) && l[u];
          f &&
            s.appendChild(
              r(
                'div',
                [f],
                'CodeMirror-gutter-elt',
                'left: ' +
                  i.gutterLeft[u] +
                  'px; width: ' +
                  i.gutterWidth[u] +
                  'px'
              )
            );
        }
    }
  }
  function Nt(t, n, r) {
    n.alignable && (n.alignable = null);
    for (
      var i = e('CodeMirror-linewidget'), o = n.node.firstChild, l = void 0;
      o;
      o = l
    )
      (l = o.nextSibling), i.test(o.className) && n.node.removeChild(o);
    Pt(t, n, r);
  }
  function At(e, t, n, r) {
    var i = Lt(e, t);
    return (
      (t.text = t.node = i.pre),
      i.bgClass && (t.bgClass = i.bgClass),
      i.textClass && (t.textClass = i.textClass),
      Mt(e, t),
      Ot(e, t, n, r),
      Pt(e, t, r),
      t.node
    );
  }
  function Pt(e, t, n) {
    if ((Dt(e, t.line, t, n, !0), t.rest))
      for (var r = 0; r < t.rest.length; r++) Dt(e, t.rest[r], t, n, !1);
  }
  function Dt(e, t, n, i, o) {
    if (t.widgets)
      for (var l = kt(n), a = 0, s = t.widgets; a < s.length; ++a) {
        var c = s[a],
          u = r(
            'div',
            [c.node],
            'CodeMirror-linewidget' + (c.className ? ' ' + c.className : '')
          );
        c.handleMouseEvents || u.setAttribute('cm-ignore-events', 'true'),
          Ht(c, u, n, i),
          e.display.input.setUneditable(u),
          o && c.above
            ? l.insertBefore(u, n.gutter || n.text)
            : l.appendChild(u),
          xt(c, 'redraw');
      }
  }
  function Ht(e, t, n, r) {
    if (e.noHScroll) {
      (n.alignable || (n.alignable = [])).push(t);
      var i = r.wrapperWidth;
      (t.style.left = r.fixedPos + 'px'),
        e.coverGutter ||
          ((i -= r.gutterTotalWidth),
          (t.style.paddingLeft = r.gutterTotalWidth + 'px')),
        (t.style.width = i + 'px');
    }
    e.coverGutter &&
      ((t.style.zIndex = 5),
      (t.style.position = 'relative'),
      e.noHScroll || (t.style.marginLeft = -r.gutterTotalWidth + 'px'));
  }
  function Ft(e) {
    if (null != e.height) return e.height;
    var t = e.doc.cm;
    if (!t) return 0;
    if (!o(document.body, e.node)) {
      var i = 'position: relative;';
      e.coverGutter &&
        (i += 'margin-left: -' + t.display.gutters.offsetWidth + 'px;'),
        e.noHScroll && (i += 'width: ' + t.display.wrapper.clientWidth + 'px;'),
        n(t.display.measure, r('div', [e.node], null, i));
    }
    return (e.height = e.node.parentNode.offsetHeight);
  }
  function Wt(e, t) {
    for (var n = B(t); n != e.wrapper; n = n.parentNode)
      if (
        !n ||
        (1 == n.nodeType && 'true' == n.getAttribute('cm-ignore-events')) ||
        (n.parentNode == e.sizer && n != e.mover)
      )
        return !0;
  }
  function Et(e) {
    return e.lineSpace.offsetTop;
  }
  function It(e) {
    return e.mover.offsetHeight - e.lineSpace.offsetHeight;
  }
  function Rt(e) {
    if (e.cachedPaddingH) return e.cachedPaddingH;
    var t = n(e.measure, r('pre', 'x', 'CodeMirror-line-like')),
      i = window.getComputedStyle ? window.getComputedStyle(t) : t.currentStyle,
      o = { left: parseInt(i.paddingLeft), right: parseInt(i.paddingRight) };
    return isNaN(o.left) || isNaN(o.right) || (e.cachedPaddingH = o), o;
  }
  function zt(e) {
    return Vl - e.display.nativeBarWidth;
  }
  function Bt(e) {
    return e.display.scroller.clientWidth - zt(e) - e.display.barWidth;
  }
  function jt(e) {
    return e.display.scroller.clientHeight - zt(e) - e.display.barHeight;
  }
  function qt(e, t, n) {
    var r = e.options.lineWrapping,
      i = r && Bt(e);
    if (!t.measure.heights || (r && t.measure.width != i)) {
      var o = (t.measure.heights = []);
      if (r) {
        t.measure.width = i;
        for (
          var l = t.text.firstChild.getClientRects(), a = 0;
          a < l.length - 1;
          a++
        ) {
          var s = l[a],
            c = l[a + 1];
          Math.abs(s.bottom - c.bottom) > 2 &&
            o.push((s.bottom + c.top) / 2 - n.top);
        }
      }
      o.push(n.bottom - n.top);
    }
  }
  function Gt(e, t, n) {
    if (e.line == t) return { map: e.measure.map, cache: e.measure.cache };
    for (var r = 0; r < e.rest.length; r++)
      if (e.rest[r] == t)
        return { map: e.measure.maps[r], cache: e.measure.caches[r] };
    for (var i = 0; i < e.rest.length; i++)
      if (re(e.rest[i]) > n)
        return {
          map: e.measure.maps[i],
          cache: e.measure.caches[i],
          before: !0,
        };
  }
  function Ut(e, t) {
    t = Xe(t);
    var r = re(t),
      i = (e.display.externalMeasured = new gt(e.doc, t, r));
    i.lineN = r;
    var o = (i.built = st(e, i));
    return (i.text = o.pre), n(e.display.lineMeasure, o.pre), i;
  }
  function Kt(e, t, n, r) {
    return $t(e, _t(e, t), n, r);
  }
  function Vt(e, t) {
    if (t >= e.display.viewFrom && t < e.display.viewTo)
      return e.display.view[Tn(e, t)];
    var n = e.display.externalMeasured;
    return n && t >= n.lineN && t < n.lineN + n.size ? n : void 0;
  }
  function _t(e, t) {
    var n = re(t),
      r = Vt(e, n);
    r && !r.text
      ? (r = null)
      : r && r.changes && (Ct(e, r, n, wn(e)), (e.curOp.forceUpdate = !0)),
      r || (r = Ut(e, t));
    var i = Gt(r, t, n);
    return {
      line: t,
      view: r,
      rect: null,
      map: i.map,
      cache: i.cache,
      before: i.before,
      hasHeights: !1,
    };
  }
  function $t(e, t, n, r, i) {
    t.before && (n = -1);
    var o,
      l = n + (r || '');
    return (
      t.cache.hasOwnProperty(l)
        ? (o = t.cache[l])
        : (t.rect || (t.rect = t.view.text.getBoundingClientRect()),
          t.hasHeights || (qt(e, t.view, t.rect), (t.hasHeights = !0)),
          (o = Zt(e, t, n, r)),
          o.bogus || (t.cache[l] = o)),
      {
        left: o.left,
        right: o.right,
        top: i ? o.rtop : o.top,
        bottom: i ? o.rbottom : o.bottom,
      }
    );
  }
  function Xt(e, t, n) {
    for (var r, i, o, l, a, s, c = 0; c < e.length; c += 3)
      if (
        ((a = e[c]),
        (s = e[c + 1]),
        t < a
          ? ((i = 0), (o = 1), (l = 'left'))
          : t < s
          ? ((i = t - a), (o = i + 1))
          : (c == e.length - 3 || (t == s && e[c + 3] > t)) &&
            ((o = s - a), (i = o - 1), t >= s && (l = 'right')),
        null != i)
      ) {
        if (
          ((r = e[c + 2]),
          a == s && n == (r.insertLeft ? 'left' : 'right') && (l = n),
          'left' == n && 0 == i)
        )
          for (; c && e[c - 2] == e[c - 3] && e[c - 1].insertLeft; )
            (r = e[(c -= 3) + 2]), (l = 'left');
        if ('right' == n && i == s - a)
          for (
            ;
            c < e.length - 3 && e[c + 3] == e[c + 4] && !e[c + 5].insertLeft;

          )
            (r = e[(c += 3) + 2]), (l = 'right');
        break;
      }
    return {
      node: r,
      start: i,
      end: o,
      collapse: l,
      coverStart: a,
      coverEnd: s,
    };
  }
  function Yt(e, t) {
    var n = Sa;
    if ('left' == t)
      for (var r = 0; r < e.length && (n = e[r]).left == n.right; r++);
    else for (var i = e.length - 1; i >= 0 && (n = e[i]).left == n.right; i--);
    return n;
  }
  function Zt(e, t, n, r) {
    var i,
      o = Xt(t.map, n, r),
      l = o.node,
      a = o.start,
      s = o.end,
      c = o.collapse;
    if (3 == l.nodeType) {
      for (var u = 0; u < 4; u++) {
        for (; a && k(t.line.text.charAt(o.coverStart + a)); ) --a;
        for (
          ;
          o.coverStart + s < o.coverEnd &&
          k(t.line.text.charAt(o.coverStart + s));

        )
          ++s;
        if (
          ((i =
            Cl && kl < 9 && 0 == a && s == o.coverEnd - o.coverStart
              ? l.parentNode.getBoundingClientRect()
              : Yt(Rl(l, a, s).getClientRects(), r)),
          i.left || i.right || 0 == a)
        )
          break;
        (s = a), (a -= 1), (c = 'right');
      }
      Cl && kl < 11 && (i = Qt(e.display.measure, i));
    } else {
      a > 0 && (c = r = 'right');
      var f;
      i =
        e.options.lineWrapping && (f = l.getClientRects()).length > 1
          ? f['right' == r ? f.length - 1 : 0]
          : l.getBoundingClientRect();
    }
    if (Cl && kl < 9 && !a && (!i || (!i.left && !i.right))) {
      var d = l.parentNode.getClientRects()[0];
      i = d
        ? {
            left: d.left,
            right: d.left + xn(e.display),
            top: d.top,
            bottom: d.bottom,
          }
        : Sa;
    }
    for (
      var h = i.top - t.rect.top,
        p = i.bottom - t.rect.top,
        g = (h + p) / 2,
        m = t.view.measure.heights,
        v = 0;
      v < m.length - 1 && !(g < m[v]);
      v++
    );
    var y = v ? m[v - 1] : 0,
      b = m[v],
      x = {
        left: ('right' == c ? i.right : i.left) - t.rect.left,
        right: ('left' == c ? i.left : i.right) - t.rect.left,
        top: y,
        bottom: b,
      };
    return (
      i.left || i.right || (x.bogus = !0),
      e.options.singleCursorHeightPerLine || ((x.rtop = h), (x.rbottom = p)),
      x
    );
  }
  function Qt(e, t) {
    if (
      !window.screen ||
      null == screen.logicalXDPI ||
      screen.logicalXDPI == screen.deviceXDPI ||
      !U(e)
    )
      return t;
    var n = screen.logicalXDPI / screen.deviceXDPI,
      r = screen.logicalYDPI / screen.deviceYDPI;
    return {
      left: t.left * n,
      right: t.right * n,
      top: t.top * r,
      bottom: t.bottom * r,
    };
  }
  function Jt(e) {
    if (
      e.measure &&
      ((e.measure.cache = {}), (e.measure.heights = null), e.rest)
    )
      for (var t = 0; t < e.rest.length; t++) e.measure.caches[t] = {};
  }
  function en(e) {
    (e.display.externalMeasure = null), t(e.display.lineMeasure);
    for (var n = 0; n < e.display.view.length; n++) Jt(e.display.view[n]);
  }
  function tn(e) {
    en(e),
      (e.display.cachedCharWidth =
        e.display.cachedTextHeight =
        e.display.cachedPaddingH =
          null),
      e.options.lineWrapping || (e.display.maxLineChanged = !0),
      (e.display.lineNumChars = null);
  }
  function nn() {
    return Tl && Dl
      ? -(
          document.body.getBoundingClientRect().left -
          parseInt(getComputedStyle(document.body).marginLeft)
        )
      : window.pageXOffset ||
          (document.documentElement || document.body).scrollLeft;
  }
  function rn() {
    return Tl && Dl
      ? -(
          document.body.getBoundingClientRect().top -
          parseInt(getComputedStyle(document.body).marginTop)
        )
      : window.pageYOffset ||
          (document.documentElement || document.body).scrollTop;
  }
  function on(e) {
    var t = 0;
    if (e.widgets)
      for (var n = 0; n < e.widgets.length; ++n)
        e.widgets[n].above && (t += Ft(e.widgets[n]));
    return t;
  }
  function ln(e, t, n, r, i) {
    if (!i) {
      var o = on(t);
      (n.top += o), (n.bottom += o);
    }
    if ('line' == r) return n;
    r || (r = 'local');
    var l = nt(t);
    if (
      ('local' == r ? (l += Et(e.display)) : (l -= e.display.viewOffset),
      'page' == r || 'window' == r)
    ) {
      var a = e.display.lineSpace.getBoundingClientRect();
      l += a.top + ('window' == r ? 0 : rn());
      var s = a.left + ('window' == r ? 0 : nn());
      (n.left += s), (n.right += s);
    }
    return (n.top += l), (n.bottom += l), n;
  }
  function an(e, t, n) {
    if ('div' == n) return t;
    var r = t.left,
      i = t.top;
    if ('page' == n) (r -= nn()), (i -= rn());
    else if ('local' == n || !n) {
      var o = e.display.sizer.getBoundingClientRect();
      (r += o.left), (i += o.top);
    }
    var l = e.display.lineSpace.getBoundingClientRect();
    return { left: r - l.left, top: i - l.top };
  }
  function sn(e, t, n, r, i) {
    return r || (r = J(e.doc, t.line)), ln(e, r, Kt(e, r, t.ch, i), n);
  }
  function cn(e, t, n, r, i, o) {
    function l(t, l) {
      var a = $t(e, i, t, l ? 'right' : 'left', o);
      return l ? (a.left = a.right) : (a.right = a.left), ln(e, r, a, n);
    }
    function a(e, t, n) {
      var r = s[t],
        i = 1 == r.level;
      return l(n ? e - 1 : e, i != n);
    }
    (r = r || J(e.doc, t.line)), i || (i = _t(e, r));
    var s = O(r, e.doc.direction),
      c = t.ch,
      u = t.sticky;
    if (
      (c >= r.text.length
        ? ((c = r.text.length), (u = 'before'))
        : c <= 0 && ((c = 0), (u = 'after')),
      !s)
    )
      return l('before' == u ? c - 1 : c, 'before' == u);
    var f = M(s, c, u),
      d = ea,
      h = a(c, f, 'before' == u);
    return null != d && (h.other = a(c, d, 'before' != u)), h;
  }
  function un(e, t) {
    var n = 0;
    (t = pe(e.doc, t)), e.options.lineWrapping || (n = xn(e.display) * t.ch);
    var r = J(e.doc, t.line),
      i = nt(r) + Et(e.display);
    return { left: n, right: n, top: i, bottom: i + r.height };
  }
  function fn(e, t, n, r, i) {
    var o = ae(e, t, n);
    return (o.xRel = i), r && (o.outside = r), o;
  }
  function dn(e, t, n) {
    var r = e.doc;
    if (((n += e.display.viewOffset), n < 0))
      return fn(r.first, 0, null, -1, -1);
    var i = ie(r, n),
      o = r.first + r.size - 1;
    if (i > o) return fn(r.first + r.size - 1, J(r, o).text.length, null, 1, 1);
    t < 0 && (t = 0);
    for (var l = J(r, i); ; ) {
      var a = mn(e, l, i, t, n),
        s = _e(l, a.ch + (a.xRel > 0 || a.outside > 0 ? 1 : 0));
      if (!s) return a;
      var c = s.find(1);
      if (c.line == i) return c;
      l = J(r, (i = c.line));
    }
  }
  function hn(e, t, n, r) {
    r -= on(t);
    var i = t.text.length,
      o = L(
        function (t) {
          return $t(e, n, t - 1).bottom <= r;
        },
        i,
        0
      );
    return (
      (i = L(
        function (t) {
          return $t(e, n, t).top > r;
        },
        o,
        i
      )),
      { begin: o, end: i }
    );
  }
  function pn(e, t, n, r) {
    n || (n = _t(e, t));
    var i = ln(e, t, $t(e, n, r), 'line').top;
    return hn(e, t, n, i);
  }
  function gn(e, t, n, r) {
    return !(e.bottom <= n) && (e.top > n || (r ? e.left : e.right) > t);
  }
  function mn(e, t, n, r, i) {
    i -= nt(t);
    var o = _t(e, t),
      l = on(t),
      a = 0,
      s = t.text.length,
      c = !0,
      u = O(t, e.doc.direction);
    if (u) {
      var f = (e.options.lineWrapping ? yn : vn)(e, t, n, o, u, r, i);
      (c = 1 != f.level),
        (a = c ? f.from : f.to - 1),
        (s = c ? f.to : f.from - 1);
    }
    var d,
      h,
      p = null,
      g = null,
      m = L(
        function (t) {
          var n = $t(e, o, t);
          return (
            (n.top += l),
            (n.bottom += l),
            !!gn(n, r, i, !1) &&
              (n.top <= i && n.left <= r && ((p = t), (g = n)), !0)
          );
        },
        a,
        s
      ),
      v = !1;
    if (g) {
      var y = r - g.left < g.right - r,
        b = y == c;
      (m = p + (b ? 0 : 1)),
        (h = b ? 'after' : 'before'),
        (d = y ? g.left : g.right);
    } else {
      c || (m != s && m != a) || m++,
        (h =
          0 == m
            ? 'after'
            : m == t.text.length
            ? 'before'
            : $t(e, o, m - (c ? 1 : 0)).bottom + l <= i == c
            ? 'after'
            : 'before');
      var x = cn(e, ae(n, m, h), 'line', t, o);
      (d = x.left), (v = i < x.top ? -1 : i >= x.bottom ? 1 : 0);
    }
    return (m = S(t.text, m, 1)), fn(n, m, h, v, r - d);
  }
  function vn(e, t, n, r, i, o, l) {
    var a = L(
        function (a) {
          var s = i[a],
            c = 1 != s.level;
          return gn(
            cn(
              e,
              ae(n, c ? s.to : s.from, c ? 'before' : 'after'),
              'line',
              t,
              r
            ),
            o,
            l,
            !0
          );
        },
        0,
        i.length - 1
      ),
      s = i[a];
    if (a > 0) {
      var c = 1 != s.level,
        u = cn(
          e,
          ae(n, c ? s.from : s.to, c ? 'after' : 'before'),
          'line',
          t,
          r
        );
      gn(u, o, l, !0) && u.top > l && (s = i[a - 1]);
    }
    return s;
  }
  function yn(e, t, n, r, i, o, l) {
    var a = hn(e, t, r, l),
      s = a.begin,
      c = a.end;
    /\s/.test(t.text.charAt(c - 1)) && c--;
    for (var u = null, f = null, d = 0; d < i.length; d++) {
      var h = i[d];
      if (!(h.from >= c || h.to <= s)) {
        var p = 1 != h.level,
          g = $t(e, r, p ? Math.min(c, h.to) - 1 : Math.max(s, h.from)).right,
          m = g < o ? o - g + 1e9 : g - o;
        (!u || f > m) && ((u = h), (f = m));
      }
    }
    return (
      u || (u = i[i.length - 1]),
      u.from < s && (u = { from: s, to: u.to, level: u.level }),
      u.to > c && (u = { from: u.from, to: c, level: u.level }),
      u
    );
  }
  function bn(e) {
    if (null != e.cachedTextHeight) return e.cachedTextHeight;
    if (null == ba) {
      ba = r('pre', null, 'CodeMirror-line-like');
      for (var i = 0; i < 49; ++i)
        ba.appendChild(document.createTextNode('x')), ba.appendChild(r('br'));
      ba.appendChild(document.createTextNode('x'));
    }
    n(e.measure, ba);
    var o = ba.offsetHeight / 50;
    return o > 3 && (e.cachedTextHeight = o), t(e.measure), o || 1;
  }
  function xn(e) {
    if (null != e.cachedCharWidth) return e.cachedCharWidth;
    var t = r('span', 'xxxxxxxxxx'),
      i = r('pre', [t], 'CodeMirror-line-like');
    n(e.measure, i);
    var o = t.getBoundingClientRect(),
      l = (o.right - o.left) / 10;
    return l > 2 && (e.cachedCharWidth = l), l || 10;
  }
  function wn(e) {
    for (
      var t = e.display,
        n = {},
        r = {},
        i = t.gutters.clientLeft,
        o = t.gutters.firstChild,
        l = 0;
      o;
      o = o.nextSibling, ++l
    ) {
      var a = e.display.gutterSpecs[l].className;
      (n[a] = o.offsetLeft + o.clientLeft + i), (r[a] = o.clientWidth);
    }
    return {
      fixedPos: Cn(t),
      gutterTotalWidth: t.gutters.offsetWidth,
      gutterLeft: n,
      gutterWidth: r,
      wrapperWidth: t.wrapper.clientWidth,
    };
  }
  function Cn(e) {
    return (
      e.scroller.getBoundingClientRect().left -
      e.sizer.getBoundingClientRect().left
    );
  }
  function kn(e) {
    var t = bn(e.display),
      n = e.options.lineWrapping,
      r = n && Math.max(5, e.display.scroller.clientWidth / xn(e.display) - 3);
    return function (i) {
      if (et(e.doc, i)) return 0;
      var o = 0;
      if (i.widgets)
        for (var l = 0; l < i.widgets.length; l++)
          i.widgets[l].height && (o += i.widgets[l].height);
      return n ? o + (Math.ceil(i.text.length / r) || 1) * t : o + t;
    };
  }
  function Sn(e) {
    var t = e.doc,
      n = kn(e);
    t.iter(function (e) {
      var t = n(e);
      t != e.height && ne(e, t);
    });
  }
  function Ln(e, t, n, r) {
    var i = e.display;
    if (!n && 'true' == B(t).getAttribute('cm-not-content')) return null;
    var o,
      l,
      a = i.lineSpace.getBoundingClientRect();
    try {
      (o = t.clientX - a.left), (l = t.clientY - a.top);
    } catch (s) {
      return null;
    }
    var c,
      u = dn(e, o, l);
    if (r && u.xRel > 0 && (c = J(e.doc, u.line).text).length == u.ch) {
      var d = f(c, c.length, e.options.tabSize) - c.length;
      u = ae(
        u.line,
        Math.max(0, Math.round((o - Rt(e.display).left) / xn(e.display)) - d)
      );
    }
    return u;
  }
  function Tn(e, t) {
    if (t >= e.display.viewTo) return null;
    if (((t -= e.display.viewFrom), t < 0)) return null;
    for (var n = e.display.view, r = 0; r < n.length; r++)
      if (((t -= n[r].size), t < 0)) return r;
  }
  function Mn(e, t, n, r) {
    null == t && (t = e.doc.first),
      null == n && (n = e.doc.first + e.doc.size),
      r || (r = 0);
    var i = e.display;
    if (
      (r &&
        n < i.viewTo &&
        (null == i.updateLineNumbers || i.updateLineNumbers > t) &&
        (i.updateLineNumbers = t),
      (e.curOp.viewChanged = !0),
      t >= i.viewTo)
    )
      va && Qe(e.doc, t) < i.viewTo && Nn(e);
    else if (n <= i.viewFrom)
      va && Je(e.doc, n + r) > i.viewFrom
        ? Nn(e)
        : ((i.viewFrom += r), (i.viewTo += r));
    else if (t <= i.viewFrom && n >= i.viewTo) Nn(e);
    else if (t <= i.viewFrom) {
      var o = An(e, n, n + r, 1);
      o
        ? ((i.view = i.view.slice(o.index)),
          (i.viewFrom = o.lineN),
          (i.viewTo += r))
        : Nn(e);
    } else if (n >= i.viewTo) {
      var l = An(e, t, t, -1);
      l ? ((i.view = i.view.slice(0, l.index)), (i.viewTo = l.lineN)) : Nn(e);
    } else {
      var a = An(e, t, t, -1),
        s = An(e, n, n + r, 1);
      a && s
        ? ((i.view = i.view
            .slice(0, a.index)
            .concat(mt(e, a.lineN, s.lineN))
            .concat(i.view.slice(s.index))),
          (i.viewTo += r))
        : Nn(e);
    }
    var c = i.externalMeasured;
    c &&
      (n < c.lineN
        ? (c.lineN += r)
        : t < c.lineN + c.size && (i.externalMeasured = null));
  }
  function On(e, t, n) {
    e.curOp.viewChanged = !0;
    var r = e.display,
      i = e.display.externalMeasured;
    if (
      (i && t >= i.lineN && t < i.lineN + i.size && (r.externalMeasured = null),
      !(t < r.viewFrom || t >= r.viewTo))
    ) {
      var o = r.view[Tn(e, t)];
      if (null != o.node) {
        var l = o.changes || (o.changes = []);
        d(l, n) == -1 && l.push(n);
      }
    }
  }
  function Nn(e) {
    (e.display.viewFrom = e.display.viewTo = e.doc.first),
      (e.display.view = []),
      (e.display.viewOffset = 0);
  }
  function An(e, t, n, r) {
    var i,
      o = Tn(e, t),
      l = e.display.view;
    if (!va || n == e.doc.first + e.doc.size) return { index: o, lineN: n };
    for (var a = e.display.viewFrom, s = 0; s < o; s++) a += l[s].size;
    if (a != t) {
      if (r > 0) {
        if (o == l.length - 1) return null;
        (i = a + l[o].size - t), o++;
      } else i = a - t;
      (t += i), (n += i);
    }
    for (; Qe(e.doc, n) != n; ) {
      if (o == (r < 0 ? 0 : l.length - 1)) return null;
      (n += r * l[o - (r < 0 ? 1 : 0)].size), (o += r);
    }
    return { index: o, lineN: n };
  }
  function Pn(e, t, n) {
    var r = e.display,
      i = r.view;
    0 == i.length || t >= r.viewTo || n <= r.viewFrom
      ? ((r.view = mt(e, t, n)), (r.viewFrom = t))
      : (r.viewFrom > t
          ? (r.view = mt(e, t, r.viewFrom).concat(r.view))
          : r.viewFrom < t && (r.view = r.view.slice(Tn(e, t))),
        (r.viewFrom = t),
        r.viewTo < n
          ? (r.view = r.view.concat(mt(e, r.viewTo, n)))
          : r.viewTo > n && (r.view = r.view.slice(0, Tn(e, n)))),
      (r.viewTo = n);
  }
  function Dn(e) {
    for (var t = e.display.view, n = 0, r = 0; r < t.length; r++) {
      var i = t[r];
      i.hidden || (i.node && !i.changes) || ++n;
    }
    return n;
  }
  function Hn(e) {
    e.display.input.showSelection(e.display.input.prepareSelection());
  }
  function Fn(e, t) {
    void 0 === t && (t = !0);
    for (
      var n = e.doc,
        r = {},
        i = (r.cursors = document.createDocumentFragment()),
        o = (r.selection = document.createDocumentFragment()),
        l = 0;
      l < n.sel.ranges.length;
      l++
    )
      if (t || l != n.sel.primIndex) {
        var a = n.sel.ranges[l];
        if (
          !(
            a.from().line >= e.display.viewTo ||
            a.to().line < e.display.viewFrom
          )
        ) {
          var s = a.empty();
          (s || e.options.showCursorWhenSelecting) && Wn(e, a.head, i),
            s || In(e, a, o);
        }
      }
    return r;
  }
  function Wn(e, t, n) {
    var i = cn(e, t, 'div', null, null, !e.options.singleCursorHeightPerLine),
      o = n.appendChild(r('div', ' ', 'CodeMirror-cursor'));
    if (
      ((o.style.left = i.left + 'px'),
      (o.style.top = i.top + 'px'),
      (o.style.height =
        Math.max(0, i.bottom - i.top) * e.options.cursorHeight + 'px'),
      /\bcm-fat-cursor\b/.test(e.getWrapperElement().className))
    ) {
      var l = sn(e, t, 'div', null, null);
      o.style.width = Math.max(0, l.right - l.left) + 'px';
    }
    if (i.other) {
      var a = n.appendChild(
        r('div', ' ', 'CodeMirror-cursor CodeMirror-secondarycursor')
      );
      (a.style.display = ''),
        (a.style.left = i.other.left + 'px'),
        (a.style.top = i.other.top + 'px'),
        (a.style.height = 0.85 * (i.other.bottom - i.other.top) + 'px');
    }
  }
  function En(e, t) {
    return e.top - t.top || e.left - t.left;
  }
  function In(e, t, n) {
    function i(e, t, n, i) {
      t < 0 && (t = 0),
        (t = Math.round(t)),
        (i = Math.round(i)),
        s.appendChild(
          r(
            'div',
            null,
            'CodeMirror-selected',
            'position: absolute; left: ' +
              e +
              'px;\n                             top: ' +
              t +
              'px; width: ' +
              (null == n ? f - e : n) +
              'px;\n                             height: ' +
              (i - t) +
              'px'
          )
        );
    }
    function o(t, n, r) {
      function o(n, r) {
        return sn(e, ae(t, n), 'div', h, r);
      }
      function l(t, n, r) {
        var i = pn(e, h, null, t),
          l = ('ltr' == n) == ('after' == r) ? 'left' : 'right',
          a =
            'after' == r
              ? i.begin
              : i.end - (/\s/.test(h.text.charAt(i.end - 1)) ? 2 : 1);
        return o(a, l)[l];
      }
      var s,
        c,
        h = J(a, t),
        p = h.text.length,
        g = O(h, a.direction);
      return (
        T(g, n || 0, null == r ? p : r, function (e, t, a, h) {
          var m = 'ltr' == a,
            v = o(e, m ? 'left' : 'right'),
            y = o(t - 1, m ? 'right' : 'left'),
            b = null == n && 0 == e,
            x = null == r && t == p,
            w = 0 == h,
            C = !g || h == g.length - 1;
          if (y.top - v.top <= 3) {
            var k = (d ? b : x) && w,
              S = (d ? x : b) && C,
              L = k ? u : (m ? v : y).left,
              T = S ? f : (m ? y : v).right;
            i(L, v.top, T - L, v.bottom);
          } else {
            var M, O, N, A;
            m
              ? ((M = d && b && w ? u : v.left),
                (O = d ? f : l(e, a, 'before')),
                (N = d ? u : l(t, a, 'after')),
                (A = d && x && C ? f : y.right))
              : ((M = d ? l(e, a, 'before') : u),
                (O = !d && b && w ? f : v.right),
                (N = !d && x && C ? u : y.left),
                (A = d ? l(t, a, 'after') : f)),
              i(M, v.top, O - M, v.bottom),
              v.bottom < y.top && i(u, v.bottom, null, y.top),
              i(N, y.top, A - N, y.bottom);
          }
          (!s || En(v, s) < 0) && (s = v),
            En(y, s) < 0 && (s = y),
            (!c || En(v, c) < 0) && (c = v),
            En(y, c) < 0 && (c = y);
        }),
        { start: s, end: c }
      );
    }
    var l = e.display,
      a = e.doc,
      s = document.createDocumentFragment(),
      c = Rt(e.display),
      u = c.left,
      f = Math.max(l.sizerWidth, Bt(e) - l.sizer.offsetLeft) - c.right,
      d = 'ltr' == a.direction,
      h = t.from(),
      p = t.to();
    if (h.line == p.line) o(h.line, h.ch, p.ch);
    else {
      var g = J(a, h.line),
        m = J(a, p.line),
        v = Xe(g) == Xe(m),
        y = o(h.line, h.ch, v ? g.text.length + 1 : null).end,
        b = o(p.line, v ? 0 : null, p.ch).start;
      v &&
        (y.top < b.top - 2
          ? (i(y.right, y.top, null, y.bottom), i(u, b.top, b.left, b.bottom))
          : i(y.right, y.top, b.left - y.right, y.bottom)),
        y.bottom < b.top && i(u, y.bottom, null, b.top);
    }
    n.appendChild(s);
  }
  function Rn(e) {
    if (e.state.focused) {
      var t = e.display;
      clearInterval(t.blinker);
      var n = !0;
      (t.cursorDiv.style.visibility = ''),
        e.options.cursorBlinkRate > 0
          ? (t.blinker = setInterval(function () {
              e.hasFocus() || qn(e),
                (t.cursorDiv.style.visibility = (n = !n) ? '' : 'hidden');
            }, e.options.cursorBlinkRate))
          : e.options.cursorBlinkRate < 0 &&
            (t.cursorDiv.style.visibility = 'hidden');
    }
  }
  function zn(e) {
    e.hasFocus() || (e.display.input.focus(), e.state.focused || jn(e));
  }
  function Bn(e) {
    (e.state.delayingBlurEvent = !0),
      setTimeout(function () {
        e.state.delayingBlurEvent &&
          ((e.state.delayingBlurEvent = !1), e.state.focused && qn(e));
      }, 100);
  }
  function jn(e, t) {
    e.state.delayingBlurEvent &&
      !e.state.draggingText &&
      (e.state.delayingBlurEvent = !1),
      'nocursor' != e.options.readOnly &&
        (e.state.focused ||
          (P(e, 'focus', e, t),
          (e.state.focused = !0),
          a(e.display.wrapper, 'CodeMirror-focused'),
          e.curOp ||
            e.display.selForContextMenu == e.doc.sel ||
            (e.display.input.reset(),
            Sl &&
              setTimeout(function () {
                return e.display.input.reset(!0);
              }, 20)),
          e.display.input.receivedFocus()),
        Rn(e));
  }
  function qn(e, t) {
    e.state.delayingBlurEvent ||
      (e.state.focused &&
        (P(e, 'blur', e, t),
        (e.state.focused = !1),
        jl(e.display.wrapper, 'CodeMirror-focused')),
      clearInterval(e.display.blinker),
      setTimeout(function () {
        e.state.focused || (e.display.shift = !1);
      }, 150));
  }
  function Gn(e) {
    for (
      var t = e.display, n = t.lineDiv.offsetTop, r = 0;
      r < t.view.length;
      r++
    ) {
      var i = t.view[r],
        o = e.options.lineWrapping,
        l = void 0,
        a = 0;
      if (!i.hidden) {
        if (Cl && kl < 8) {
          var s = i.node.offsetTop + i.node.offsetHeight;
          (l = s - n), (n = s);
        } else {
          var c = i.node.getBoundingClientRect();
          (l = c.bottom - c.top),
            !o &&
              i.text.firstChild &&
              (a =
                i.text.firstChild.getBoundingClientRect().right - c.left - 1);
        }
        var u = i.line.height - l;
        if ((u > 0.005 || u < -0.005) && (ne(i.line, l), Un(i.line), i.rest))
          for (var f = 0; f < i.rest.length; f++) Un(i.rest[f]);
        if (a > e.display.sizerWidth) {
          var d = Math.ceil(a / xn(e.display));
          d > e.display.maxLineLength &&
            ((e.display.maxLineLength = d),
            (e.display.maxLine = i.line),
            (e.display.maxLineChanged = !0));
        }
      }
    }
  }
  function Un(e) {
    if (e.widgets)
      for (var t = 0; t < e.widgets.length; ++t) {
        var n = e.widgets[t],
          r = n.node.parentNode;
        r && (n.height = r.offsetHeight);
      }
  }
  function Kn(e, t, n) {
    var r = n && null != n.top ? Math.max(0, n.top) : e.scroller.scrollTop;
    r = Math.floor(r - Et(e));
    var i = n && null != n.bottom ? n.bottom : r + e.wrapper.clientHeight,
      o = ie(t, r),
      l = ie(t, i);
    if (n && n.ensure) {
      var a = n.ensure.from.line,
        s = n.ensure.to.line;
      a < o
        ? ((o = a), (l = ie(t, nt(J(t, a)) + e.wrapper.clientHeight)))
        : Math.min(s, t.lastLine()) >= l &&
          ((o = ie(t, nt(J(t, s)) - e.wrapper.clientHeight)), (l = s));
    }
    return { from: o, to: Math.max(l, o + 1) };
  }
  function Vn(e, t) {
    if (!D(e, 'scrollCursorIntoView')) {
      var n = e.display,
        i = n.sizer.getBoundingClientRect(),
        o = null;
      if (
        (t.top + i.top < 0
          ? (o = !0)
          : t.bottom + i.top >
              (window.innerHeight || document.documentElement.clientHeight) &&
            (o = !1),
        null != o && !Al)
      ) {
        var l = r(
          'div',
          '​',
          null,
          'position: absolute;\n                         top: ' +
            (t.top - n.viewOffset - Et(e.display)) +
            'px;\n                         height: ' +
            (t.bottom - t.top + zt(e) + n.barHeight) +
            'px;\n                         left: ' +
            t.left +
            'px; width: ' +
            Math.max(2, t.right - t.left) +
            'px;'
        );
        e.display.lineSpace.appendChild(l),
          l.scrollIntoView(o),
          e.display.lineSpace.removeChild(l);
      }
    }
  }
  function _n(e, t, n, r) {
    null == r && (r = 0);
    var i;
    e.options.lineWrapping ||
      t != n ||
      ((n = 'before' == t.sticky ? ae(t.line, t.ch + 1, 'before') : t),
      (t = t.ch
        ? ae(t.line, 'before' == t.sticky ? t.ch - 1 : t.ch, 'after')
        : t));
    for (var o = 0; o < 5; o++) {
      var l = !1,
        a = cn(e, t),
        s = n && n != t ? cn(e, n) : a;
      i = {
        left: Math.min(a.left, s.left),
        top: Math.min(a.top, s.top) - r,
        right: Math.max(a.left, s.left),
        bottom: Math.max(a.bottom, s.bottom) + r,
      };
      var c = Xn(e, i),
        u = e.doc.scrollTop,
        f = e.doc.scrollLeft;
      if (
        (null != c.scrollTop &&
          (nr(e, c.scrollTop), Math.abs(e.doc.scrollTop - u) > 1 && (l = !0)),
        null != c.scrollLeft &&
          (ir(e, c.scrollLeft), Math.abs(e.doc.scrollLeft - f) > 1 && (l = !0)),
        !l)
      )
        break;
    }
    return i;
  }
  function $n(e, t) {
    var n = Xn(e, t);
    null != n.scrollTop && nr(e, n.scrollTop),
      null != n.scrollLeft && ir(e, n.scrollLeft);
  }
  function Xn(e, t) {
    var n = e.display,
      r = bn(e.display);
    t.top < 0 && (t.top = 0);
    var i =
        e.curOp && null != e.curOp.scrollTop
          ? e.curOp.scrollTop
          : n.scroller.scrollTop,
      o = jt(e),
      l = {};
    t.bottom - t.top > o && (t.bottom = t.top + o);
    var a = e.doc.height + It(n),
      s = t.top < r,
      c = t.bottom > a - r;
    if (t.top < i) l.scrollTop = s ? 0 : t.top;
    else if (t.bottom > i + o) {
      var u = Math.min(t.top, (c ? a : t.bottom) - o);
      u != i && (l.scrollTop = u);
    }
    var f = e.options.fixedGutter ? 0 : n.gutters.offsetWidth,
      d =
        e.curOp && null != e.curOp.scrollLeft
          ? e.curOp.scrollLeft
          : n.scroller.scrollLeft - f,
      h = Bt(e) - n.gutters.offsetWidth,
      p = t.right - t.left > h;
    return (
      p && (t.right = t.left + h),
      t.left < 10
        ? (l.scrollLeft = 0)
        : t.left < d
        ? (l.scrollLeft = Math.max(0, t.left + f - (p ? 0 : 10)))
        : t.right > h + d - 3 && (l.scrollLeft = t.right + (p ? 0 : 10) - h),
      l
    );
  }
  function Yn(e, t) {
    null != t &&
      (er(e),
      (e.curOp.scrollTop =
        (null == e.curOp.scrollTop ? e.doc.scrollTop : e.curOp.scrollTop) + t));
  }
  function Zn(e) {
    er(e);
    var t = e.getCursor();
    e.curOp.scrollToPos = {
      from: t,
      to: t,
      margin: e.options.cursorScrollMargin,
    };
  }
  function Qn(e, t, n) {
    (null == t && null == n) || er(e),
      null != t && (e.curOp.scrollLeft = t),
      null != n && (e.curOp.scrollTop = n);
  }
  function Jn(e, t) {
    er(e), (e.curOp.scrollToPos = t);
  }
  function er(e) {
    var t = e.curOp.scrollToPos;
    if (t) {
      e.curOp.scrollToPos = null;
      var n = un(e, t.from),
        r = un(e, t.to);
      tr(e, n, r, t.margin);
    }
  }
  function tr(e, t, n, r) {
    var i = Xn(e, {
      left: Math.min(t.left, n.left),
      top: Math.min(t.top, n.top) - r,
      right: Math.max(t.right, n.right),
      bottom: Math.max(t.bottom, n.bottom) + r,
    });
    Qn(e, i.scrollLeft, i.scrollTop);
  }
  function nr(e, t) {
    Math.abs(e.doc.scrollTop - t) < 2 ||
      (yl || Or(e, { top: t }), rr(e, t, !0), yl && Or(e), wr(e, 100));
  }
  function rr(e, t, n) {
    (t = Math.max(
      0,
      Math.min(
        e.display.scroller.scrollHeight - e.display.scroller.clientHeight,
        t
      )
    )),
      (e.display.scroller.scrollTop != t || n) &&
        ((e.doc.scrollTop = t),
        e.display.scrollbars.setScrollTop(t),
        e.display.scroller.scrollTop != t &&
          (e.display.scroller.scrollTop = t));
  }
  function ir(e, t, n, r) {
    (t = Math.max(
      0,
      Math.min(
        t,
        e.display.scroller.scrollWidth - e.display.scroller.clientWidth
      )
    )),
      ((n ? t == e.doc.scrollLeft : Math.abs(e.doc.scrollLeft - t) < 2) &&
        !r) ||
        ((e.doc.scrollLeft = t),
        Dr(e),
        e.display.scroller.scrollLeft != t &&
          (e.display.scroller.scrollLeft = t),
        e.display.scrollbars.setScrollLeft(t));
  }
  function or(e) {
    var t = e.display,
      n = t.gutters.offsetWidth,
      r = Math.round(e.doc.height + It(e.display));
    return {
      clientHeight: t.scroller.clientHeight,
      viewHeight: t.wrapper.clientHeight,
      scrollWidth: t.scroller.scrollWidth,
      clientWidth: t.scroller.clientWidth,
      viewWidth: t.wrapper.clientWidth,
      barLeft: e.options.fixedGutter ? n : 0,
      docHeight: r,
      scrollHeight: r + zt(e) + t.barHeight,
      nativeBarWidth: t.nativeBarWidth,
      gutterWidth: n,
    };
  }
  function lr(e, t) {
    t || (t = or(e));
    var n = e.display.barWidth,
      r = e.display.barHeight;
    ar(e, t);
    for (
      var i = 0;
      (i < 4 && n != e.display.barWidth) || r != e.display.barHeight;
      i++
    )
      n != e.display.barWidth && e.options.lineWrapping && Gn(e),
        ar(e, or(e)),
        (n = e.display.barWidth),
        (r = e.display.barHeight);
  }
  function ar(e, t) {
    var n = e.display,
      r = n.scrollbars.update(t);
    (n.sizer.style.paddingRight = (n.barWidth = r.right) + 'px'),
      (n.sizer.style.paddingBottom = (n.barHeight = r.bottom) + 'px'),
      (n.heightForcer.style.borderBottom = r.bottom + 'px solid transparent'),
      r.right && r.bottom
        ? ((n.scrollbarFiller.style.display = 'block'),
          (n.scrollbarFiller.style.height = r.bottom + 'px'),
          (n.scrollbarFiller.style.width = r.right + 'px'))
        : (n.scrollbarFiller.style.display = ''),
      r.bottom && e.options.coverGutterNextToScrollbar && e.options.fixedGutter
        ? ((n.gutterFiller.style.display = 'block'),
          (n.gutterFiller.style.height = r.bottom + 'px'),
          (n.gutterFiller.style.width = t.gutterWidth + 'px'))
        : (n.gutterFiller.style.display = '');
  }
  function sr(e) {
    e.display.scrollbars &&
      (e.display.scrollbars.clear(),
      e.display.scrollbars.addClass &&
        jl(e.display.wrapper, e.display.scrollbars.addClass)),
      (e.display.scrollbars = new Ma[e.options.scrollbarStyle](
        function (t) {
          e.display.wrapper.insertBefore(t, e.display.scrollbarFiller),
            ra(t, 'mousedown', function () {
              e.state.focused &&
                setTimeout(function () {
                  return e.display.input.focus();
                }, 0);
            }),
            t.setAttribute('cm-not-content', 'true');
        },
        function (t, n) {
          'horizontal' == n ? ir(e, t) : nr(e, t);
        },
        e
      )),
      e.display.scrollbars.addClass &&
        a(e.display.wrapper, e.display.scrollbars.addClass);
  }
  function cr(e) {
    (e.curOp = {
      cm: e,
      viewChanged: !1,
      startHeight: e.doc.height,
      forceUpdate: !1,
      updateInput: 0,
      typing: !1,
      changeObjs: null,
      cursorActivityHandlers: null,
      cursorActivityCalled: 0,
      selectionChanged: !1,
      updateMaxLine: !1,
      scrollLeft: null,
      scrollTop: null,
      scrollToPos: null,
      focus: !1,
      id: ++Oa,
      markArrays: null,
    }),
      vt(e.curOp);
  }
  function ur(e) {
    var t = e.curOp;
    t &&
      bt(t, function (e) {
        for (var t = 0; t < e.ops.length; t++) e.ops[t].cm.curOp = null;
        fr(e);
      });
  }
  function fr(e) {
    for (var t = e.ops, n = 0; n < t.length; n++) dr(t[n]);
    for (var r = 0; r < t.length; r++) hr(t[r]);
    for (var i = 0; i < t.length; i++) pr(t[i]);
    for (var o = 0; o < t.length; o++) gr(t[o]);
    for (var l = 0; l < t.length; l++) mr(t[l]);
  }
  function dr(e) {
    var t = e.cm,
      n = t.display;
    kr(t),
      e.updateMaxLine && it(t),
      (e.mustUpdate =
        e.viewChanged ||
        e.forceUpdate ||
        null != e.scrollTop ||
        (e.scrollToPos &&
          (e.scrollToPos.from.line < n.viewFrom ||
            e.scrollToPos.to.line >= n.viewTo)) ||
        (n.maxLineChanged && t.options.lineWrapping)),
      (e.update =
        e.mustUpdate &&
        new Na(
          t,
          e.mustUpdate && { top: e.scrollTop, ensure: e.scrollToPos },
          e.forceUpdate
        ));
  }
  function hr(e) {
    e.updatedDisplay = e.mustUpdate && Tr(e.cm, e.update);
  }
  function pr(e) {
    var t = e.cm,
      n = t.display;
    e.updatedDisplay && Gn(t),
      (e.barMeasure = or(t)),
      n.maxLineChanged &&
        !t.options.lineWrapping &&
        ((e.adjustWidthTo = Kt(t, n.maxLine, n.maxLine.text.length).left + 3),
        (t.display.sizerWidth = e.adjustWidthTo),
        (e.barMeasure.scrollWidth = Math.max(
          n.scroller.clientWidth,
          n.sizer.offsetLeft + e.adjustWidthTo + zt(t) + t.display.barWidth
        )),
        (e.maxScrollLeft = Math.max(
          0,
          n.sizer.offsetLeft + e.adjustWidthTo - Bt(t)
        ))),
      (e.updatedDisplay || e.selectionChanged) &&
        (e.preparedSelection = n.input.prepareSelection());
  }
  function gr(e) {
    var t = e.cm;
    null != e.adjustWidthTo &&
      ((t.display.sizer.style.minWidth = e.adjustWidthTo + 'px'),
      e.maxScrollLeft < t.doc.scrollLeft &&
        ir(t, Math.min(t.display.scroller.scrollLeft, e.maxScrollLeft), !0),
      (t.display.maxLineChanged = !1));
    var n = e.focus && e.focus == l();
    e.preparedSelection &&
      t.display.input.showSelection(e.preparedSelection, n),
      (e.updatedDisplay || e.startHeight != t.doc.height) &&
        lr(t, e.barMeasure),
      e.updatedDisplay && Pr(t, e.barMeasure),
      e.selectionChanged && Rn(t),
      t.state.focused && e.updateInput && t.display.input.reset(e.typing),
      n && zn(e.cm);
  }
  function mr(e) {
    var t = e.cm,
      n = t.display,
      r = t.doc;
    if (
      (e.updatedDisplay && Mr(t, e.update),
      null == n.wheelStartX ||
        (null == e.scrollTop && null == e.scrollLeft && !e.scrollToPos) ||
        (n.wheelStartX = n.wheelStartY = null),
      null != e.scrollTop && rr(t, e.scrollTop, e.forceScroll),
      null != e.scrollLeft && ir(t, e.scrollLeft, !0, !0),
      e.scrollToPos)
    ) {
      var i = _n(
        t,
        pe(r, e.scrollToPos.from),
        pe(r, e.scrollToPos.to),
        e.scrollToPos.margin
      );
      Vn(t, i);
    }
    var o = e.maybeHiddenMarkers,
      l = e.maybeUnhiddenMarkers;
    if (o)
      for (var a = 0; a < o.length; ++a) o[a].lines.length || P(o[a], 'hide');
    if (l)
      for (var s = 0; s < l.length; ++s) l[s].lines.length && P(l[s], 'unhide');
    n.wrapper.offsetHeight && (r.scrollTop = t.display.scroller.scrollTop),
      e.changeObjs && P(t, 'changes', t, e.changeObjs),
      e.update && e.update.finish();
  }
  function vr(e, t) {
    if (e.curOp) return t();
    cr(e);
    try {
      return t();
    } finally {
      ur(e);
    }
  }
  function yr(e, t) {
    return function () {
      if (e.curOp) return t.apply(e, arguments);
      cr(e);
      try {
        return t.apply(e, arguments);
      } finally {
        ur(e);
      }
    };
  }
  function br(e) {
    return function () {
      if (this.curOp) return e.apply(this, arguments);
      cr(this);
      try {
        return e.apply(this, arguments);
      } finally {
        ur(this);
      }
    };
  }
  function xr(e) {
    return function () {
      var t = this.cm;
      if (!t || t.curOp) return e.apply(this, arguments);
      cr(t);
      try {
        return e.apply(this, arguments);
      } finally {
        ur(t);
      }
    };
  }
  function wr(e, t) {
    e.doc.highlightFrontier < e.display.viewTo &&
      e.state.highlight.set(t, c(Cr, e));
  }
  function Cr(e) {
    var t = e.doc;
    if (!(t.highlightFrontier >= e.display.viewTo)) {
      var n = +new Date() + e.options.workTime,
        r = be(e, t.highlightFrontier),
        i = [];
      t.iter(
        r.line,
        Math.min(t.first + t.size, e.display.viewTo + 500),
        function (o) {
          if (r.line >= e.display.viewFrom) {
            var l = o.styles,
              a =
                o.text.length > e.options.maxHighlightLength
                  ? Y(t.mode, r.state)
                  : null,
              s = ve(e, o, r, !0);
            a && (r.state = a), (o.styles = s.styles);
            var c = o.styleClasses,
              u = s.classes;
            u ? (o.styleClasses = u) : c && (o.styleClasses = null);
            for (
              var f =
                  !l ||
                  l.length != o.styles.length ||
                  (c != u &&
                    (!c ||
                      !u ||
                      c.bgClass != u.bgClass ||
                      c.textClass != u.textClass)),
                d = 0;
              !f && d < l.length;
              ++d
            )
              f = l[d] != o.styles[d];
            f && i.push(r.line), (o.stateAfter = r.save()), r.nextLine();
          } else
            o.text.length <= e.options.maxHighlightLength && xe(e, o.text, r),
              (o.stateAfter = r.line % 5 == 0 ? r.save() : null),
              r.nextLine();
          if (+new Date() > n) return wr(e, e.options.workDelay), !0;
        }
      ),
        (t.highlightFrontier = r.line),
        (t.modeFrontier = Math.max(t.modeFrontier, r.line)),
        i.length &&
          vr(e, function () {
            for (var t = 0; t < i.length; t++) On(e, i[t], 'text');
          });
    }
  }
  function kr(e) {
    var t = e.display;
    !t.scrollbarsClipped &&
      t.scroller.offsetWidth &&
      ((t.nativeBarWidth = t.scroller.offsetWidth - t.scroller.clientWidth),
      (t.heightForcer.style.height = zt(e) + 'px'),
      (t.sizer.style.marginBottom = -t.nativeBarWidth + 'px'),
      (t.sizer.style.borderRightWidth = zt(e) + 'px'),
      (t.scrollbarsClipped = !0));
  }
  function Sr(e) {
    if (e.hasFocus()) return null;
    var t = l();
    if (!t || !o(e.display.lineDiv, t)) return null;
    var n = { activeElt: t };
    if (window.getSelection) {
      var r = window.getSelection();
      r.anchorNode &&
        r.extend &&
        o(e.display.lineDiv, r.anchorNode) &&
        ((n.anchorNode = r.anchorNode),
        (n.anchorOffset = r.anchorOffset),
        (n.focusNode = r.focusNode),
        (n.focusOffset = r.focusOffset));
    }
    return n;
  }
  function Lr(e) {
    if (
      e &&
      e.activeElt &&
      e.activeElt != l() &&
      (e.activeElt.focus(),
      !/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName) &&
        e.anchorNode &&
        o(document.body, e.anchorNode) &&
        o(document.body, e.focusNode))
    ) {
      var t = window.getSelection(),
        n = document.createRange();
      n.setEnd(e.anchorNode, e.anchorOffset),
        n.collapse(!1),
        t.removeAllRanges(),
        t.addRange(n),
        t.extend(e.focusNode, e.focusOffset);
    }
  }
  function Tr(e, n) {
    var r = e.display,
      i = e.doc;
    if (n.editorIsHidden) return Nn(e), !1;
    if (
      !n.force &&
      n.visible.from >= r.viewFrom &&
      n.visible.to <= r.viewTo &&
      (null == r.updateLineNumbers || r.updateLineNumbers >= r.viewTo) &&
      r.renderedView == r.view &&
      0 == Dn(e)
    )
      return !1;
    Hr(e) && (Nn(e), (n.dims = wn(e)));
    var o = i.first + i.size,
      l = Math.max(n.visible.from - e.options.viewportMargin, i.first),
      a = Math.min(o, n.visible.to + e.options.viewportMargin);
    r.viewFrom < l &&
      l - r.viewFrom < 20 &&
      (l = Math.max(i.first, r.viewFrom)),
      r.viewTo > a && r.viewTo - a < 20 && (a = Math.min(o, r.viewTo)),
      va && ((l = Qe(e.doc, l)), (a = Je(e.doc, a)));
    var s =
      l != r.viewFrom ||
      a != r.viewTo ||
      r.lastWrapHeight != n.wrapperHeight ||
      r.lastWrapWidth != n.wrapperWidth;
    Pn(e, l, a),
      (r.viewOffset = nt(J(e.doc, r.viewFrom))),
      (e.display.mover.style.top = r.viewOffset + 'px');
    var c = Dn(e);
    if (
      !s &&
      0 == c &&
      !n.force &&
      r.renderedView == r.view &&
      (null == r.updateLineNumbers || r.updateLineNumbers >= r.viewTo)
    )
      return !1;
    var u = Sr(e);
    return (
      c > 4 && (r.lineDiv.style.display = 'none'),
      Nr(e, r.updateLineNumbers, n.dims),
      c > 4 && (r.lineDiv.style.display = ''),
      (r.renderedView = r.view),
      Lr(u),
      t(r.cursorDiv),
      t(r.selectionDiv),
      (r.gutters.style.height = r.sizer.style.minHeight = 0),
      s &&
        ((r.lastWrapHeight = n.wrapperHeight),
        (r.lastWrapWidth = n.wrapperWidth),
        wr(e, 400)),
      (r.updateLineNumbers = null),
      !0
    );
  }
  function Mr(e, t) {
    for (var n = t.viewport, r = !0; ; r = !1) {
      if (r && e.options.lineWrapping && t.oldDisplayWidth != Bt(e))
        r && (t.visible = Kn(e.display, e.doc, n));
      else if (
        (n &&
          null != n.top &&
          (n = { top: Math.min(e.doc.height + It(e.display) - jt(e), n.top) }),
        (t.visible = Kn(e.display, e.doc, n)),
        t.visible.from >= e.display.viewFrom &&
          t.visible.to <= e.display.viewTo)
      )
        break;
      if (!Tr(e, t)) break;
      Gn(e);
      var i = or(e);
      Hn(e), lr(e, i), Pr(e, i), (t.force = !1);
    }
    t.signal(e, 'update', e),
      (e.display.viewFrom == e.display.reportedViewFrom &&
        e.display.viewTo == e.display.reportedViewTo) ||
        (t.signal(e, 'viewportChange', e, e.display.viewFrom, e.display.viewTo),
        (e.display.reportedViewFrom = e.display.viewFrom),
        (e.display.reportedViewTo = e.display.viewTo));
  }
  function Or(e, t) {
    var n = new Na(e, t);
    if (Tr(e, n)) {
      Gn(e), Mr(e, n);
      var r = or(e);
      Hn(e), lr(e, r), Pr(e, r), n.finish();
    }
  }
  function Nr(e, n, r) {
    function i(t) {
      var n = t.nextSibling;
      return (
        Sl && Fl && e.display.currentWheelTarget == t
          ? (t.style.display = 'none')
          : t.parentNode.removeChild(t),
        n
      );
    }
    for (
      var o = e.display,
        l = e.options.lineNumbers,
        a = o.lineDiv,
        s = a.firstChild,
        c = o.view,
        u = o.viewFrom,
        f = 0;
      f < c.length;
      f++
    ) {
      var h = c[f];
      if (h.hidden);
      else if (h.node && h.node.parentNode == a) {
        for (; s != h.node; ) s = i(s);
        var p = l && null != n && n <= u && h.lineNumber;
        h.changes && (d(h.changes, 'gutter') > -1 && (p = !1), Ct(e, h, u, r)),
          p &&
            (t(h.lineNumber),
            h.lineNumber.appendChild(
              document.createTextNode(le(e.options, u))
            )),
          (s = h.node.nextSibling);
      } else {
        var g = At(e, h, u, r);
        a.insertBefore(g, s);
      }
      u += h.size;
    }
    for (; s; ) s = i(s);
  }
  function Ar(e) {
    var t = e.gutters.offsetWidth;
    (e.sizer.style.marginLeft = t + 'px'), xt(e, 'gutterChanged', e);
  }
  function Pr(e, t) {
    (e.display.sizer.style.minHeight = t.docHeight + 'px'),
      (e.display.heightForcer.style.top = t.docHeight + 'px'),
      (e.display.gutters.style.height =
        t.docHeight + e.display.barHeight + zt(e) + 'px');
  }
  function Dr(e) {
    var t = e.display,
      n = t.view;
    if (t.alignWidgets || (t.gutters.firstChild && e.options.fixedGutter)) {
      for (
        var r = Cn(t) - t.scroller.scrollLeft + e.doc.scrollLeft,
          i = t.gutters.offsetWidth,
          o = r + 'px',
          l = 0;
        l < n.length;
        l++
      )
        if (!n[l].hidden) {
          e.options.fixedGutter &&
            (n[l].gutter && (n[l].gutter.style.left = o),
            n[l].gutterBackground && (n[l].gutterBackground.style.left = o));
          var a = n[l].alignable;
          if (a) for (var s = 0; s < a.length; s++) a[s].style.left = o;
        }
      e.options.fixedGutter && (t.gutters.style.left = r + i + 'px');
    }
  }
  function Hr(e) {
    if (!e.options.lineNumbers) return !1;
    var t = e.doc,
      n = le(e.options, t.first + t.size - 1),
      i = e.display;
    if (n.length != i.lineNumChars) {
      var o = i.measure.appendChild(
          r('div', [r('div', n)], 'CodeMirror-linenumber CodeMirror-gutter-elt')
        ),
        l = o.firstChild.offsetWidth,
        a = o.offsetWidth - l;
      return (
        (i.lineGutter.style.width = ''),
        (i.lineNumInnerWidth = Math.max(l, i.lineGutter.offsetWidth - a) + 1),
        (i.lineNumWidth = i.lineNumInnerWidth + a),
        (i.lineNumChars = i.lineNumInnerWidth ? n.length : -1),
        (i.lineGutter.style.width = i.lineNumWidth + 'px'),
        Ar(e.display),
        !0
      );
    }
    return !1;
  }
  function Fr(e, t) {
    for (var n = [], r = !1, i = 0; i < e.length; i++) {
      var o = e[i],
        l = null;
      if (
        ('string' != typeof o && ((l = o.style), (o = o.className)),
        'CodeMirror-linenumbers' == o)
      ) {
        if (!t) continue;
        r = !0;
      }
      n.push({ className: o, style: l });
    }
    return (
      t && !r && n.push({ className: 'CodeMirror-linenumbers', style: null }), n
    );
  }
  function Wr(e) {
    var n = e.gutters,
      i = e.gutterSpecs;
    t(n), (e.lineGutter = null);
    for (var o = 0; o < i.length; ++o) {
      var l = i[o],
        a = l.className,
        s = l.style,
        c = n.appendChild(r('div', null, 'CodeMirror-gutter ' + a));
      s && (c.style.cssText = s),
        'CodeMirror-linenumbers' == a &&
          ((e.lineGutter = c), (c.style.width = (e.lineNumWidth || 1) + 'px'));
    }
    (n.style.display = i.length ? '' : 'none'), Ar(e);
  }
  function Er(e) {
    Wr(e.display), Mn(e), Dr(e);
  }
  function Ir(e, t, n, o) {
    var l = this;
    (this.input = n),
      (l.scrollbarFiller = r('div', null, 'CodeMirror-scrollbar-filler')),
      l.scrollbarFiller.setAttribute('cm-not-content', 'true'),
      (l.gutterFiller = r('div', null, 'CodeMirror-gutter-filler')),
      l.gutterFiller.setAttribute('cm-not-content', 'true'),
      (l.lineDiv = i('div', null, 'CodeMirror-code')),
      (l.selectionDiv = r('div', null, null, 'position: relative; z-index: 1')),
      (l.cursorDiv = r('div', null, 'CodeMirror-cursors')),
      (l.measure = r('div', null, 'CodeMirror-measure')),
      (l.lineMeasure = r('div', null, 'CodeMirror-measure')),
      (l.lineSpace = i(
        'div',
        [l.measure, l.lineMeasure, l.selectionDiv, l.cursorDiv, l.lineDiv],
        null,
        'position: relative; outline: none'
      ));
    var a = i('div', [l.lineSpace], 'CodeMirror-lines');
    (l.mover = r('div', [a], null, 'position: relative')),
      (l.sizer = r('div', [l.mover], 'CodeMirror-sizer')),
      (l.sizerWidth = null),
      (l.heightForcer = r(
        'div',
        null,
        null,
        'position: absolute; height: ' + Vl + 'px; width: 1px;'
      )),
      (l.gutters = r('div', null, 'CodeMirror-gutters')),
      (l.lineGutter = null),
      (l.scroller = r(
        'div',
        [l.sizer, l.heightForcer, l.gutters],
        'CodeMirror-scroll'
      )),
      l.scroller.setAttribute('tabIndex', '-1'),
      (l.wrapper = r(
        'div',
        [l.scrollbarFiller, l.gutterFiller, l.scroller],
        'CodeMirror'
      )),
      l.wrapper.setAttribute('translate', 'no'),
      Cl &&
        kl < 8 &&
        ((l.gutters.style.zIndex = -1), (l.scroller.style.paddingRight = 0)),
      Sl || (yl && Hl) || (l.scroller.draggable = !0),
      e && (e.appendChild ? e.appendChild(l.wrapper) : e(l.wrapper)),
      (l.viewFrom = l.viewTo = t.first),
      (l.reportedViewFrom = l.reportedViewTo = t.first),
      (l.view = []),
      (l.renderedView = null),
      (l.externalMeasured = null),
      (l.viewOffset = 0),
      (l.lastWrapHeight = l.lastWrapWidth = 0),
      (l.updateLineNumbers = null),
      (l.nativeBarWidth = l.barHeight = l.barWidth = 0),
      (l.scrollbarsClipped = !1),
      (l.lineNumWidth = l.lineNumInnerWidth = l.lineNumChars = null),
      (l.alignWidgets = !1),
      (l.cachedCharWidth = l.cachedTextHeight = l.cachedPaddingH = null),
      (l.maxLine = null),
      (l.maxLineLength = 0),
      (l.maxLineChanged = !1),
      (l.wheelDX = l.wheelDY = l.wheelStartX = l.wheelStartY = null),
      (l.shift = !1),
      (l.selForContextMenu = null),
      (l.activeTouch = null),
      (l.gutterSpecs = Fr(o.gutters, o.lineNumbers)),
      Wr(l),
      n.init(l);
  }
  function Rr(e) {
    var t = e.wheelDeltaX,
      n = e.wheelDeltaY;
    return (
      null == t && e.detail && e.axis == e.HORIZONTAL_AXIS && (t = e.detail),
      null == n && e.detail && e.axis == e.VERTICAL_AXIS
        ? (n = e.detail)
        : null == n && (n = e.wheelDelta),
      { x: t, y: n }
    );
  }
  function zr(e) {
    var t = Rr(e);
    return (t.x *= Pa), (t.y *= Pa), t;
  }
  function Br(e, t) {
    var n = Rr(t),
      r = n.x,
      i = n.y,
      o = e.display,
      l = o.scroller,
      a = l.scrollWidth > l.clientWidth,
      s = l.scrollHeight > l.clientHeight;
    if ((r && a) || (i && s)) {
      if (i && Fl && Sl)
        e: for (var c = t.target, u = o.view; c != l; c = c.parentNode)
          for (var f = 0; f < u.length; f++)
            if (u[f].node == c) {
              e.display.currentWheelTarget = c;
              break e;
            }
      if (r && !yl && !Ml && null != Pa)
        return (
          i && s && nr(e, Math.max(0, l.scrollTop + i * Pa)),
          ir(e, Math.max(0, l.scrollLeft + r * Pa)),
          (!i || (i && s)) && E(t),
          void (o.wheelStartX = null)
        );
      if (i && null != Pa) {
        var d = i * Pa,
          h = e.doc.scrollTop,
          p = h + o.wrapper.clientHeight;
        d < 0
          ? (h = Math.max(0, h + d - 50))
          : (p = Math.min(e.doc.height, p + d + 50)),
          Or(e, { top: h, bottom: p });
      }
      Aa < 20 &&
        (null == o.wheelStartX
          ? ((o.wheelStartX = l.scrollLeft),
            (o.wheelStartY = l.scrollTop),
            (o.wheelDX = r),
            (o.wheelDY = i),
            setTimeout(function () {
              if (null != o.wheelStartX) {
                var e = l.scrollLeft - o.wheelStartX,
                  t = l.scrollTop - o.wheelStartY,
                  n =
                    (t && o.wheelDY && t / o.wheelDY) ||
                    (e && o.wheelDX && e / o.wheelDX);
                (o.wheelStartX = o.wheelStartY = null),
                  n && ((Pa = (Pa * Aa + n) / (Aa + 1)), ++Aa);
              }
            }, 200))
          : ((o.wheelDX += r), (o.wheelDY += i)));
    }
  }
  function jr(e, t, n) {
    var r = e && e.options.selectionsMayTouch,
      i = t[n];
    t.sort(function (e, t) {
      return se(e.from(), t.from());
    }),
      (n = d(t, i));
    for (var o = 1; o < t.length; o++) {
      var l = t[o],
        a = t[o - 1],
        s = se(a.to(), l.from());
      if (r && !l.empty() ? s > 0 : s >= 0) {
        var c = de(a.from(), l.from()),
          u = fe(a.to(), l.to()),
          f = a.empty() ? l.from() == l.head : a.from() == a.head;
        o <= n && --n, t.splice(--o, 2, new Ha(f ? u : c, f ? c : u));
      }
    }
    return new Da(t, n);
  }
  function qr(e, t) {
    return new Da([new Ha(e, t || e)], 0);
  }
  function Gr(e) {
    return e.text
      ? ae(
          e.from.line + e.text.length - 1,
          g(e.text).length + (1 == e.text.length ? e.from.ch : 0)
        )
      : e.to;
  }
  function Ur(e, t) {
    if (se(e, t.from) < 0) return e;
    if (se(e, t.to) <= 0) return Gr(t);
    var n = e.line + t.text.length - (t.to.line - t.from.line) - 1,
      r = e.ch;
    return e.line == t.to.line && (r += Gr(t).ch - t.to.ch), ae(n, r);
  }
  function Kr(e, t) {
    for (var n = [], r = 0; r < e.sel.ranges.length; r++) {
      var i = e.sel.ranges[r];
      n.push(new Ha(Ur(i.anchor, t), Ur(i.head, t)));
    }
    return jr(e.cm, n, e.sel.primIndex);
  }
  function Vr(e, t, n) {
    return e.line == t.line
      ? ae(n.line, e.ch - t.ch + n.ch)
      : ae(n.line + (e.line - t.line), e.ch);
  }
  function _r(e, t, n) {
    for (var r = [], i = ae(e.first, 0), o = i, l = 0; l < t.length; l++) {
      var a = t[l],
        s = Vr(a.from, i, o),
        c = Vr(Gr(a), i, o);
      if (((i = a.to), (o = c), 'around' == n)) {
        var u = e.sel.ranges[l],
          f = se(u.head, u.anchor) < 0;
        r[l] = new Ha(f ? c : s, f ? s : c);
      } else r[l] = new Ha(s, s);
    }
    return new Da(r, e.sel.primIndex);
  }
  function $r(e) {
    (e.doc.mode = $(e.options, e.doc.modeOption)), Xr(e);
  }
  function Xr(e) {
    e.doc.iter(function (e) {
      e.stateAfter && (e.stateAfter = null), e.styles && (e.styles = null);
    }),
      (e.doc.modeFrontier = e.doc.highlightFrontier = e.doc.first),
      wr(e, 100),
      e.state.modeGen++,
      e.curOp && Mn(e);
  }
  function Yr(e, t) {
    return (
      0 == t.from.ch &&
      0 == t.to.ch &&
      '' == g(t.text) &&
      (!e.cm || e.cm.options.wholeLineUpdateBefore)
    );
  }
  function Zr(e, t, n, r) {
    function i(e) {
      return n ? n[e] : null;
    }
    function o(e, n, i) {
      ot(e, n, i, r), xt(e, 'change', e, t);
    }
    function l(e, t) {
      for (var n = [], o = e; o < t; ++o) n.push(new ya(c[o], i(o), r));
      return n;
    }
    var a = t.from,
      s = t.to,
      c = t.text,
      u = J(e, a.line),
      f = J(e, s.line),
      d = g(c),
      h = i(c.length - 1),
      p = s.line - a.line;
    if (t.full)
      e.insert(0, l(0, c.length)), e.remove(c.length, e.size - c.length);
    else if (Yr(e, t)) {
      var m = l(0, c.length - 1);
      o(f, f.text, h),
        p && e.remove(a.line, p),
        m.length && e.insert(a.line, m);
    } else if (u == f)
      if (1 == c.length)
        o(u, u.text.slice(0, a.ch) + d + u.text.slice(s.ch), h);
      else {
        var v = l(1, c.length - 1);
        v.push(new ya(d + u.text.slice(s.ch), h, r)),
          o(u, u.text.slice(0, a.ch) + c[0], i(0)),
          e.insert(a.line + 1, v);
      }
    else if (1 == c.length)
      o(u, u.text.slice(0, a.ch) + c[0] + f.text.slice(s.ch), i(0)),
        e.remove(a.line + 1, p);
    else {
      o(u, u.text.slice(0, a.ch) + c[0], i(0)), o(f, d + f.text.slice(s.ch), h);
      var y = l(1, c.length - 1);
      p > 1 && e.remove(a.line + 1, p - 1), e.insert(a.line + 1, y);
    }
    xt(e, 'change', e, t);
  }
  function Qr(e, t, n) {
    function r(e, i, o) {
      if (e.linked)
        for (var l = 0; l < e.linked.length; ++l) {
          var a = e.linked[l];
          if (a.doc != i) {
            var s = o && a.sharedHist;
            (n && !s) || (t(a.doc, s), r(a.doc, e, s));
          }
        }
    }
    r(e, null, !0);
  }
  function Jr(e, t) {
    if (t.cm) throw new Error('This document is already in use.');
    (e.doc = t),
      (t.cm = e),
      Sn(e),
      $r(e),
      ei(e),
      (e.options.direction = t.direction),
      e.options.lineWrapping || it(e),
      (e.options.mode = t.modeOption),
      Mn(e);
  }
  function ei(e) {
    ('rtl' == e.doc.direction ? a : jl)(e.display.lineDiv, 'CodeMirror-rtl');
  }
  function ti(e) {
    vr(e, function () {
      ei(e), Mn(e);
    });
  }
  function ni(e) {
    (this.done = []),
      (this.undone = []),
      (this.undoDepth = e ? e.undoDepth : 1 / 0),
      (this.lastModTime = this.lastSelTime = 0),
      (this.lastOp = this.lastSelOp = null),
      (this.lastOrigin = this.lastSelOrigin = null),
      (this.generation = this.maxGeneration = e ? e.maxGeneration : 1);
  }
  function ri(e, t) {
    var n = { from: ue(t.from), to: Gr(t), text: ee(e, t.from, t.to) };
    return (
      ui(e, n, t.from.line, t.to.line + 1),
      Qr(
        e,
        function (e) {
          return ui(e, n, t.from.line, t.to.line + 1);
        },
        !0
      ),
      n
    );
  }
  function ii(e) {
    for (; e.length; ) {
      var t = g(e);
      if (!t.ranges) break;
      e.pop();
    }
  }
  function oi(e, t) {
    return t
      ? (ii(e.done), g(e.done))
      : e.done.length && !g(e.done).ranges
      ? g(e.done)
      : e.done.length > 1 && !e.done[e.done.length - 2].ranges
      ? (e.done.pop(), g(e.done))
      : void 0;
  }
  function li(e, t, n, r) {
    var i = e.history;
    i.undone.length = 0;
    var o,
      l,
      a = +new Date();
    if (
      (i.lastOp == r ||
        (i.lastOrigin == t.origin &&
          t.origin &&
          (('+' == t.origin.charAt(0) &&
            i.lastModTime >
              a - (e.cm ? e.cm.options.historyEventDelay : 500)) ||
            '*' == t.origin.charAt(0)))) &&
      (o = oi(i, i.lastOp == r))
    )
      (l = g(o.changes)),
        0 == se(t.from, t.to) && 0 == se(t.from, l.to)
          ? (l.to = Gr(t))
          : o.changes.push(ri(e, t));
    else {
      var s = g(i.done);
      for (
        (s && s.ranges) || ci(e.sel, i.done),
          o = { changes: [ri(e, t)], generation: i.generation },
          i.done.push(o);
        i.done.length > i.undoDepth;

      )
        i.done.shift(), i.done[0].ranges || i.done.shift();
    }
    i.done.push(n),
      (i.generation = ++i.maxGeneration),
      (i.lastModTime = i.lastSelTime = a),
      (i.lastOp = i.lastSelOp = r),
      (i.lastOrigin = i.lastSelOrigin = t.origin),
      l || P(e, 'historyAdded');
  }
  function ai(e, t, n, r) {
    var i = t.charAt(0);
    return (
      '*' == i ||
      ('+' == i &&
        n.ranges.length == r.ranges.length &&
        n.somethingSelected() == r.somethingSelected() &&
        new Date() - e.history.lastSelTime <=
          (e.cm ? e.cm.options.historyEventDelay : 500))
    );
  }
  function si(e, t, n, r) {
    var i = e.history,
      o = r && r.origin;
    n == i.lastSelOp ||
    (o &&
      i.lastSelOrigin == o &&
      ((i.lastModTime == i.lastSelTime && i.lastOrigin == o) ||
        ai(e, o, g(i.done), t)))
      ? (i.done[i.done.length - 1] = t)
      : ci(t, i.done),
      (i.lastSelTime = +new Date()),
      (i.lastSelOrigin = o),
      (i.lastSelOp = n),
      r && r.clearRedo !== !1 && ii(i.undone);
  }
  function ci(e, t) {
    var n = g(t);
    (n && n.ranges && n.equals(e)) || t.push(e);
  }
  function ui(e, t, n, r) {
    var i = t['spans_' + e.id],
      o = 0;
    e.iter(Math.max(e.first, n), Math.min(e.first + e.size, r), function (n) {
      n.markedSpans &&
        ((i || (i = t['spans_' + e.id] = {}))[o] = n.markedSpans),
        ++o;
    });
  }
  function fi(e) {
    if (!e) return null;
    for (var t, n = 0; n < e.length; ++n)
      e[n].marker.explicitlyCleared
        ? t || (t = e.slice(0, n))
        : t && t.push(e[n]);
    return t ? (t.length ? t : null) : e;
  }
  function di(e, t) {
    var n = t['spans_' + e.id];
    if (!n) return null;
    for (var r = [], i = 0; i < t.text.length; ++i) r.push(fi(n[i]));
    return r;
  }
  function hi(e, t) {
    var n = di(e, t),
      r = Ee(e, t);
    if (!n) return r;
    if (!r) return n;
    for (var i = 0; i < n.length; ++i) {
      var o = n[i],
        l = r[i];
      if (o && l)
        e: for (var a = 0; a < l.length; ++a) {
          for (var s = l[a], c = 0; c < o.length; ++c)
            if (o[c].marker == s.marker) continue e;
          o.push(s);
        }
      else l && (n[i] = l);
    }
    return n;
  }
  function pi(e, t, n) {
    for (var r = [], i = 0; i < e.length; ++i) {
      var o = e[i];
      if (o.ranges) r.push(n ? Da.prototype.deepCopy.call(o) : o);
      else {
        var l = o.changes,
          a = [];
        r.push({ changes: a });
        for (var s = 0; s < l.length; ++s) {
          var c = l[s],
            u = void 0;
          if ((a.push({ from: c.from, to: c.to, text: c.text }), t))
            for (var f in c)
              (u = f.match(/^spans_(\d+)$/)) &&
                d(t, Number(u[1])) > -1 &&
                ((g(a)[f] = c[f]), delete c[f]);
        }
      }
    }
    return r;
  }
  function gi(e, t, n, r) {
    if (r) {
      var i = e.anchor;
      if (n) {
        var o = se(t, i) < 0;
        o != se(n, i) < 0 ? ((i = t), (t = n)) : o != se(t, n) < 0 && (t = n);
      }
      return new Ha(i, t);
    }
    return new Ha(n || t, t);
  }
  function mi(e, t, n, r, i) {
    null == i && (i = e.cm && (e.cm.display.shift || e.extend)),
      Ci(e, new Da([gi(e.sel.primary(), t, n, i)], 0), r);
  }
  function vi(e, t, n) {
    for (
      var r = [], i = e.cm && (e.cm.display.shift || e.extend), o = 0;
      o < e.sel.ranges.length;
      o++
    )
      r[o] = gi(e.sel.ranges[o], t[o], null, i);
    var l = jr(e.cm, r, e.sel.primIndex);
    Ci(e, l, n);
  }
  function yi(e, t, n, r) {
    var i = e.sel.ranges.slice(0);
    (i[t] = n), Ci(e, jr(e.cm, i, e.sel.primIndex), r);
  }
  function bi(e, t, n, r) {
    Ci(e, qr(t, n), r);
  }
  function xi(e, t, n) {
    var r = {
      ranges: t.ranges,
      update: function (t) {
        this.ranges = [];
        for (var n = 0; n < t.length; n++)
          this.ranges[n] = new Ha(pe(e, t[n].anchor), pe(e, t[n].head));
      },
      origin: n && n.origin,
    };
    return (
      P(e, 'beforeSelectionChange', e, r),
      e.cm && P(e.cm, 'beforeSelectionChange', e.cm, r),
      r.ranges != t.ranges ? jr(e.cm, r.ranges, r.ranges.length - 1) : t
    );
  }
  function wi(e, t, n) {
    var r = e.history.done,
      i = g(r);
    i && i.ranges ? ((r[r.length - 1] = t), ki(e, t, n)) : Ci(e, t, n);
  }
  function Ci(e, t, n) {
    ki(e, t, n), si(e, e.sel, e.cm ? e.cm.curOp.id : NaN, n);
  }
  function ki(e, t, n) {
    (F(e, 'beforeSelectionChange') ||
      (e.cm && F(e.cm, 'beforeSelectionChange'))) &&
      (t = xi(e, t, n));
    var r =
      (n && n.bias) ||
      (se(t.primary().head, e.sel.primary().head) < 0 ? -1 : 1);
    Si(e, Ti(e, t, r, !0)),
      (n && n.scroll === !1) ||
        !e.cm ||
        'nocursor' == e.cm.getOption('readOnly') ||
        Zn(e.cm);
  }
  function Si(e, t) {
    t.equals(e.sel) ||
      ((e.sel = t),
      e.cm &&
        ((e.cm.curOp.updateInput = 1),
        (e.cm.curOp.selectionChanged = !0),
        H(e.cm)),
      xt(e, 'cursorActivity', e));
  }
  function Li(e) {
    Si(e, Ti(e, e.sel, null, !1));
  }
  function Ti(e, t, n, r) {
    for (var i, o = 0; o < t.ranges.length; o++) {
      var l = t.ranges[o],
        a = t.ranges.length == e.sel.ranges.length && e.sel.ranges[o],
        s = Oi(e, l.anchor, a && a.anchor, n, r),
        c = Oi(e, l.head, a && a.head, n, r);
      (i || s != l.anchor || c != l.head) &&
        (i || (i = t.ranges.slice(0, o)), (i[o] = new Ha(s, c)));
    }
    return i ? jr(e.cm, i, t.primIndex) : t;
  }
  function Mi(e, t, n, r, i) {
    var o = J(e, t.line);
    if (o.markedSpans)
      for (var l = 0; l < o.markedSpans.length; ++l) {
        var a = o.markedSpans[l],
          s = a.marker,
          c = 'selectLeft' in s ? !s.selectLeft : s.inclusiveLeft,
          u = 'selectRight' in s ? !s.selectRight : s.inclusiveRight;
        if (
          (null == a.from || (c ? a.from <= t.ch : a.from < t.ch)) &&
          (null == a.to || (u ? a.to >= t.ch : a.to > t.ch))
        ) {
          if (i && (P(s, 'beforeCursorEnter'), s.explicitlyCleared)) {
            if (o.markedSpans) {
              --l;
              continue;
            }
            break;
          }
          if (!s.atomic) continue;
          if (n) {
            var f = s.find(r < 0 ? 1 : -1),
              d = void 0;
            if (
              ((r < 0 ? u : c) &&
                (f = Ni(e, f, -r, f && f.line == t.line ? o : null)),
              f &&
                f.line == t.line &&
                (d = se(f, n)) &&
                (r < 0 ? d < 0 : d > 0))
            )
              return Mi(e, f, t, r, i);
          }
          var h = s.find(r < 0 ? -1 : 1);
          return (
            (r < 0 ? c : u) && (h = Ni(e, h, r, h.line == t.line ? o : null)),
            h ? Mi(e, h, t, r, i) : null
          );
        }
      }
    return t;
  }
  function Oi(e, t, n, r, i) {
    var o = r || 1,
      l =
        Mi(e, t, n, o, i) ||
        (!i && Mi(e, t, n, o, !0)) ||
        Mi(e, t, n, -o, i) ||
        (!i && Mi(e, t, n, -o, !0));
    return l ? l : ((e.cantEdit = !0), ae(e.first, 0));
  }
  function Ni(e, t, n, r) {
    return n < 0 && 0 == t.ch
      ? t.line > e.first
        ? pe(e, ae(t.line - 1))
        : null
      : n > 0 && t.ch == (r || J(e, t.line)).text.length
      ? t.line < e.first + e.size - 1
        ? ae(t.line + 1, 0)
        : null
      : new ae(t.line, t.ch + n);
  }
  function Ai(e) {
    e.setSelection(ae(e.firstLine(), 0), ae(e.lastLine()), $l);
  }
  function Pi(e, t, n) {
    var r = {
      canceled: !1,
      from: t.from,
      to: t.to,
      text: t.text,
      origin: t.origin,
      cancel: function () {
        return (r.canceled = !0);
      },
    };
    return (
      n &&
        (r.update = function (t, n, i, o) {
          t && (r.from = pe(e, t)),
            n && (r.to = pe(e, n)),
            i && (r.text = i),
            void 0 !== o && (r.origin = o);
        }),
      P(e, 'beforeChange', e, r),
      e.cm && P(e.cm, 'beforeChange', e.cm, r),
      r.canceled
        ? (e.cm && (e.cm.curOp.updateInput = 2), null)
        : { from: r.from, to: r.to, text: r.text, origin: r.origin }
    );
  }
  function Di(e, t, n) {
    if (e.cm) {
      if (!e.cm.curOp) return yr(e.cm, Di)(e, t, n);
      if (e.cm.state.suppressEdits) return;
    }
    if (
      !(F(e, 'beforeChange') || (e.cm && F(e.cm, 'beforeChange'))) ||
      (t = Pi(e, t, !0))
    ) {
      var r = ma && !n && Re(e, t.from, t.to);
      if (r)
        for (var i = r.length - 1; i >= 0; --i)
          Hi(e, {
            from: r[i].from,
            to: r[i].to,
            text: i ? [''] : t.text,
            origin: t.origin,
          });
      else Hi(e, t);
    }
  }
  function Hi(e, t) {
    if (1 != t.text.length || '' != t.text[0] || 0 != se(t.from, t.to)) {
      var n = Kr(e, t);
      li(e, t, n, e.cm ? e.cm.curOp.id : NaN), Ei(e, t, n, Ee(e, t));
      var r = [];
      Qr(e, function (e, n) {
        n || d(r, e.history) != -1 || (ji(e.history, t), r.push(e.history)),
          Ei(e, t, null, Ee(e, t));
      });
    }
  }
  function Fi(e, t, n) {
    var r = e.cm && e.cm.state.suppressEdits;
    if (!r || n) {
      for (
        var i,
          o = e.history,
          l = e.sel,
          a = 'undo' == t ? o.done : o.undone,
          s = 'undo' == t ? o.undone : o.done,
          c = 0;
        c < a.length &&
        ((i = a[c]), n ? !i.ranges || i.equals(e.sel) : i.ranges);
        c++
      );
      if (c != a.length) {
        for (o.lastOrigin = o.lastSelOrigin = null; ; ) {
          if (((i = a.pop()), !i.ranges)) {
            if (r) return void a.push(i);
            break;
          }
          if ((ci(i, s), n && !i.equals(e.sel)))
            return void Ci(e, i, { clearRedo: !1 });
          l = i;
        }
        var u = [];
        ci(l, s),
          s.push({ changes: u, generation: o.generation }),
          (o.generation = i.generation || ++o.maxGeneration);
        for (
          var f = F(e, 'beforeChange') || (e.cm && F(e.cm, 'beforeChange')),
            h = function (n) {
              var r = i.changes[n];
              if (((r.origin = t), f && !Pi(e, r, !1)))
                return (a.length = 0), {};
              u.push(ri(e, r));
              var o = n ? Kr(e, r) : g(a);
              Ei(e, r, o, hi(e, r)),
                !n && e.cm && e.cm.scrollIntoView({ from: r.from, to: Gr(r) });
              var l = [];
              Qr(e, function (e, t) {
                t ||
                  d(l, e.history) != -1 ||
                  (ji(e.history, r), l.push(e.history)),
                  Ei(e, r, null, hi(e, r));
              });
            },
            p = i.changes.length - 1;
          p >= 0;
          --p
        ) {
          var m = h(p);
          if (m) return m.v;
        }
      }
    }
  }
  function Wi(e, t) {
    if (
      0 != t &&
      ((e.first += t),
      (e.sel = new Da(
        m(e.sel.ranges, function (e) {
          return new Ha(
            ae(e.anchor.line + t, e.anchor.ch),
            ae(e.head.line + t, e.head.ch)
          );
        }),
        e.sel.primIndex
      )),
      e.cm)
    ) {
      Mn(e.cm, e.first, e.first - t, t);
      for (var n = e.cm.display, r = n.viewFrom; r < n.viewTo; r++)
        On(e.cm, r, 'gutter');
    }
  }
  function Ei(e, t, n, r) {
    if (e.cm && !e.cm.curOp) return yr(e.cm, Ei)(e, t, n, r);
    if (t.to.line < e.first)
      return void Wi(e, t.text.length - 1 - (t.to.line - t.from.line));
    if (!(t.from.line > e.lastLine())) {
      if (t.from.line < e.first) {
        var i = t.text.length - 1 - (e.first - t.from.line);
        Wi(e, i),
          (t = {
            from: ae(e.first, 0),
            to: ae(t.to.line + i, t.to.ch),
            text: [g(t.text)],
            origin: t.origin,
          });
      }
      var o = e.lastLine();
      t.to.line > o &&
        (t = {
          from: t.from,
          to: ae(o, J(e, o).text.length),
          text: [t.text[0]],
          origin: t.origin,
        }),
        (t.removed = ee(e, t.from, t.to)),
        n || (n = Kr(e, t)),
        e.cm ? Ii(e.cm, t, r) : Zr(e, t, r),
        ki(e, n, $l),
        e.cantEdit && Oi(e, ae(e.firstLine(), 0)) && (e.cantEdit = !1);
    }
  }
  function Ii(e, t, n) {
    var r = e.doc,
      i = e.display,
      o = t.from,
      l = t.to,
      a = !1,
      s = o.line;
    e.options.lineWrapping ||
      ((s = re(Xe(J(r, o.line)))),
      r.iter(s, l.line + 1, function (e) {
        if (e == i.maxLine) return (a = !0), !0;
      })),
      r.sel.contains(t.from, t.to) > -1 && H(e),
      Zr(r, t, n, kn(e)),
      e.options.lineWrapping ||
        (r.iter(s, o.line + t.text.length, function (e) {
          var t = rt(e);
          t > i.maxLineLength &&
            ((i.maxLine = e),
            (i.maxLineLength = t),
            (i.maxLineChanged = !0),
            (a = !1));
        }),
        a && (e.curOp.updateMaxLine = !0)),
      Me(r, o.line),
      wr(e, 400);
    var c = t.text.length - (l.line - o.line) - 1;
    t.full
      ? Mn(e)
      : o.line != l.line || 1 != t.text.length || Yr(e.doc, t)
      ? Mn(e, o.line, l.line + 1, c)
      : On(e, o.line, 'text');
    var u = F(e, 'changes'),
      f = F(e, 'change');
    if (f || u) {
      var d = {
        from: o,
        to: l,
        text: t.text,
        removed: t.removed,
        origin: t.origin,
      };
      f && xt(e, 'change', e, d),
        u && (e.curOp.changeObjs || (e.curOp.changeObjs = [])).push(d);
    }
    e.display.selForContextMenu = null;
  }
  function Ri(e, t, n, r, i) {
    var o;
    r || (r = n),
      se(r, n) < 0 && ((o = [r, n]), (n = o[0]), (r = o[1])),
      'string' == typeof t && (t = e.splitLines(t)),
      Di(e, { from: n, to: r, text: t, origin: i });
  }
  function zi(e, t, n, r) {
    n < e.line ? (e.line += r) : t < e.line && ((e.line = t), (e.ch = 0));
  }
  function Bi(e, t, n, r) {
    for (var i = 0; i < e.length; ++i) {
      var o = e[i],
        l = !0;
      if (o.ranges) {
        o.copied || ((o = e[i] = o.deepCopy()), (o.copied = !0));
        for (var a = 0; a < o.ranges.length; a++)
          zi(o.ranges[a].anchor, t, n, r), zi(o.ranges[a].head, t, n, r);
      } else {
        for (var s = 0; s < o.changes.length; ++s) {
          var c = o.changes[s];
          if (n < c.from.line)
            (c.from = ae(c.from.line + r, c.from.ch)),
              (c.to = ae(c.to.line + r, c.to.ch));
          else if (t <= c.to.line) {
            l = !1;
            break;
          }
        }
        l || (e.splice(0, i + 1), (i = 0));
      }
    }
  }
  function ji(e, t) {
    var n = t.from.line,
      r = t.to.line,
      i = t.text.length - (r - n) - 1;
    Bi(e.done, n, r, i), Bi(e.undone, n, r, i);
  }
  function qi(e, t, n, r) {
    var i = t,
      o = t;
    return (
      'number' == typeof t ? (o = J(e, he(e, t))) : (i = re(t)),
      null == i ? null : (r(o, i) && e.cm && On(e.cm, i, n), o)
    );
  }
  function Gi(e) {
    (this.lines = e), (this.parent = null);
    for (var t = 0, n = 0; n < e.length; ++n)
      (e[n].parent = this), (t += e[n].height);
    this.height = t;
  }
  function Ui(e) {
    this.children = e;
    for (var t = 0, n = 0, r = 0; r < e.length; ++r) {
      var i = e[r];
      (t += i.chunkSize()), (n += i.height), (i.parent = this);
    }
    (this.size = t), (this.height = n), (this.parent = null);
  }
  function Ki(e, t, n) {
    nt(t) < ((e.curOp && e.curOp.scrollTop) || e.doc.scrollTop) && Yn(e, n);
  }
  function Vi(e, t, n, r) {
    var i = new Fa(e, n, r),
      o = e.cm;
    return (
      o && i.noHScroll && (o.display.alignWidgets = !0),
      qi(e, t, 'widget', function (t) {
        var n = t.widgets || (t.widgets = []);
        if (
          (null == i.insertAt
            ? n.push(i)
            : n.splice(Math.min(n.length, Math.max(0, i.insertAt)), 0, i),
          (i.line = t),
          o && !et(e, t))
        ) {
          var r = nt(t) < e.scrollTop;
          ne(t, t.height + Ft(i)),
            r && Yn(o, i.height),
            (o.curOp.forceUpdate = !0);
        }
        return !0;
      }),
      o && xt(o, 'lineWidgetAdded', o, i, 'number' == typeof t ? t : re(t)),
      i
    );
  }
  function _i(e, t, n, r, o) {
    if (r && r.shared) return $i(e, t, n, r, o);
    if (e.cm && !e.cm.curOp) return yr(e.cm, _i)(e, t, n, r, o);
    var l = new Ea(e, o),
      a = se(t, n);
    if ((r && u(r, l, !1), a > 0 || (0 == a && l.clearWhenEmpty !== !1)))
      return l;
    if (
      (l.replacedWith &&
        ((l.collapsed = !0),
        (l.widgetNode = i('span', [l.replacedWith], 'CodeMirror-widget')),
        r.handleMouseEvents ||
          l.widgetNode.setAttribute('cm-ignore-events', 'true'),
        r.insertLeft && (l.widgetNode.insertLeft = !0)),
      l.collapsed)
    ) {
      if (
        $e(e, t.line, t, n, l) ||
        (t.line != n.line && $e(e, n.line, t, n, l))
      )
        throw new Error(
          'Inserting collapsed marker partially overlapping an existing one'
        );
      Ne();
    }
    l.addToHistory && li(e, { from: t, to: n, origin: 'markText' }, e.sel, NaN);
    var s,
      c = t.line,
      f = e.cm;
    if (
      (e.iter(c, n.line + 1, function (r) {
        f &&
          l.collapsed &&
          !f.options.lineWrapping &&
          Xe(r) == f.display.maxLine &&
          (s = !0),
          l.collapsed && c != t.line && ne(r, 0),
          He(
            r,
            new Ae(l, c == t.line ? t.ch : null, c == n.line ? n.ch : null),
            e.cm && e.cm.curOp
          ),
          ++c;
      }),
      l.collapsed &&
        e.iter(t.line, n.line + 1, function (t) {
          et(e, t) && ne(t, 0);
        }),
      l.clearOnEnter &&
        ra(l, 'beforeCursorEnter', function () {
          return l.clear();
        }),
      l.readOnly &&
        (Oe(),
        (e.history.done.length || e.history.undone.length) && e.clearHistory()),
      l.collapsed && ((l.id = ++Wa), (l.atomic = !0)),
      f)
    ) {
      if ((s && (f.curOp.updateMaxLine = !0), l.collapsed))
        Mn(f, t.line, n.line + 1);
      else if (
        l.className ||
        l.startStyle ||
        l.endStyle ||
        l.css ||
        l.attributes ||
        l.title
      )
        for (var d = t.line; d <= n.line; d++) On(f, d, 'text');
      l.atomic && Li(f.doc), xt(f, 'markerAdded', f, l);
    }
    return l;
  }
  function $i(e, t, n, r, i) {
    (r = u(r)), (r.shared = !1);
    var o = [_i(e, t, n, r, i)],
      l = o[0],
      a = r.widgetNode;
    return (
      Qr(e, function (e) {
        a && (r.widgetNode = a.cloneNode(!0)),
          o.push(_i(e, pe(e, t), pe(e, n), r, i));
        for (var s = 0; s < e.linked.length; ++s)
          if (e.linked[s].isParent) return;
        l = g(o);
      }),
      new Ia(o, l)
    );
  }
  function Xi(e) {
    return e.findMarks(
      ae(e.first, 0),
      e.clipPos(ae(e.lastLine())),
      function (e) {
        return e.parent;
      }
    );
  }
  function Yi(e, t) {
    for (var n = 0; n < t.length; n++) {
      var r = t[n],
        i = r.find(),
        o = e.clipPos(i.from),
        l = e.clipPos(i.to);
      if (se(o, l)) {
        var a = _i(e, o, l, r.primary, r.primary.type);
        r.markers.push(a), (a.parent = r);
      }
    }
  }
  function Zi(e) {
    for (
      var t = function (t) {
          var n = e[t],
            r = [n.primary.doc];
          Qr(n.primary.doc, function (e) {
            return r.push(e);
          });
          for (var i = 0; i < n.markers.length; i++) {
            var o = n.markers[i];
            d(r, o.doc) == -1 && ((o.parent = null), n.markers.splice(i--, 1));
          }
        },
        n = 0;
      n < e.length;
      n++
    )
      t(n);
  }
  function Qi(e) {
    var t = this;
    if ((to(t), !D(t, e) && !Wt(t.display, e))) {
      E(e), Cl && (Ba = +new Date());
      var n = Ln(t, e, !0),
        r = e.dataTransfer.files;
      if (n && !t.isReadOnly())
        if (r && r.length && window.FileReader && window.File)
          for (
            var i = r.length,
              o = Array(i),
              l = 0,
              a = function () {
                ++l == i &&
                  yr(t, function () {
                    n = pe(t.doc, n);
                    var e = {
                      from: n,
                      to: n,
                      text: t.doc.splitLines(
                        o
                          .filter(function (e) {
                            return null != e;
                          })
                          .join(t.doc.lineSeparator())
                      ),
                      origin: 'paste',
                    };
                    Di(t.doc, e), wi(t.doc, qr(pe(t.doc, n), pe(t.doc, Gr(e))));
                  })();
              },
              s = function (e, n) {
                if (
                  t.options.allowDropFileTypes &&
                  d(t.options.allowDropFileTypes, e.type) == -1
                )
                  return void a();
                var r = new FileReader();
                (r.onerror = function () {
                  return a();
                }),
                  (r.onload = function () {
                    var e = r.result;
                    return /[\x00-\x08\x0e-\x1f]{2}/.test(e)
                      ? void a()
                      : ((o[n] = e), void a());
                  }),
                  r.readAsText(e);
              },
              c = 0;
            c < r.length;
            c++
          )
            s(r[c], c);
        else {
          if (t.state.draggingText && t.doc.sel.contains(n) > -1)
            return (
              t.state.draggingText(e),
              void setTimeout(function () {
                return t.display.input.focus();
              }, 20)
            );
          try {
            var u = e.dataTransfer.getData('Text');
            if (u) {
              var f;
              if (
                (t.state.draggingText &&
                  !t.state.draggingText.copy &&
                  (f = t.listSelections()),
                ki(t.doc, qr(n, n)),
                f)
              )
                for (var h = 0; h < f.length; ++h)
                  Ri(t.doc, '', f[h].anchor, f[h].head, 'drag');
              t.replaceSelection(u, 'around', 'paste'), t.display.input.focus();
            }
          } catch (p) {}
        }
    }
  }
  function Ji(e, t) {
    if (Cl && (!e.state.draggingText || +new Date() - Ba < 100))
      return void z(t);
    if (
      !D(e, t) &&
      !Wt(e.display, t) &&
      (t.dataTransfer.setData('Text', e.getSelection()),
      (t.dataTransfer.effectAllowed = 'copyMove'),
      t.dataTransfer.setDragImage && !Ol)
    ) {
      var n = r('img', null, null, 'position: fixed; left: 0; top: 0;');
      (n.src =
        'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=='),
        Ml &&
          ((n.width = n.height = 1),
          e.display.wrapper.appendChild(n),
          (n._top = n.offsetTop)),
        t.dataTransfer.setDragImage(n, 0, 0),
        Ml && n.parentNode.removeChild(n);
    }
  }
  function eo(e, t) {
    var i = Ln(e, t);
    if (i) {
      var o = document.createDocumentFragment();
      Wn(e, i, o),
        e.display.dragCursor ||
          ((e.display.dragCursor = r(
            'div',
            null,
            'CodeMirror-cursors CodeMirror-dragcursors'
          )),
          e.display.lineSpace.insertBefore(
            e.display.dragCursor,
            e.display.cursorDiv
          )),
        n(e.display.dragCursor, o);
    }
  }
  function to(e) {
    e.display.dragCursor &&
      (e.display.lineSpace.removeChild(e.display.dragCursor),
      (e.display.dragCursor = null));
  }
  function no(e) {
    if (document.getElementsByClassName) {
      for (
        var t = document.getElementsByClassName('CodeMirror'), n = [], r = 0;
        r < t.length;
        r++
      ) {
        var i = t[r].CodeMirror;
        i && n.push(i);
      }
      n.length &&
        n[0].operation(function () {
          for (var t = 0; t < n.length; t++) e(n[t]);
        });
    }
  }
  function ro() {
    ja || (io(), (ja = !0));
  }
  function io() {
    var e;
    ra(window, 'resize', function () {
      null == e &&
        (e = setTimeout(function () {
          (e = null), no(oo);
        }, 100));
    }),
      ra(window, 'blur', function () {
        return no(qn);
      });
  }
  function oo(e) {
    var t = e.display;
    (t.cachedCharWidth = t.cachedTextHeight = t.cachedPaddingH = null),
      (t.scrollbarsClipped = !1),
      e.setSize();
  }
  function lo(e) {
    var t = e.split(/-(?!$)/);
    e = t[t.length - 1];
    for (var n, r, i, o, l = 0; l < t.length - 1; l++) {
      var a = t[l];
      if (/^(cmd|meta|m)$/i.test(a)) o = !0;
      else if (/^a(lt)?$/i.test(a)) n = !0;
      else if (/^(c|ctrl|control)$/i.test(a)) r = !0;
      else {
        if (!/^s(hift)?$/i.test(a))
          throw new Error('Unrecognized modifier name: ' + a);
        i = !0;
      }
    }
    return (
      n && (e = 'Alt-' + e),
      r && (e = 'Ctrl-' + e),
      o && (e = 'Cmd-' + e),
      i && (e = 'Shift-' + e),
      e
    );
  }
  function ao(e) {
    var t = {};
    for (var n in e)
      if (e.hasOwnProperty(n)) {
        var r = e[n];
        if (/^(name|fallthrough|(de|at)tach)$/.test(n)) continue;
        if ('...' == r) {
          delete e[n];
          continue;
        }
        for (var i = m(n.split(' '), lo), o = 0; o < i.length; o++) {
          var l = void 0,
            a = void 0;
          o == i.length - 1
            ? ((a = i.join(' ')), (l = r))
            : ((a = i.slice(0, o + 1).join(' ')), (l = '...'));
          var s = t[a];
          if (s) {
            if (s != l) throw new Error('Inconsistent bindings for ' + a);
          } else t[a] = l;
        }
        delete e[n];
      }
    for (var c in t) e[c] = t[c];
    return e;
  }
  function so(e, t, n, r) {
    t = ho(t);
    var i = t.call ? t.call(e, r) : t[e];
    if (i === !1) return 'nothing';
    if ('...' === i) return 'multi';
    if (null != i && n(i)) return 'handled';
    if (t.fallthrough) {
      if ('[object Array]' != Object.prototype.toString.call(t.fallthrough))
        return so(e, t.fallthrough, n, r);
      for (var o = 0; o < t.fallthrough.length; o++) {
        var l = so(e, t.fallthrough[o], n, r);
        if (l) return l;
      }
    }
  }
  function co(e) {
    var t = 'string' == typeof e ? e : qa[e.keyCode];
    return 'Ctrl' == t || 'Alt' == t || 'Shift' == t || 'Mod' == t;
  }
  function uo(e, t, n) {
    var r = e;
    return (
      t.altKey && 'Alt' != r && (e = 'Alt-' + e),
      (zl ? t.metaKey : t.ctrlKey) && 'Ctrl' != r && (e = 'Ctrl-' + e),
      (zl ? t.ctrlKey : t.metaKey) && 'Mod' != r && (e = 'Cmd-' + e),
      !n && t.shiftKey && 'Shift' != r && (e = 'Shift-' + e),
      e
    );
  }
  function fo(e, t) {
    if (Ml && 34 == e.keyCode && e['char']) return !1;
    var n = qa[e.keyCode];
    return (
      null != n &&
      !e.altGraphKey &&
      (3 == e.keyCode && e.code && (n = e.code), uo(n, e, t))
    );
  }
  function ho(e) {
    return 'string' == typeof e ? Va[e] : e;
  }
  function po(e, t) {
    for (var n = e.doc.sel.ranges, r = [], i = 0; i < n.length; i++) {
      for (var o = t(n[i]); r.length && se(o.from, g(r).to) <= 0; ) {
        var l = r.pop();
        if (se(l.from, o.from) < 0) {
          o.from = l.from;
          break;
        }
      }
      r.push(o);
    }
    vr(e, function () {
      for (var t = r.length - 1; t >= 0; t--)
        Ri(e.doc, '', r[t].from, r[t].to, '+delete');
      Zn(e);
    });
  }
  function go(e, t, n) {
    var r = S(e.text, t + n, n);
    return r < 0 || r > e.text.length ? null : r;
  }
  function mo(e, t, n) {
    var r = go(e, t.ch, n);
    return null == r ? null : new ae(t.line, r, n < 0 ? 'after' : 'before');
  }
  function vo(e, t, n, r, i) {
    if (e) {
      'rtl' == t.doc.direction && (i = -i);
      var o = O(n, t.doc.direction);
      if (o) {
        var l,
          a = i < 0 ? g(o) : o[0],
          s = i < 0 == (1 == a.level),
          c = s ? 'after' : 'before';
        if (a.level > 0 || 'rtl' == t.doc.direction) {
          var u = _t(t, n);
          l = i < 0 ? n.text.length - 1 : 0;
          var f = $t(t, u, l).top;
          (l = L(
            function (e) {
              return $t(t, u, e).top == f;
            },
            i < 0 == (1 == a.level) ? a.from : a.to - 1,
            l
          )),
            'before' == c && (l = go(n, l, 1));
        } else l = i < 0 ? a.to : a.from;
        return new ae(r, l, c);
      }
    }
    return new ae(r, i < 0 ? n.text.length : 0, i < 0 ? 'before' : 'after');
  }
  function yo(e, t, n, r) {
    var i = O(t, e.doc.direction);
    if (!i) return mo(t, n, r);
    n.ch >= t.text.length
      ? ((n.ch = t.text.length), (n.sticky = 'before'))
      : n.ch <= 0 && ((n.ch = 0), (n.sticky = 'after'));
    var o = M(i, n.ch, n.sticky),
      l = i[o];
    if (
      'ltr' == e.doc.direction &&
      l.level % 2 == 0 &&
      (r > 0 ? l.to > n.ch : l.from < n.ch)
    )
      return mo(t, n, r);
    var a,
      s = function (e, n) {
        return go(t, e instanceof ae ? e.ch : e, n);
      },
      c = function (n) {
        return e.options.lineWrapping
          ? ((a = a || _t(e, t)), pn(e, t, a, n))
          : { begin: 0, end: t.text.length };
      },
      u = c('before' == n.sticky ? s(n, -1) : n.ch);
    if ('rtl' == e.doc.direction || 1 == l.level) {
      var f = (1 == l.level) == r < 0,
        d = s(n, f ? 1 : -1);
      if (
        null != d &&
        (f ? d <= l.to && d <= u.end : d >= l.from && d >= u.begin)
      ) {
        var h = f ? 'before' : 'after';
        return new ae(n.line, d, h);
      }
    }
    var p = function (e, t, r) {
        for (
          var o = function (e, t) {
            return t
              ? new ae(n.line, s(e, 1), 'before')
              : new ae(n.line, e, 'after');
          };
          e >= 0 && e < i.length;
          e += t
        ) {
          var l = i[e],
            a = t > 0 == (1 != l.level),
            c = a ? r.begin : s(r.end, -1);
          if (l.from <= c && c < l.to) return o(c, a);
          if (((c = a ? l.from : s(l.to, -1)), r.begin <= c && c < r.end))
            return o(c, a);
        }
      },
      g = p(o + r, r, u);
    if (g) return g;
    var m = r > 0 ? u.end : s(u.begin, -1);
    return null == m ||
      (r > 0 && m == t.text.length) ||
      !(g = p(r > 0 ? 0 : i.length - 1, r, c(m)))
      ? null
      : g;
  }
  function bo(e, t) {
    var n = J(e.doc, t),
      r = Xe(n);
    return r != n && (t = re(r)), vo(!0, e, r, t, 1);
  }
  function xo(e, t) {
    var n = J(e.doc, t),
      r = Ye(n);
    return r != n && (t = re(r)), vo(!0, e, n, t, -1);
  }
  function wo(e, t) {
    var n = bo(e, t.line),
      r = J(e.doc, n.line),
      i = O(r, e.doc.direction);
    if (!i || 0 == i[0].level) {
      var o = Math.max(n.ch, r.text.search(/\S/)),
        l = t.line == n.line && t.ch <= o && t.ch;
      return ae(n.line, l ? 0 : o, n.sticky);
    }
    return n;
  }
  function Co(e, t, n) {
    if ('string' == typeof t && ((t = _a[t]), !t)) return !1;
    e.display.input.ensurePolled();
    var r = e.display.shift,
      i = !1;
    try {
      e.isReadOnly() && (e.state.suppressEdits = !0),
        n && (e.display.shift = !1),
        (i = t(e) != _l);
    } finally {
      (e.display.shift = r), (e.state.suppressEdits = !1);
    }
    return i;
  }
  function ko(e, t, n) {
    for (var r = 0; r < e.state.keyMaps.length; r++) {
      var i = so(t, e.state.keyMaps[r], n, e);
      if (i) return i;
    }
    return (
      (e.options.extraKeys && so(t, e.options.extraKeys, n, e)) ||
      so(t, e.options.keyMap, n, e)
    );
  }
  function So(e, t, n, r) {
    var i = e.state.keySeq;
    if (i) {
      if (co(t)) return 'handled';
      if (
        (/\'$/.test(t)
          ? (e.state.keySeq = null)
          : $a.set(50, function () {
              e.state.keySeq == i &&
                ((e.state.keySeq = null), e.display.input.reset());
            }),
        Lo(e, i + ' ' + t, n, r))
      )
        return !0;
    }
    return Lo(e, t, n, r);
  }
  function Lo(e, t, n, r) {
    var i = ko(e, t, r);
    return (
      'multi' == i && (e.state.keySeq = t),
      'handled' == i && xt(e, 'keyHandled', e, t, n),
      ('handled' != i && 'multi' != i) || (E(n), Rn(e)),
      !!i
    );
  }
  function To(e, t) {
    var n = fo(t, !0);
    return (
      !!n &&
      (t.shiftKey && !e.state.keySeq
        ? So(e, 'Shift-' + n, t, function (t) {
            return Co(e, t, !0);
          }) ||
          So(e, n, t, function (t) {
            if ('string' == typeof t ? /^go[A-Z]/.test(t) : t.motion)
              return Co(e, t);
          })
        : So(e, n, t, function (t) {
            return Co(e, t);
          }))
    );
  }
  function Mo(e, t, n) {
    return So(e, "'" + n + "'", t, function (t) {
      return Co(e, t, !0);
    });
  }
  function Oo(e) {
    var t = this;
    if (
      !(
        (e.target && e.target != t.display.input.getField()) ||
        ((t.curOp.focus = l()), D(t, e))
      )
    ) {
      Cl && kl < 11 && 27 == e.keyCode && (e.returnValue = !1);
      var n = e.keyCode;
      t.display.shift = 16 == n || e.shiftKey;
      var r = To(t, e);
      Ml &&
        ((Xa = r ? n : null),
        !r &&
          88 == n &&
          !aa &&
          (Fl ? e.metaKey : e.ctrlKey) &&
          t.replaceSelection('', null, 'cut')),
        yl &&
          !Fl &&
          !r &&
          46 == n &&
          e.shiftKey &&
          !e.ctrlKey &&
          document.execCommand &&
          document.execCommand('cut'),
        18 != n ||
          /\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className) ||
          No(t);
    }
  }
  function No(e) {
    function t(e) {
      (18 != e.keyCode && e.altKey) ||
        (jl(n, 'CodeMirror-crosshair'),
        A(document, 'keyup', t),
        A(document, 'mouseover', t));
    }
    var n = e.display.lineDiv;
    a(n, 'CodeMirror-crosshair'),
      ra(document, 'keyup', t),
      ra(document, 'mouseover', t);
  }
  function Ao(e) {
    16 == e.keyCode && (this.doc.sel.shift = !1), D(this, e);
  }
  function Po(e) {
    var t = this;
    if (
      !(
        (e.target && e.target != t.display.input.getField()) ||
        Wt(t.display, e) ||
        D(t, e) ||
        (e.ctrlKey && !e.altKey) ||
        (Fl && e.metaKey)
      )
    ) {
      var n = e.keyCode,
        r = e.charCode;
      if (Ml && n == Xa) return (Xa = null), void E(e);
      if (!Ml || (e.which && !(e.which < 10)) || !To(t, e)) {
        var i = String.fromCharCode(null == r ? n : r);
        '\b' != i && (Mo(t, e, i) || t.display.input.onKeyPress(e));
      }
    }
  }
  function Do(e, t) {
    var n = +new Date();
    return Ja && Ja.compare(n, e, t)
      ? ((Qa = Ja = null), 'triple')
      : Qa && Qa.compare(n, e, t)
      ? ((Ja = new Za(n, e, t)), (Qa = null), 'double')
      : ((Qa = new Za(n, e, t)), (Ja = null), 'single');
  }
  function Ho(e) {
    var t = this,
      n = t.display;
    if (!(D(t, e) || (n.activeTouch && n.input.supportsTouch()))) {
      if ((n.input.ensurePolled(), (n.shift = e.shiftKey), Wt(n, e)))
        return void (
          Sl ||
          ((n.scroller.draggable = !1),
          setTimeout(function () {
            return (n.scroller.draggable = !0);
          }, 100))
        );
      if (!qo(t, e)) {
        var r = Ln(t, e),
          i = j(e),
          o = r ? Do(r, i) : 'single';
        window.focus(),
          1 == i && t.state.selectingText && t.state.selectingText(e),
          (r && Fo(t, i, r, o, e)) ||
            (1 == i
              ? r
                ? Eo(t, r, o, e)
                : B(e) == n.scroller && E(e)
              : 2 == i
              ? (r && mi(t.doc, r),
                setTimeout(function () {
                  return n.input.focus();
                }, 20))
              : 3 == i && (Bl ? t.display.input.onContextMenu(e) : Bn(t)));
      }
    }
  }
  function Fo(e, t, n, r, i) {
    var o = 'Click';
    return (
      'double' == r ? (o = 'Double' + o) : 'triple' == r && (o = 'Triple' + o),
      (o = (1 == t ? 'Left' : 2 == t ? 'Middle' : 'Right') + o),
      So(e, uo(o, i), i, function (t) {
        if (('string' == typeof t && (t = _a[t]), !t)) return !1;
        var r = !1;
        try {
          e.isReadOnly() && (e.state.suppressEdits = !0), (r = t(e, n) != _l);
        } finally {
          e.state.suppressEdits = !1;
        }
        return r;
      })
    );
  }
  function Wo(e, t, n) {
    var r = e.getOption('configureMouse'),
      i = r ? r(e, t, n) : {};
    if (null == i.unit) {
      var o = Wl ? n.shiftKey && n.metaKey : n.altKey;
      i.unit = o
        ? 'rectangle'
        : 'single' == t
        ? 'char'
        : 'double' == t
        ? 'word'
        : 'line';
    }
    return (
      (null == i.extend || e.doc.extend) &&
        (i.extend = e.doc.extend || n.shiftKey),
      null == i.addNew && (i.addNew = Fl ? n.metaKey : n.ctrlKey),
      null == i.moveOnDrag && (i.moveOnDrag = !(Fl ? n.altKey : n.ctrlKey)),
      i
    );
  }
  function Eo(e, t, n, r) {
    Cl ? setTimeout(c(zn, e), 0) : (e.curOp.focus = l());
    var i,
      o = Wo(e, n, r),
      a = e.doc.sel;
    e.options.dragDrop &&
    ia &&
    !e.isReadOnly() &&
    'single' == n &&
    (i = a.contains(t)) > -1 &&
    (se((i = a.ranges[i]).from(), t) < 0 || t.xRel > 0) &&
    (se(i.to(), t) > 0 || t.xRel < 0)
      ? Io(e, r, t, o)
      : zo(e, r, t, o);
  }
  function Io(e, t, n, r) {
    var i = e.display,
      o = !1,
      l = yr(e, function (t) {
        Sl && (i.scroller.draggable = !1),
          (e.state.draggingText = !1),
          e.state.delayingBlurEvent &&
            (e.hasFocus() ? (e.state.delayingBlurEvent = !1) : Bn(e)),
          A(i.wrapper.ownerDocument, 'mouseup', l),
          A(i.wrapper.ownerDocument, 'mousemove', a),
          A(i.scroller, 'dragstart', s),
          A(i.scroller, 'drop', l),
          o ||
            (E(t),
            r.addNew || mi(e.doc, n, null, null, r.extend),
            (Sl && !Ol) || (Cl && 9 == kl)
              ? setTimeout(function () {
                  i.wrapper.ownerDocument.body.focus({ preventScroll: !0 }),
                    i.input.focus();
                }, 20)
              : i.input.focus());
      }),
      a = function (e) {
        o =
          o ||
          Math.abs(t.clientX - e.clientX) + Math.abs(t.clientY - e.clientY) >=
            10;
      },
      s = function () {
        return (o = !0);
      };
    Sl && (i.scroller.draggable = !0),
      (e.state.draggingText = l),
      (l.copy = !r.moveOnDrag),
      ra(i.wrapper.ownerDocument, 'mouseup', l),
      ra(i.wrapper.ownerDocument, 'mousemove', a),
      ra(i.scroller, 'dragstart', s),
      ra(i.scroller, 'drop', l),
      (e.state.delayingBlurEvent = !0),
      setTimeout(function () {
        return i.input.focus();
      }, 20),
      i.scroller.dragDrop && i.scroller.dragDrop();
  }
  function Ro(e, t, n) {
    if ('char' == n) return new Ha(t, t);
    if ('word' == n) return e.findWordAt(t);
    if ('line' == n) return new Ha(ae(t.line, 0), pe(e.doc, ae(t.line + 1, 0)));
    var r = n(e, t);
    return new Ha(r.from, r.to);
  }
  function zo(e, t, n, r) {
    function i(t) {
      if (0 != se(v, t))
        if (((v = t), 'rectangle' == r.unit)) {
          for (
            var i = [],
              o = e.options.tabSize,
              l = f(J(c, n.line).text, n.ch, o),
              a = f(J(c, t.line).text, t.ch, o),
              s = Math.min(l, a),
              g = Math.max(l, a),
              m = Math.min(n.line, t.line),
              y = Math.min(e.lastLine(), Math.max(n.line, t.line));
            m <= y;
            m++
          ) {
            var b = J(c, m).text,
              x = h(b, s, o);
            s == g
              ? i.push(new Ha(ae(m, x), ae(m, x)))
              : b.length > x && i.push(new Ha(ae(m, x), ae(m, h(b, g, o))));
          }
          i.length || i.push(new Ha(n, n)),
            Ci(c, jr(e, p.ranges.slice(0, d).concat(i), d), {
              origin: '*mouse',
              scroll: !1,
            }),
            e.scrollIntoView(t);
        } else {
          var w,
            C = u,
            k = Ro(e, t, r.unit),
            S = C.anchor;
          se(k.anchor, S) > 0
            ? ((w = k.head), (S = de(C.from(), k.anchor)))
            : ((w = k.anchor), (S = fe(C.to(), k.head)));
          var L = p.ranges.slice(0);
          (L[d] = Bo(e, new Ha(pe(c, S), w))), Ci(c, jr(e, L, d), Xl);
        }
    }
    function o(t) {
      var n = ++b,
        a = Ln(e, t, !0, 'rectangle' == r.unit);
      if (a)
        if (0 != se(a, v)) {
          (e.curOp.focus = l()), i(a);
          var u = Kn(s, c);
          (a.line >= u.to || a.line < u.from) &&
            setTimeout(
              yr(e, function () {
                b == n && o(t);
              }),
              150
            );
        } else {
          var f = t.clientY < y.top ? -20 : t.clientY > y.bottom ? 20 : 0;
          f &&
            setTimeout(
              yr(e, function () {
                b == n && ((s.scroller.scrollTop += f), o(t));
              }),
              50
            );
        }
    }
    function a(t) {
      (e.state.selectingText = !1),
        (b = 1 / 0),
        t && (E(t), s.input.focus()),
        A(s.wrapper.ownerDocument, 'mousemove', x),
        A(s.wrapper.ownerDocument, 'mouseup', w),
        (c.history.lastSelOrigin = null);
    }
    Cl && Bn(e);
    var s = e.display,
      c = e.doc;
    E(t);
    var u,
      d,
      p = c.sel,
      g = p.ranges;
    if (
      (r.addNew && !r.extend
        ? ((d = c.sel.contains(n)), (u = d > -1 ? g[d] : new Ha(n, n)))
        : ((u = c.sel.primary()), (d = c.sel.primIndex)),
      'rectangle' == r.unit)
    )
      r.addNew || (u = new Ha(n, n)), (n = Ln(e, t, !0, !0)), (d = -1);
    else {
      var m = Ro(e, n, r.unit);
      u = r.extend ? gi(u, m.anchor, m.head, r.extend) : m;
    }
    r.addNew
      ? d == -1
        ? ((d = g.length),
          Ci(c, jr(e, g.concat([u]), d), { scroll: !1, origin: '*mouse' }))
        : g.length > 1 && g[d].empty() && 'char' == r.unit && !r.extend
        ? (Ci(c, jr(e, g.slice(0, d).concat(g.slice(d + 1)), 0), {
            scroll: !1,
            origin: '*mouse',
          }),
          (p = c.sel))
        : yi(c, d, u, Xl)
      : ((d = 0), Ci(c, new Da([u], 0), Xl), (p = c.sel));
    var v = n,
      y = s.wrapper.getBoundingClientRect(),
      b = 0,
      x = yr(e, function (e) {
        0 !== e.buttons && j(e) ? o(e) : a(e);
      }),
      w = yr(e, a);
    (e.state.selectingText = w),
      ra(s.wrapper.ownerDocument, 'mousemove', x),
      ra(s.wrapper.ownerDocument, 'mouseup', w);
  }
  function Bo(e, t) {
    var n = t.anchor,
      r = t.head,
      i = J(e.doc, n.line);
    if (0 == se(n, r) && n.sticky == r.sticky) return t;
    var o = O(i);
    if (!o) return t;
    var l = M(o, n.ch, n.sticky),
      a = o[l];
    if (a.from != n.ch && a.to != n.ch) return t;
    var s = l + ((a.from == n.ch) == (1 != a.level) ? 0 : 1);
    if (0 == s || s == o.length) return t;
    var c;
    if (r.line != n.line)
      c = (r.line - n.line) * ('ltr' == e.doc.direction ? 1 : -1) > 0;
    else {
      var u = M(o, r.ch, r.sticky),
        f = u - l || (r.ch - n.ch) * (1 == a.level ? -1 : 1);
      c = u == s - 1 || u == s ? f < 0 : f > 0;
    }
    var d = o[s + (c ? -1 : 0)],
      h = c == (1 == d.level),
      p = h ? d.from : d.to,
      g = h ? 'after' : 'before';
    return n.ch == p && n.sticky == g ? t : new Ha(new ae(n.line, p, g), r);
  }
  function jo(e, t, n, r) {
    var i, o;
    if (t.touches) (i = t.touches[0].clientX), (o = t.touches[0].clientY);
    else
      try {
        (i = t.clientX), (o = t.clientY);
      } catch (l) {
        return !1;
      }
    if (i >= Math.floor(e.display.gutters.getBoundingClientRect().right))
      return !1;
    r && E(t);
    var a = e.display,
      s = a.lineDiv.getBoundingClientRect();
    if (o > s.bottom || !F(e, n)) return R(t);
    o -= s.top - a.viewOffset;
    for (var c = 0; c < e.display.gutterSpecs.length; ++c) {
      var u = a.gutters.childNodes[c];
      if (u && u.getBoundingClientRect().right >= i) {
        var f = ie(e.doc, o),
          d = e.display.gutterSpecs[c];
        return P(e, n, e, f, d.className, t), R(t);
      }
    }
  }
  function qo(e, t) {
    return jo(e, t, 'gutterClick', !0);
  }
  function Go(e, t) {
    Wt(e.display, t) ||
      Uo(e, t) ||
      D(e, t, 'contextmenu') ||
      Bl ||
      e.display.input.onContextMenu(t);
  }
  function Uo(e, t) {
    return !!F(e, 'gutterContextMenu') && jo(e, t, 'gutterContextMenu', !1);
  }
  function Ko(e) {
    (e.display.wrapper.className =
      e.display.wrapper.className.replace(/\s*cm-s-\S+/g, '') +
      e.options.theme.replace(/(^|\s)\s*/g, ' cm-s-')),
      tn(e);
  }
  function Vo(e) {
    function t(t, r, i, o) {
      (e.defaults[t] = r),
        i &&
          (n[t] = o
            ? function (e, t, n) {
                n != es && i(e, t, n);
              }
            : i);
    }
    var n = e.optionHandlers;
    (e.defineOption = t),
      (e.Init = es),
      t(
        'value',
        '',
        function (e, t) {
          return e.setValue(t);
        },
        !0
      ),
      t(
        'mode',
        null,
        function (e, t) {
          (e.doc.modeOption = t), $r(e);
        },
        !0
      ),
      t('indentUnit', 2, $r, !0),
      t('indentWithTabs', !1),
      t('smartIndent', !0),
      t(
        'tabSize',
        4,
        function (e) {
          Xr(e), tn(e), Mn(e);
        },
        !0
      ),
      t('lineSeparator', null, function (e, t) {
        if (((e.doc.lineSep = t), t)) {
          var n = [],
            r = e.doc.first;
          e.doc.iter(function (e) {
            for (var i = 0; ; ) {
              var o = e.text.indexOf(t, i);
              if (o == -1) break;
              (i = o + t.length), n.push(ae(r, o));
            }
            r++;
          });
          for (var i = n.length - 1; i >= 0; i--)
            Ri(e.doc, t, n[i], ae(n[i].line, n[i].ch + t.length));
        }
      }),
      t(
        'specialChars',
        /[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,
        function (e, t, n) {
          (e.state.specialChars = new RegExp(
            t.source + (t.test('\t') ? '' : '|\t'),
            'g'
          )),
            n != es && e.refresh();
        }
      ),
      t(
        'specialCharPlaceholder',
        ct,
        function (e) {
          return e.refresh();
        },
        !0
      ),
      t('electricChars', !0),
      t(
        'inputStyle',
        Hl ? 'contenteditable' : 'textarea',
        function () {
          throw new Error(
            'inputStyle can not (yet) be changed in a running editor'
          );
        },
        !0
      ),
      t(
        'spellcheck',
        !1,
        function (e, t) {
          return (e.getInputField().spellcheck = t);
        },
        !0
      ),
      t(
        'autocorrect',
        !1,
        function (e, t) {
          return (e.getInputField().autocorrect = t);
        },
        !0
      ),
      t(
        'autocapitalize',
        !1,
        function (e, t) {
          return (e.getInputField().autocapitalize = t);
        },
        !0
      ),
      t('rtlMoveVisually', !El),
      t('wholeLineUpdateBefore', !0),
      t(
        'theme',
        'default',
        function (e) {
          Ko(e), Er(e);
        },
        !0
      ),
      t('keyMap', 'default', function (e, t, n) {
        var r = ho(t),
          i = n != es && ho(n);
        i && i.detach && i.detach(e, r), r.attach && r.attach(e, i || null);
      }),
      t('extraKeys', null),
      t('configureMouse', null),
      t('lineWrapping', !1, $o, !0),
      t(
        'gutters',
        [],
        function (e, t) {
          (e.display.gutterSpecs = Fr(t, e.options.lineNumbers)), Er(e);
        },
        !0
      ),
      t(
        'fixedGutter',
        !0,
        function (e, t) {
          (e.display.gutters.style.left = t ? Cn(e.display) + 'px' : '0'),
            e.refresh();
        },
        !0
      ),
      t(
        'coverGutterNextToScrollbar',
        !1,
        function (e) {
          return lr(e);
        },
        !0
      ),
      t(
        'scrollbarStyle',
        'native',
        function (e) {
          sr(e),
            lr(e),
            e.display.scrollbars.setScrollTop(e.doc.scrollTop),
            e.display.scrollbars.setScrollLeft(e.doc.scrollLeft);
        },
        !0
      ),
      t(
        'lineNumbers',
        !1,
        function (e, t) {
          (e.display.gutterSpecs = Fr(e.options.gutters, t)), Er(e);
        },
        !0
      ),
      t('firstLineNumber', 1, Er, !0),
      t(
        'lineNumberFormatter',
        function (e) {
          return e;
        },
        Er,
        !0
      ),
      t('showCursorWhenSelecting', !1, Hn, !0),
      t('resetSelectionOnContextMenu', !0),
      t('lineWiseCopyCut', !0),
      t('pasteLinesPerSelection', !0),
      t('selectionsMayTouch', !1),
      t('readOnly', !1, function (e, t) {
        'nocursor' == t && (qn(e), e.display.input.blur()),
          e.display.input.readOnlyChanged(t);
      }),
      t('screenReaderLabel', null, function (e, t) {
        (t = '' === t ? null : t), e.display.input.screenReaderLabelChanged(t);
      }),
      t(
        'disableInput',
        !1,
        function (e, t) {
          t || e.display.input.reset();
        },
        !0
      ),
      t('dragDrop', !0, _o),
      t('allowDropFileTypes', null),
      t('cursorBlinkRate', 530),
      t('cursorScrollMargin', 0),
      t('cursorHeight', 1, Hn, !0),
      t('singleCursorHeightPerLine', !0, Hn, !0),
      t('workTime', 100),
      t('workDelay', 100),
      t('flattenSpans', !0, Xr, !0),
      t('addModeClass', !1, Xr, !0),
      t('pollInterval', 100),
      t('undoDepth', 200, function (e, t) {
        return (e.doc.history.undoDepth = t);
      }),
      t('historyEventDelay', 1250),
      t(
        'viewportMargin',
        10,
        function (e) {
          return e.refresh();
        },
        !0
      ),
      t('maxHighlightLength', 1e4, Xr, !0),
      t('moveInputWithCursor', !0, function (e, t) {
        t || e.display.input.resetPosition();
      }),
      t('tabindex', null, function (e, t) {
        return (e.display.input.getField().tabIndex = t || '');
      }),
      t('autofocus', null),
      t(
        'direction',
        'ltr',
        function (e, t) {
          return e.doc.setDirection(t);
        },
        !0
      ),
      t('phrases', null);
  }
  function _o(e, t, n) {
    var r = n && n != es;
    if (!t != !r) {
      var i = e.display.dragFunctions,
        o = t ? ra : A;
      o(e.display.scroller, 'dragstart', i.start),
        o(e.display.scroller, 'dragenter', i.enter),
        o(e.display.scroller, 'dragover', i.over),
        o(e.display.scroller, 'dragleave', i.leave),
        o(e.display.scroller, 'drop', i.drop);
    }
  }
  function $o(e) {
    e.options.lineWrapping
      ? (a(e.display.wrapper, 'CodeMirror-wrap'),
        (e.display.sizer.style.minWidth = ''),
        (e.display.sizerWidth = null))
      : (jl(e.display.wrapper, 'CodeMirror-wrap'), it(e)),
      Sn(e),
      Mn(e),
      tn(e),
      setTimeout(function () {
        return lr(e);
      }, 100);
  }
  function Xo(e, t) {
    var n = this;
    if (!(this instanceof Xo)) return new Xo(e, t);
    (this.options = t = t ? u(t) : {}), u(ts, t, !1);
    var r = t.value;
    'string' == typeof r
      ? (r = new za(r, t.mode, null, t.lineSeparator, t.direction))
      : t.mode && (r.modeOption = t.mode),
      (this.doc = r);
    var i = new Xo.inputStyles[t.inputStyle](this),
      o = (this.display = new Ir(e, r, i, t));
    (o.wrapper.CodeMirror = this),
      Ko(this),
      t.lineWrapping && (this.display.wrapper.className += ' CodeMirror-wrap'),
      sr(this),
      (this.state = {
        keyMaps: [],
        overlays: [],
        modeGen: 0,
        overwrite: !1,
        delayingBlurEvent: !1,
        focused: !1,
        suppressEdits: !1,
        pasteIncoming: -1,
        cutIncoming: -1,
        selectingText: !1,
        draggingText: !1,
        highlight: new Gl(),
        keySeq: null,
        specialChars: null,
      }),
      t.autofocus && !Hl && o.input.focus(),
      Cl &&
        kl < 11 &&
        setTimeout(function () {
          return n.display.input.reset(!0);
        }, 20),
      Yo(this),
      ro(),
      cr(this),
      (this.curOp.forceUpdate = !0),
      Jr(this, r),
      (t.autofocus && !Hl) || this.hasFocus()
        ? setTimeout(function () {
            n.hasFocus() && !n.state.focused && jn(n);
          }, 20)
        : qn(this);
    for (var l in ns) ns.hasOwnProperty(l) && ns[l](this, t[l], es);
    Hr(this), t.finishInit && t.finishInit(this);
    for (var a = 0; a < rs.length; ++a) rs[a](this);
    ur(this),
      Sl &&
        t.lineWrapping &&
        'optimizelegibility' == getComputedStyle(o.lineDiv).textRendering &&
        (o.lineDiv.style.textRendering = 'auto');
  }
  function Yo(e) {
    function t() {
      i.activeTouch &&
        ((o = setTimeout(function () {
          return (i.activeTouch = null);
        }, 1e3)),
        (l = i.activeTouch),
        (l.end = +new Date()));
    }
    function n(e) {
      if (1 != e.touches.length) return !1;
      var t = e.touches[0];
      return t.radiusX <= 1 && t.radiusY <= 1;
    }
    function r(e, t) {
      if (null == t.left) return !0;
      var n = t.left - e.left,
        r = t.top - e.top;
      return n * n + r * r > 400;
    }
    var i = e.display;
    ra(i.scroller, 'mousedown', yr(e, Ho)),
      Cl && kl < 11
        ? ra(
            i.scroller,
            'dblclick',
            yr(e, function (t) {
              if (!D(e, t)) {
                var n = Ln(e, t);
                if (n && !qo(e, t) && !Wt(e.display, t)) {
                  E(t);
                  var r = e.findWordAt(n);
                  mi(e.doc, r.anchor, r.head);
                }
              }
            })
          )
        : ra(i.scroller, 'dblclick', function (t) {
            return D(e, t) || E(t);
          }),
      ra(i.scroller, 'contextmenu', function (t) {
        return Go(e, t);
      }),
      ra(i.input.getField(), 'contextmenu', function (t) {
        i.scroller.contains(t.target) || Go(e, t);
      });
    var o,
      l = { end: 0 };
    ra(i.scroller, 'touchstart', function (t) {
      if (!D(e, t) && !n(t) && !qo(e, t)) {
        i.input.ensurePolled(), clearTimeout(o);
        var r = +new Date();
        (i.activeTouch = {
          start: r,
          moved: !1,
          prev: r - l.end <= 300 ? l : null,
        }),
          1 == t.touches.length &&
            ((i.activeTouch.left = t.touches[0].pageX),
            (i.activeTouch.top = t.touches[0].pageY));
      }
    }),
      ra(i.scroller, 'touchmove', function () {
        i.activeTouch && (i.activeTouch.moved = !0);
      }),
      ra(i.scroller, 'touchend', function (n) {
        var o = i.activeTouch;
        if (
          o &&
          !Wt(i, n) &&
          null != o.left &&
          !o.moved &&
          new Date() - o.start < 300
        ) {
          var l,
            a = e.coordsChar(i.activeTouch, 'page');
          (l =
            !o.prev || r(o, o.prev)
              ? new Ha(a, a)
              : !o.prev.prev || r(o, o.prev.prev)
              ? e.findWordAt(a)
              : new Ha(ae(a.line, 0), pe(e.doc, ae(a.line + 1, 0)))),
            e.setSelection(l.anchor, l.head),
            e.focus(),
            E(n);
        }
        t();
      }),
      ra(i.scroller, 'touchcancel', t),
      ra(i.scroller, 'scroll', function () {
        i.scroller.clientHeight &&
          (nr(e, i.scroller.scrollTop),
          ir(e, i.scroller.scrollLeft, !0),
          P(e, 'scroll', e));
      }),
      ra(i.scroller, 'mousewheel', function (t) {
        return Br(e, t);
      }),
      ra(i.scroller, 'DOMMouseScroll', function (t) {
        return Br(e, t);
      }),
      ra(i.wrapper, 'scroll', function () {
        return (i.wrapper.scrollTop = i.wrapper.scrollLeft = 0);
      }),
      (i.dragFunctions = {
        enter: function (t) {
          D(e, t) || z(t);
        },
        over: function (t) {
          D(e, t) || (eo(e, t), z(t));
        },
        start: function (t) {
          return Ji(e, t);
        },
        drop: yr(e, Qi),
        leave: function (t) {
          D(e, t) || to(e);
        },
      });
    var a = i.input.getField();
    ra(a, 'keyup', function (t) {
      return Ao.call(e, t);
    }),
      ra(a, 'keydown', yr(e, Oo)),
      ra(a, 'keypress', yr(e, Po)),
      ra(a, 'focus', function (t) {
        return jn(e, t);
      }),
      ra(a, 'blur', function (t) {
        return qn(e, t);
      });
  }
  function Zo(e, t, n, r) {
    var i,
      o = e.doc;
    null == n && (n = 'add'),
      'smart' == n && (o.mode.indent ? (i = be(e, t).state) : (n = 'prev'));
    var l = e.options.tabSize,
      a = J(o, t),
      s = f(a.text, null, l);
    a.stateAfter && (a.stateAfter = null);
    var c,
      u = a.text.match(/^\s*/)[0];
    if (r || /\S/.test(a.text)) {
      if (
        'smart' == n &&
        ((c = o.mode.indent(i, a.text.slice(u.length), a.text)),
        c == _l || c > 150)
      ) {
        if (!r) return;
        n = 'prev';
      }
    } else (c = 0), (n = 'not');
    'prev' == n
      ? (c = t > o.first ? f(J(o, t - 1).text, null, l) : 0)
      : 'add' == n
      ? (c = s + e.options.indentUnit)
      : 'subtract' == n
      ? (c = s - e.options.indentUnit)
      : 'number' == typeof n && (c = s + n),
      (c = Math.max(0, c));
    var d = '',
      h = 0;
    if (e.options.indentWithTabs)
      for (var g = Math.floor(c / l); g; --g) (h += l), (d += '\t');
    if ((h < c && (d += p(c - h)), d != u))
      return (
        Ri(o, d, ae(t, 0), ae(t, u.length), '+input'), (a.stateAfter = null), !0
      );
    for (var m = 0; m < o.sel.ranges.length; m++) {
      var v = o.sel.ranges[m];
      if (v.head.line == t && v.head.ch < u.length) {
        var y = ae(t, u.length);
        yi(o, m, new Ha(y, y));
        break;
      }
    }
  }
  function Qo(e) {
    is = e;
  }
  function Jo(e, t, n, r, i) {
    var o = e.doc;
    (e.display.shift = !1), r || (r = o.sel);
    var l = +new Date() - 200,
      a = 'paste' == i || e.state.pasteIncoming > l,
      s = oa(t),
      c = null;
    if (a && r.ranges.length > 1)
      if (is && is.text.join('\n') == t) {
        if (r.ranges.length % is.text.length == 0) {
          c = [];
          for (var u = 0; u < is.text.length; u++)
            c.push(o.splitLines(is.text[u]));
        }
      } else
        s.length == r.ranges.length &&
          e.options.pasteLinesPerSelection &&
          (c = m(s, function (e) {
            return [e];
          }));
    for (var f = e.curOp.updateInput, d = r.ranges.length - 1; d >= 0; d--) {
      var h = r.ranges[d],
        p = h.from(),
        v = h.to();
      h.empty() &&
        (n && n > 0
          ? (p = ae(p.line, p.ch - n))
          : e.state.overwrite && !a
          ? (v = ae(
              v.line,
              Math.min(J(o, v.line).text.length, v.ch + g(s).length)
            ))
          : a &&
            is &&
            is.lineWise &&
            is.text.join('\n') == s.join('\n') &&
            (p = v = ae(p.line, 0)));
      var y = {
        from: p,
        to: v,
        text: c ? c[d % c.length] : s,
        origin: i || (a ? 'paste' : e.state.cutIncoming > l ? 'cut' : '+input'),
      };
      Di(e.doc, y), xt(e, 'inputRead', e, y);
    }
    t && !a && tl(e, t),
      Zn(e),
      e.curOp.updateInput < 2 && (e.curOp.updateInput = f),
      (e.curOp.typing = !0),
      (e.state.pasteIncoming = e.state.cutIncoming = -1);
  }
  function el(e, t) {
    var n = e.clipboardData && e.clipboardData.getData('Text');
    if (n)
      return (
        e.preventDefault(),
        t.isReadOnly() ||
          t.options.disableInput ||
          vr(t, function () {
            return Jo(t, n, 0, null, 'paste');
          }),
        !0
      );
  }
  function tl(e, t) {
    if (e.options.electricChars && e.options.smartIndent)
      for (var n = e.doc.sel, r = n.ranges.length - 1; r >= 0; r--) {
        var i = n.ranges[r];
        if (
          !(i.head.ch > 100 || (r && n.ranges[r - 1].head.line == i.head.line))
        ) {
          var o = e.getModeAt(i.head),
            l = !1;
          if (o.electricChars) {
            for (var a = 0; a < o.electricChars.length; a++)
              if (t.indexOf(o.electricChars.charAt(a)) > -1) {
                l = Zo(e, i.head.line, 'smart');
                break;
              }
          } else
            o.electricInput &&
              o.electricInput.test(
                J(e.doc, i.head.line).text.slice(0, i.head.ch)
              ) &&
              (l = Zo(e, i.head.line, 'smart'));
          l && xt(e, 'electricInput', e, i.head.line);
        }
      }
  }
  function nl(e) {
    for (var t = [], n = [], r = 0; r < e.doc.sel.ranges.length; r++) {
      var i = e.doc.sel.ranges[r].head.line,
        o = { anchor: ae(i, 0), head: ae(i + 1, 0) };
      n.push(o), t.push(e.getRange(o.anchor, o.head));
    }
    return { text: t, ranges: n };
  }
  function rl(e, t, n, r) {
    e.setAttribute('autocorrect', n ? '' : 'off'),
      e.setAttribute('autocapitalize', r ? '' : 'off'),
      e.setAttribute('spellcheck', !!t);
  }
  function il() {
    var e = r(
        'textarea',
        null,
        null,
        'position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none'
      ),
      t = r(
        'div',
        [e],
        null,
        'overflow: hidden; position: relative; width: 3px; height: 0px;'
      );
    return (
      Sl ? (e.style.width = '1000px') : e.setAttribute('wrap', 'off'),
      Pl && (e.style.border = '1px solid black'),
      rl(e),
      t
    );
  }
  function ol(e) {
    var t = e.optionHandlers,
      n = (e.helpers = {});
    (e.prototype = {
      constructor: e,
      focus: function () {
        window.focus(), this.display.input.focus();
      },
      setOption: function (e, n) {
        var r = this.options,
          i = r[e];
        (r[e] == n && 'mode' != e) ||
          ((r[e] = n),
          t.hasOwnProperty(e) && yr(this, t[e])(this, n, i),
          P(this, 'optionChange', this, e));
      },
      getOption: function (e) {
        return this.options[e];
      },
      getDoc: function () {
        return this.doc;
      },
      addKeyMap: function (e, t) {
        this.state.keyMaps[t ? 'push' : 'unshift'](ho(e));
      },
      removeKeyMap: function (e) {
        for (var t = this.state.keyMaps, n = 0; n < t.length; ++n)
          if (t[n] == e || t[n].name == e) return t.splice(n, 1), !0;
      },
      addOverlay: br(function (t, n) {
        var r = t.token ? t : e.getMode(this.options, t);
        if (r.startState) throw new Error('Overlays may not be stateful.');
        v(
          this.state.overlays,
          {
            mode: r,
            modeSpec: t,
            opaque: n && n.opaque,
            priority: (n && n.priority) || 0,
          },
          function (e) {
            return e.priority;
          }
        ),
          this.state.modeGen++,
          Mn(this);
      }),
      removeOverlay: br(function (e) {
        for (var t = this.state.overlays, n = 0; n < t.length; ++n) {
          var r = t[n].modeSpec;
          if (r == e || ('string' == typeof e && r.name == e))
            return t.splice(n, 1), this.state.modeGen++, void Mn(this);
        }
      }),
      indentLine: br(function (e, t, n) {
        'string' != typeof t &&
          'number' != typeof t &&
          (t =
            null == t
              ? this.options.smartIndent
                ? 'smart'
                : 'prev'
              : t
              ? 'add'
              : 'subtract'),
          oe(this.doc, e) && Zo(this, e, t, n);
      }),
      indentSelection: br(function (e) {
        for (var t = this.doc.sel.ranges, n = -1, r = 0; r < t.length; r++) {
          var i = t[r];
          if (i.empty())
            i.head.line > n &&
              (Zo(this, i.head.line, e, !0),
              (n = i.head.line),
              r == this.doc.sel.primIndex && Zn(this));
          else {
            var o = i.from(),
              l = i.to(),
              a = Math.max(n, o.line);
            n = Math.min(this.lastLine(), l.line - (l.ch ? 0 : 1)) + 1;
            for (var s = a; s < n; ++s) Zo(this, s, e);
            var c = this.doc.sel.ranges;
            0 == o.ch &&
              t.length == c.length &&
              c[r].from().ch > 0 &&
              yi(this.doc, r, new Ha(o, c[r].to()), $l);
          }
        }
      }),
      getTokenAt: function (e, t) {
        return ke(this, e, t);
      },
      getLineTokens: function (e, t) {
        return ke(this, ae(e), t, !0);
      },
      getTokenTypeAt: function (e) {
        e = pe(this.doc, e);
        var t,
          n = ye(this, J(this.doc, e.line)),
          r = 0,
          i = (n.length - 1) / 2,
          o = e.ch;
        if (0 == o) t = n[2];
        else
          for (;;) {
            var l = (r + i) >> 1;
            if ((l ? n[2 * l - 1] : 0) >= o) i = l;
            else {
              if (!(n[2 * l + 1] < o)) {
                t = n[2 * l + 2];
                break;
              }
              r = l + 1;
            }
          }
        var a = t ? t.indexOf('overlay ') : -1;
        return a < 0 ? t : 0 == a ? null : t.slice(0, a - 1);
      },
      getModeAt: function (t) {
        var n = this.doc.mode;
        return n.innerMode ? e.innerMode(n, this.getTokenAt(t).state).mode : n;
      },
      getHelper: function (e, t) {
        return this.getHelpers(e, t)[0];
      },
      getHelpers: function (e, t) {
        var r = [];
        if (!n.hasOwnProperty(t)) return r;
        var i = n[t],
          o = this.getModeAt(e);
        if ('string' == typeof o[t]) i[o[t]] && r.push(i[o[t]]);
        else if (o[t])
          for (var l = 0; l < o[t].length; l++) {
            var a = i[o[t][l]];
            a && r.push(a);
          }
        else
          o.helperType && i[o.helperType]
            ? r.push(i[o.helperType])
            : i[o.name] && r.push(i[o.name]);
        for (var s = 0; s < i._global.length; s++) {
          var c = i._global[s];
          c.pred(o, this) && d(r, c.val) == -1 && r.push(c.val);
        }
        return r;
      },
      getStateAfter: function (e, t) {
        var n = this.doc;
        return (
          (e = he(n, null == e ? n.first + n.size - 1 : e)),
          be(this, e + 1, t).state
        );
      },
      cursorCoords: function (e, t) {
        var n,
          r = this.doc.sel.primary();
        return (
          (n =
            null == e
              ? r.head
              : 'object' == typeof e
              ? pe(this.doc, e)
              : e
              ? r.from()
              : r.to()),
          cn(this, n, t || 'page')
        );
      },
      charCoords: function (e, t) {
        return sn(this, pe(this.doc, e), t || 'page');
      },
      coordsChar: function (e, t) {
        return (e = an(this, e, t || 'page')), dn(this, e.left, e.top);
      },
      lineAtHeight: function (e, t) {
        return (
          (e = an(this, { top: e, left: 0 }, t || 'page').top),
          ie(this.doc, e + this.display.viewOffset)
        );
      },
      heightAtLine: function (e, t, n) {
        var r,
          i = !1;
        if ('number' == typeof e) {
          var o = this.doc.first + this.doc.size - 1;
          e < this.doc.first
            ? (e = this.doc.first)
            : e > o && ((e = o), (i = !0)),
            (r = J(this.doc, e));
        } else r = e;
        return (
          ln(this, r, { top: 0, left: 0 }, t || 'page', n || i).top +
          (i ? this.doc.height - nt(r) : 0)
        );
      },
      defaultTextHeight: function () {
        return bn(this.display);
      },
      defaultCharWidth: function () {
        return xn(this.display);
      },
      getViewport: function () {
        return { from: this.display.viewFrom, to: this.display.viewTo };
      },
      addWidget: function (e, t, n, r, i) {
        var o = this.display;
        e = cn(this, pe(this.doc, e));
        var l = e.bottom,
          a = e.left;
        if (
          ((t.style.position = 'absolute'),
          t.setAttribute('cm-ignore-events', 'true'),
          this.display.input.setUneditable(t),
          o.sizer.appendChild(t),
          'over' == r)
        )
          l = e.top;
        else if ('above' == r || 'near' == r) {
          var s = Math.max(o.wrapper.clientHeight, this.doc.height),
            c = Math.max(o.sizer.clientWidth, o.lineSpace.clientWidth);
          ('above' == r || e.bottom + t.offsetHeight > s) &&
          e.top > t.offsetHeight
            ? (l = e.top - t.offsetHeight)
            : e.bottom + t.offsetHeight <= s && (l = e.bottom),
            a + t.offsetWidth > c && (a = c - t.offsetWidth);
        }
        (t.style.top = l + 'px'),
          (t.style.left = t.style.right = ''),
          'right' == i
            ? ((a = o.sizer.clientWidth - t.offsetWidth),
              (t.style.right = '0px'))
            : ('left' == i
                ? (a = 0)
                : 'middle' == i &&
                  (a = (o.sizer.clientWidth - t.offsetWidth) / 2),
              (t.style.left = a + 'px')),
          n &&
            $n(this, {
              left: a,
              top: l,
              right: a + t.offsetWidth,
              bottom: l + t.offsetHeight,
            });
      },
      triggerOnKeyDown: br(Oo),
      triggerOnKeyPress: br(Po),
      triggerOnKeyUp: Ao,
      triggerOnMouseDown: br(Ho),
      execCommand: function (e) {
        if (_a.hasOwnProperty(e)) return _a[e].call(null, this);
      },
      triggerElectric: br(function (e) {
        tl(this, e);
      }),
      findPosH: function (e, t, n, r) {
        var i = 1;
        t < 0 && ((i = -1), (t = -t));
        for (
          var o = pe(this.doc, e), l = 0;
          l < t && ((o = ll(this.doc, o, i, n, r)), !o.hitSide);
          ++l
        );
        return o;
      },
      moveH: br(function (e, t) {
        var n = this;
        this.extendSelectionsBy(function (r) {
          return n.display.shift || n.doc.extend || r.empty()
            ? ll(n.doc, r.head, e, t, n.options.rtlMoveVisually)
            : e < 0
            ? r.from()
            : r.to();
        }, Yl);
      }),
      deleteH: br(function (e, t) {
        var n = this.doc.sel,
          r = this.doc;
        n.somethingSelected()
          ? r.replaceSelection('', null, '+delete')
          : po(this, function (n) {
              var i = ll(r, n.head, e, t, !1);
              return e < 0 ? { from: i, to: n.head } : { from: n.head, to: i };
            });
      }),
      findPosV: function (e, t, n, r) {
        var i = 1,
          o = r;
        t < 0 && ((i = -1), (t = -t));
        for (var l = pe(this.doc, e), a = 0; a < t; ++a) {
          var s = cn(this, l, 'div');
          if (
            (null == o ? (o = s.left) : (s.left = o),
            (l = al(this, s, i, n)),
            l.hitSide)
          )
            break;
        }
        return l;
      },
      moveV: br(function (e, t) {
        var n = this,
          r = this.doc,
          i = [],
          o = !this.display.shift && !r.extend && r.sel.somethingSelected();
        if (
          (r.extendSelectionsBy(function (l) {
            if (o) return e < 0 ? l.from() : l.to();
            var a = cn(n, l.head, 'div');
            null != l.goalColumn && (a.left = l.goalColumn), i.push(a.left);
            var s = al(n, a, e, t);
            return (
              'page' == t &&
                l == r.sel.primary() &&
                Yn(n, sn(n, s, 'div').top - a.top),
              s
            );
          }, Yl),
          i.length)
        )
          for (var l = 0; l < r.sel.ranges.length; l++)
            r.sel.ranges[l].goalColumn = i[l];
      }),
      findWordAt: function (e) {
        var t = this.doc,
          n = J(t, e.line).text,
          r = e.ch,
          i = e.ch;
        if (n) {
          var o = this.getHelper(e, 'wordChars');
          ('before' != e.sticky && i != n.length) || !r ? ++i : --r;
          for (
            var l = n.charAt(r),
              a = w(l, o)
                ? function (e) {
                    return w(e, o);
                  }
                : /\s/.test(l)
                ? function (e) {
                    return /\s/.test(e);
                  }
                : function (e) {
                    return !/\s/.test(e) && !w(e);
                  };
            r > 0 && a(n.charAt(r - 1));

          )
            --r;
          for (; i < n.length && a(n.charAt(i)); ) ++i;
        }
        return new Ha(ae(e.line, r), ae(e.line, i));
      },
      toggleOverwrite: function (e) {
        (null != e && e == this.state.overwrite) ||
          ((this.state.overwrite = !this.state.overwrite)
            ? a(this.display.cursorDiv, 'CodeMirror-overwrite')
            : jl(this.display.cursorDiv, 'CodeMirror-overwrite'),
          P(this, 'overwriteToggle', this, this.state.overwrite));
      },
      hasFocus: function () {
        return this.display.input.getField() == l();
      },
      isReadOnly: function () {
        return !(!this.options.readOnly && !this.doc.cantEdit);
      },
      scrollTo: br(function (e, t) {
        Qn(this, e, t);
      }),
      getScrollInfo: function () {
        var e = this.display.scroller;
        return {
          left: e.scrollLeft,
          top: e.scrollTop,
          height: e.scrollHeight - zt(this) - this.display.barHeight,
          width: e.scrollWidth - zt(this) - this.display.barWidth,
          clientHeight: jt(this),
          clientWidth: Bt(this),
        };
      },
      scrollIntoView: br(function (e, t) {
        null == e
          ? ((e = { from: this.doc.sel.primary().head, to: null }),
            null == t && (t = this.options.cursorScrollMargin))
          : 'number' == typeof e
          ? (e = { from: ae(e, 0), to: null })
          : null == e.from && (e = { from: e, to: null }),
          e.to || (e.to = e.from),
          (e.margin = t || 0),
          null != e.from.line ? Jn(this, e) : tr(this, e.from, e.to, e.margin);
      }),
      setSize: br(function (e, t) {
        var n = this,
          r = function (e) {
            return 'number' == typeof e || /^\d+$/.test(String(e))
              ? e + 'px'
              : e;
          };
        null != e && (this.display.wrapper.style.width = r(e)),
          null != t && (this.display.wrapper.style.height = r(t)),
          this.options.lineWrapping && en(this);
        var i = this.display.viewFrom;
        this.doc.iter(i, this.display.viewTo, function (e) {
          if (e.widgets)
            for (var t = 0; t < e.widgets.length; t++)
              if (e.widgets[t].noHScroll) {
                On(n, i, 'widget');
                break;
              }
          ++i;
        }),
          (this.curOp.forceUpdate = !0),
          P(this, 'refresh', this);
      }),
      operation: function (e) {
        return vr(this, e);
      },
      startOperation: function () {
        return cr(this);
      },
      endOperation: function () {
        return ur(this);
      },
      refresh: br(function () {
        var e = this.display.cachedTextHeight;
        Mn(this),
          (this.curOp.forceUpdate = !0),
          tn(this),
          Qn(this, this.doc.scrollLeft, this.doc.scrollTop),
          Ar(this.display),
          (null == e ||
            Math.abs(e - bn(this.display)) > 0.5 ||
            this.options.lineWrapping) &&
            Sn(this),
          P(this, 'refresh', this);
      }),
      swapDoc: br(function (e) {
        var t = this.doc;
        return (
          (t.cm = null),
          this.state.selectingText && this.state.selectingText(),
          Jr(this, e),
          tn(this),
          this.display.input.reset(),
          Qn(this, e.scrollLeft, e.scrollTop),
          (this.curOp.forceScroll = !0),
          xt(this, 'swapDoc', this, t),
          t
        );
      }),
      phrase: function (e) {
        var t = this.options.phrases;
        return t && Object.prototype.hasOwnProperty.call(t, e) ? t[e] : e;
      },
      getInputField: function () {
        return this.display.input.getField();
      },
      getWrapperElement: function () {
        return this.display.wrapper;
      },
      getScrollerElement: function () {
        return this.display.scroller;
      },
      getGutterElement: function () {
        return this.display.gutters;
      },
    }),
      W(e),
      (e.registerHelper = function (t, r, i) {
        n.hasOwnProperty(t) || (n[t] = e[t] = { _global: [] }), (n[t][r] = i);
      }),
      (e.registerGlobalHelper = function (t, r, i, o) {
        e.registerHelper(t, r, o), n[t]._global.push({ pred: i, val: o });
      });
  }
  function ll(e, t, n, r, i) {
    function o() {
      var n = t.line + u;
      return (
        !(n < e.first || n >= e.first + e.size) &&
        ((t = new ae(n, t.ch, t.sticky)), (c = J(e, n)))
      );
    }
    function l(l) {
      var a;
      if ('codepoint' == r) {
        var s = c.text.charCodeAt(t.ch + (n > 0 ? 0 : -1));
        if (isNaN(s)) a = null;
        else {
          var f = n > 0 ? s >= 55296 && s < 56320 : s >= 56320 && s < 57343;
          a = new ae(
            t.line,
            Math.max(0, Math.min(c.text.length, t.ch + n * (f ? 2 : 1))),
            -n
          );
        }
      } else a = i ? yo(e.cm, c, t, n) : mo(c, t, n);
      if (null == a) {
        if (l || !o()) return !1;
        t = vo(i, e.cm, c, t.line, u);
      } else t = a;
      return !0;
    }
    var a = t,
      s = n,
      c = J(e, t.line),
      u = i && 'rtl' == e.direction ? -n : n;
    if ('char' == r || 'codepoint' == r) l();
    else if ('column' == r) l(!0);
    else if ('word' == r || 'group' == r)
      for (
        var f = null,
          d = 'group' == r,
          h = e.cm && e.cm.getHelper(t, 'wordChars'),
          p = !0;
        !(n < 0) || l(!p);
        p = !1
      ) {
        var g = c.text.charAt(t.ch) || '\n',
          m = w(g, h)
            ? 'w'
            : d && '\n' == g
            ? 'n'
            : !d || /\s/.test(g)
            ? null
            : 'p';
        if ((!d || p || m || (m = 's'), f && f != m)) {
          n < 0 && ((n = 1), l(), (t.sticky = 'after'));
          break;
        }
        if ((m && (f = m), n > 0 && !l(!p))) break;
      }
    var v = Oi(e, t, a, s, !0);
    return ce(a, v) && (v.hitSide = !0), v;
  }
  function al(e, t, n, r) {
    var i,
      o = e.doc,
      l = t.left;
    if ('page' == r) {
      var a = Math.min(
          e.display.wrapper.clientHeight,
          window.innerHeight || document.documentElement.clientHeight
        ),
        s = Math.max(a - 0.5 * bn(e.display), 3);
      i = (n > 0 ? t.bottom : t.top) + n * s;
    } else 'line' == r && (i = n > 0 ? t.bottom + 3 : t.top - 3);
    for (var c; (c = dn(e, l, i)), c.outside; ) {
      if (n < 0 ? i <= 0 : i >= o.height) {
        c.hitSide = !0;
        break;
      }
      i += 5 * n;
    }
    return c;
  }
  function sl(e, t) {
    var n = Vt(e, t.line);
    if (!n || n.hidden) return null;
    var r = J(e.doc, t.line),
      i = Gt(n, r, t.line),
      o = O(r, e.doc.direction),
      l = 'left';
    if (o) {
      var a = M(o, t.ch);
      l = a % 2 ? 'right' : 'left';
    }
    var s = Xt(i.map, t.ch, l);
    return (s.offset = 'right' == s.collapse ? s.end : s.start), s;
  }
  function cl(e) {
    for (var t = e; t; t = t.parentNode)
      if (/CodeMirror-gutter-wrapper/.test(t.className)) return !0;
    return !1;
  }
  function ul(e, t) {
    return t && (e.bad = !0), e;
  }
  function fl(e, t, n, r, i) {
    function o(e) {
      return function (t) {
        return t.id == e;
      };
    }
    function l() {
      u && ((c += f), d && (c += f), (u = d = !1));
    }
    function a(e) {
      e && (l(), (c += e));
    }
    function s(t) {
      if (1 == t.nodeType) {
        var n = t.getAttribute('cm-text');
        if (n) return void a(n);
        var c,
          h = t.getAttribute('cm-marker');
        if (h) {
          var p = e.findMarks(ae(r, 0), ae(i + 1, 0), o(+h));
          return void (
            p.length &&
            (c = p[0].find(0)) &&
            a(ee(e.doc, c.from, c.to).join(f))
          );
        }
        if ('false' == t.getAttribute('contenteditable')) return;
        var g = /^(pre|div|p|li|table|br)$/i.test(t.nodeName);
        if (!/^br$/i.test(t.nodeName) && 0 == t.textContent.length) return;
        g && l();
        for (var m = 0; m < t.childNodes.length; m++) s(t.childNodes[m]);
        /^(pre|p)$/i.test(t.nodeName) && (d = !0), g && (u = !0);
      } else 3 == t.nodeType && a(t.nodeValue.replace(/\u200b/g, '').replace(/\u00a0/g, ' '));
    }
    for (var c = '', u = !1, f = e.doc.lineSeparator(), d = !1; s(t), t != n; )
      (t = t.nextSibling), (d = !1);
    return c;
  }
  function dl(e, t, n) {
    var r;
    if (t == e.display.lineDiv) {
      if (((r = e.display.lineDiv.childNodes[n]), !r))
        return ul(e.clipPos(ae(e.display.viewTo - 1)), !0);
      (t = null), (n = 0);
    } else
      for (r = t; ; r = r.parentNode) {
        if (!r || r == e.display.lineDiv) return null;
        if (r.parentNode && r.parentNode == e.display.lineDiv) break;
      }
    for (var i = 0; i < e.display.view.length; i++) {
      var o = e.display.view[i];
      if (o.node == r) return hl(o, t, n);
    }
  }
  function hl(e, t, n) {
    function r(t, n, r) {
      for (var i = -1; i < (f ? f.length : 0); i++)
        for (var o = i < 0 ? u.map : f[i], l = 0; l < o.length; l += 3) {
          var a = o[l + 2];
          if (a == t || a == n) {
            var s = re(i < 0 ? e.line : e.rest[i]),
              c = o[l] + r;
            return (r < 0 || a != t) && (c = o[l + (r ? 1 : 0)]), ae(s, c);
          }
        }
    }
    var i = e.text.firstChild,
      l = !1;
    if (!t || !o(i, t)) return ul(ae(re(e.line), 0), !0);
    if (t == i && ((l = !0), (t = i.childNodes[n]), (n = 0), !t)) {
      var a = e.rest ? g(e.rest) : e.line;
      return ul(ae(re(a), a.text.length), l);
    }
    var s = 3 == t.nodeType ? t : null,
      c = t;
    for (
      s ||
      1 != t.childNodes.length ||
      3 != t.firstChild.nodeType ||
      ((s = t.firstChild), n && (n = s.nodeValue.length));
      c.parentNode != i;

    )
      c = c.parentNode;
    var u = e.measure,
      f = u.maps,
      d = r(s, c, n);
    if (d) return ul(d, l);
    for (
      var h = c.nextSibling, p = s ? s.nodeValue.length - n : 0;
      h;
      h = h.nextSibling
    ) {
      if ((d = r(h, h.firstChild, 0))) return ul(ae(d.line, d.ch - p), l);
      p += h.textContent.length;
    }
    for (var m = c.previousSibling, v = n; m; m = m.previousSibling) {
      if ((d = r(m, m.firstChild, -1))) return ul(ae(d.line, d.ch + v), l);
      v += m.textContent.length;
    }
  }
  function pl(e, t) {
    function n() {
      e.value = c.getValue();
    }
    if (
      ((t = t ? u(t) : {}),
      (t.value = e.value),
      !t.tabindex && e.tabIndex && (t.tabindex = e.tabIndex),
      !t.placeholder && e.placeholder && (t.placeholder = e.placeholder),
      null == t.autofocus)
    ) {
      var r = l();
      t.autofocus =
        r == e || (null != e.getAttribute('autofocus') && r == document.body);
    }
    var i;
    if (e.form && (ra(e.form, 'submit', n), !t.leaveSubmitMethodAlone)) {
      var o = e.form;
      i = o.submit;
      try {
        var a = (o.submit = function () {
          n(), (o.submit = i), o.submit(), (o.submit = a);
        });
      } catch (s) {}
    }
    (t.finishInit = function (r) {
      (r.save = n),
        (r.getTextArea = function () {
          return e;
        }),
        (r.toTextArea = function () {
          (r.toTextArea = isNaN),
            n(),
            e.parentNode.removeChild(r.getWrapperElement()),
            (e.style.display = ''),
            e.form &&
              (A(e.form, 'submit', n),
              t.leaveSubmitMethodAlone ||
                'function' != typeof e.form.submit ||
                (e.form.submit = i));
        });
    }),
      (e.style.display = 'none');
    var c = Xo(function (t) {
      return e.parentNode.insertBefore(t, e.nextSibling);
    }, t);
    return c;
  }
  function gl(e) {
    (e.off = A),
      (e.on = ra),
      (e.wheelEventPixels = zr),
      (e.Doc = za),
      (e.splitLines = oa),
      (e.countColumn = f),
      (e.findColumn = h),
      (e.isWordChar = x),
      (e.Pass = _l),
      (e.signal = P),
      (e.Line = ya),
      (e.changeEnd = Gr),
      (e.scrollbarModel = Ma),
      (e.Pos = ae),
      (e.cmpPos = se),
      (e.modes = ca),
      (e.mimeModes = ua),
      (e.resolveMode = _),
      (e.getMode = $),
      (e.modeExtensions = fa),
      (e.extendMode = X),
      (e.copyState = Y),
      (e.startState = Q),
      (e.innerMode = Z),
      (e.commands = _a),
      (e.keyMap = Va),
      (e.keyName = fo),
      (e.isModifierKey = co),
      (e.lookupKey = so),
      (e.normalizeKeyMap = ao),
      (e.StringStream = da),
      (e.SharedTextMarker = Ia),
      (e.TextMarker = Ea),
      (e.LineWidget = Fa),
      (e.e_preventDefault = E),
      (e.e_stopPropagation = I),
      (e.e_stop = z),
      (e.addClass = a),
      (e.contains = o),
      (e.rmClass = jl),
      (e.keyNames = qa);
  }
  var ml = navigator.userAgent,
    vl = navigator.platform,
    yl = /gecko\/\d/i.test(ml),
    bl = /MSIE \d/.test(ml),
    xl = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ml),
    wl = /Edge\/(\d+)/.exec(ml),
    Cl = bl || xl || wl,
    kl = Cl && (bl ? document.documentMode || 6 : +(wl || xl)[1]),
    Sl = !wl && /WebKit\//.test(ml),
    Ll = Sl && /Qt\/\d+\.\d+/.test(ml),
    Tl = !wl && /Chrome\//.test(ml),
    Ml = /Opera\//.test(ml),
    Ol = /Apple Computer/.test(navigator.vendor),
    Nl = /Mac OS X 1\d\D([8-9]|\d\d)\D/.test(ml),
    Al = /PhantomJS/.test(ml),
    Pl = Ol && (/Mobile\/\w+/.test(ml) || navigator.maxTouchPoints > 2),
    Dl = /Android/.test(ml),
    Hl =
      Pl || Dl || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(ml),
    Fl = Pl || /Mac/.test(vl),
    Wl = /\bCrOS\b/.test(ml),
    El = /win/i.test(vl),
    Il = Ml && ml.match(/Version\/(\d*\.\d*)/);
  Il && (Il = Number(Il[1])), Il && Il >= 15 && ((Ml = !1), (Sl = !0));
  var Rl,
    zl = Fl && (Ll || (Ml && (null == Il || Il < 12.11))),
    Bl = yl || (Cl && kl >= 9),
    jl = function (t, n) {
      var r = t.className,
        i = e(n).exec(r);
      if (i) {
        var o = r.slice(i.index + i[0].length);
        t.className = r.slice(0, i.index) + (o ? i[1] + o : '');
      }
    };
  Rl = document.createRange
    ? function (e, t, n, r) {
        var i = document.createRange();
        return i.setEnd(r || e, n), i.setStart(e, t), i;
      }
    : function (e, t, n) {
        var r = document.body.createTextRange();
        try {
          r.moveToElementText(e.parentNode);
        } catch (i) {
          return r;
        }
        return (
          r.collapse(!0),
          r.moveEnd('character', n),
          r.moveStart('character', t),
          r
        );
      };
  var ql = function (e) {
    e.select();
  };
  Pl
    ? (ql = function (e) {
        (e.selectionStart = 0), (e.selectionEnd = e.value.length);
      })
    : Cl &&
      (ql = function (e) {
        try {
          e.select();
        } catch (t) {}
      });
  var Gl = function () {
    (this.id = null),
      (this.f = null),
      (this.time = 0),
      (this.handler = c(this.onTimeout, this));
  };
  (Gl.prototype.onTimeout = function (e) {
    (e.id = 0),
      e.time <= +new Date()
        ? e.f()
        : setTimeout(e.handler, e.time - +new Date());
  }),
    (Gl.prototype.set = function (e, t) {
      this.f = t;
      var n = +new Date() + e;
      (!this.id || n < this.time) &&
        (clearTimeout(this.id),
        (this.id = setTimeout(this.handler, e)),
        (this.time = n));
    });
  var Ul,
    Kl,
    Vl = 50,
    _l = {
      toString: function () {
        return 'CodeMirror.Pass';
      },
    },
    $l = { scroll: !1 },
    Xl = { origin: '*mouse' },
    Yl = { origin: '+move' },
    Zl = [''],
    Ql =
      /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,
    Jl =
      /[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,
    ea = null,
    ta = (function () {
      function e(e) {
        return e <= 247
          ? n.charAt(e)
          : 1424 <= e && e <= 1524
          ? 'R'
          : 1536 <= e && e <= 1785
          ? r.charAt(e - 1536)
          : 1774 <= e && e <= 2220
          ? 'r'
          : 8192 <= e && e <= 8203
          ? 'w'
          : 8204 == e
          ? 'b'
          : 'L';
      }
      function t(e, t, n) {
        (this.level = e), (this.from = t), (this.to = n);
      }
      var n =
          'bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN',
        r =
          'nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111',
        i = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,
        o = /[stwN]/,
        l = /[LRr]/,
        a = /[Lb1n]/,
        s = /[1n]/;
      return function (n, r) {
        var c = 'ltr' == r ? 'L' : 'R';
        if (0 == n.length || ('ltr' == r && !i.test(n))) return !1;
        for (var u = n.length, f = [], d = 0; d < u; ++d)
          f.push(e(n.charCodeAt(d)));
        for (var h = 0, p = c; h < u; ++h) {
          var m = f[h];
          'm' == m ? (f[h] = p) : (p = m);
        }
        for (var v = 0, y = c; v < u; ++v) {
          var b = f[v];
          '1' == b && 'r' == y
            ? (f[v] = 'n')
            : l.test(b) && ((y = b), 'r' == b && (f[v] = 'R'));
        }
        for (var x = 1, w = f[0]; x < u - 1; ++x) {
          var C = f[x];
          '+' == C && '1' == w && '1' == f[x + 1]
            ? (f[x] = '1')
            : ',' != C || w != f[x + 1] || ('1' != w && 'n' != w) || (f[x] = w),
            (w = C);
        }
        for (var k = 0; k < u; ++k) {
          var S = f[k];
          if (',' == S) f[k] = 'N';
          else if ('%' == S) {
            var L = void 0;
            for (L = k + 1; L < u && '%' == f[L]; ++L);
            for (
              var T =
                  (k && '!' == f[k - 1]) || (L < u && '1' == f[L]) ? '1' : 'N',
                M = k;
              M < L;
              ++M
            )
              f[M] = T;
            k = L - 1;
          }
        }
        for (var O = 0, N = c; O < u; ++O) {
          var A = f[O];
          'L' == N && '1' == A ? (f[O] = 'L') : l.test(A) && (N = A);
        }
        for (var P = 0; P < u; ++P)
          if (o.test(f[P])) {
            var D = void 0;
            for (D = P + 1; D < u && o.test(f[D]); ++D);
            for (
              var H = 'L' == (P ? f[P - 1] : c),
                F = 'L' == (D < u ? f[D] : c),
                W = H == F ? (H ? 'L' : 'R') : c,
                E = P;
              E < D;
              ++E
            )
              f[E] = W;
            P = D - 1;
          }
        for (var I, R = [], z = 0; z < u; )
          if (a.test(f[z])) {
            var B = z;
            for (++z; z < u && a.test(f[z]); ++z);
            R.push(new t(0, B, z));
          } else {
            var j = z,
              q = R.length,
              G = 'rtl' == r ? 1 : 0;
            for (++z; z < u && 'L' != f[z]; ++z);
            for (var U = j; U < z; )
              if (s.test(f[U])) {
                j < U && (R.splice(q, 0, new t(1, j, U)), (q += G));
                var K = U;
                for (++U; U < z && s.test(f[U]); ++U);
                R.splice(q, 0, new t(2, K, U)), (q += G), (j = U);
              } else ++U;
            j < z && R.splice(q, 0, new t(1, j, z));
          }
        return (
          'ltr' == r &&
            (1 == R[0].level &&
              (I = n.match(/^\s+/)) &&
              ((R[0].from = I[0].length), R.unshift(new t(0, 0, I[0].length))),
            1 == g(R).level &&
              (I = n.match(/\s+$/)) &&
              ((g(R).to -= I[0].length), R.push(new t(0, u - I[0].length, u)))),
          'rtl' == r ? R.reverse() : R
        );
      };
    })(),
    na = [],
    ra = function (e, t, n) {
      if (e.addEventListener) e.addEventListener(t, n, !1);
      else if (e.attachEvent) e.attachEvent('on' + t, n);
      else {
        var r = e._handlers || (e._handlers = {});
        r[t] = (r[t] || na).concat(n);
      }
    },
    ia = (function () {
      if (Cl && kl < 9) return !1;
      var e = r('div');
      return 'draggable' in e || 'dragDrop' in e;
    })(),
    oa =
      3 != '\n\nb'.split(/\n/).length
        ? function (e) {
            for (var t = 0, n = [], r = e.length; t <= r; ) {
              var i = e.indexOf('\n', t);
              i == -1 && (i = e.length);
              var o = e.slice(t, '\r' == e.charAt(i - 1) ? i - 1 : i),
                l = o.indexOf('\r');
              l != -1
                ? (n.push(o.slice(0, l)), (t += l + 1))
                : (n.push(o), (t = i + 1));
            }
            return n;
          }
        : function (e) {
            return e.split(/\r\n?|\n/);
          },
    la = window.getSelection
      ? function (e) {
          try {
            return e.selectionStart != e.selectionEnd;
          } catch (t) {
            return !1;
          }
        }
      : function (e) {
          var t;
          try {
            t = e.ownerDocument.selection.createRange();
          } catch (n) {}
          return (
            !(!t || t.parentElement() != e) &&
            0 != t.compareEndPoints('StartToEnd', t)
          );
        },
    aa = (function () {
      var e = r('div');
      return (
        'oncopy' in e ||
        (e.setAttribute('oncopy', 'return;'), 'function' == typeof e.oncopy)
      );
    })(),
    sa = null,
    ca = {},
    ua = {},
    fa = {},
    da = function (e, t, n) {
      (this.pos = this.start = 0),
        (this.string = e),
        (this.tabSize = t || 8),
        (this.lastColumnPos = this.lastColumnValue = 0),
        (this.lineStart = 0),
        (this.lineOracle = n);
    };
  (da.prototype.eol = function () {
    return this.pos >= this.string.length;
  }),
    (da.prototype.sol = function () {
      return this.pos == this.lineStart;
    }),
    (da.prototype.peek = function () {
      return this.string.charAt(this.pos) || void 0;
    }),
    (da.prototype.next = function () {
      if (this.pos < this.string.length) return this.string.charAt(this.pos++);
    }),
    (da.prototype.eat = function (e) {
      var t,
        n = this.string.charAt(this.pos);
      if (
        (t = 'string' == typeof e ? n == e : n && (e.test ? e.test(n) : e(n)))
      )
        return ++this.pos, n;
    }),
    (da.prototype.eatWhile = function (e) {
      for (var t = this.pos; this.eat(e); );
      return this.pos > t;
    }),
    (da.prototype.eatSpace = function () {
      for (var e = this.pos; /[\s\u00a0]/.test(this.string.charAt(this.pos)); )
        ++this.pos;
      return this.pos > e;
    }),
    (da.prototype.skipToEnd = function () {
      this.pos = this.string.length;
    }),
    (da.prototype.skipTo = function (e) {
      var t = this.string.indexOf(e, this.pos);
      if (t > -1) return (this.pos = t), !0;
    }),
    (da.prototype.backUp = function (e) {
      this.pos -= e;
    }),
    (da.prototype.column = function () {
      return (
        this.lastColumnPos < this.start &&
          ((this.lastColumnValue = f(
            this.string,
            this.start,
            this.tabSize,
            this.lastColumnPos,
            this.lastColumnValue
          )),
          (this.lastColumnPos = this.start)),
        this.lastColumnValue -
          (this.lineStart ? f(this.string, this.lineStart, this.tabSize) : 0)
      );
    }),
    (da.prototype.indentation = function () {
      return (
        f(this.string, null, this.tabSize) -
        (this.lineStart ? f(this.string, this.lineStart, this.tabSize) : 0)
      );
    }),
    (da.prototype.match = function (e, t, n) {
      if ('string' != typeof e) {
        var r = this.string.slice(this.pos).match(e);
        return r && r.index > 0
          ? null
          : (r && t !== !1 && (this.pos += r[0].length), r);
      }
      var i = function (e) {
          return n ? e.toLowerCase() : e;
        },
        o = this.string.substr(this.pos, e.length);
      if (i(o) == i(e)) return t !== !1 && (this.pos += e.length), !0;
    }),
    (da.prototype.current = function () {
      return this.string.slice(this.start, this.pos);
    }),
    (da.prototype.hideFirstChars = function (e, t) {
      this.lineStart += e;
      try {
        return t();
      } finally {
        this.lineStart -= e;
      }
    }),
    (da.prototype.lookAhead = function (e) {
      var t = this.lineOracle;
      return t && t.lookAhead(e);
    }),
    (da.prototype.baseToken = function () {
      var e = this.lineOracle;
      return e && e.baseToken(this.pos);
    });
  var ha = function (e, t) {
      (this.state = e), (this.lookAhead = t);
    },
    pa = function (e, t, n, r) {
      (this.state = t),
        (this.doc = e),
        (this.line = n),
        (this.maxLookAhead = r || 0),
        (this.baseTokens = null),
        (this.baseTokenPos = 1);
    };
  (pa.prototype.lookAhead = function (e) {
    var t = this.doc.getLine(this.line + e);
    return null != t && e > this.maxLookAhead && (this.maxLookAhead = e), t;
  }),
    (pa.prototype.baseToken = function (e) {
      if (!this.baseTokens) return null;
      for (; this.baseTokens[this.baseTokenPos] <= e; ) this.baseTokenPos += 2;
      var t = this.baseTokens[this.baseTokenPos + 1];
      return {
        type: t && t.replace(/( |^)overlay .*/, ''),
        size: this.baseTokens[this.baseTokenPos] - e,
      };
    }),
    (pa.prototype.nextLine = function () {
      this.line++, this.maxLookAhead > 0 && this.maxLookAhead--;
    }),
    (pa.fromSaved = function (e, t, n) {
      return t instanceof ha
        ? new pa(e, Y(e.mode, t.state), n, t.lookAhead)
        : new pa(e, Y(e.mode, t), n);
    }),
    (pa.prototype.save = function (e) {
      var t = e !== !1 ? Y(this.doc.mode, this.state) : this.state;
      return this.maxLookAhead > 0 ? new ha(t, this.maxLookAhead) : t;
    });
  var ga = function (e, t, n) {
      (this.start = e.start),
        (this.end = e.pos),
        (this.string = e.current()),
        (this.type = t || null),
        (this.state = n);
    },
    ma = !1,
    va = !1,
    ya = function (e, t, n) {
      (this.text = e), Be(this, t), (this.height = n ? n(this) : 1);
    };
  (ya.prototype.lineNo = function () {
    return re(this);
  }),
    W(ya);
  var ba,
    xa = {},
    wa = {},
    Ca = null,
    ka = null,
    Sa = { left: 0, right: 0, top: 0, bottom: 0 },
    La = function (e, t, n) {
      this.cm = n;
      var i = (this.vert = r(
          'div',
          [r('div', null, null, 'min-width: 1px')],
          'CodeMirror-vscrollbar'
        )),
        o = (this.horiz = r(
          'div',
          [r('div', null, null, 'height: 100%; min-height: 1px')],
          'CodeMirror-hscrollbar'
        ));
      (i.tabIndex = o.tabIndex = -1),
        e(i),
        e(o),
        ra(i, 'scroll', function () {
          i.clientHeight && t(i.scrollTop, 'vertical');
        }),
        ra(o, 'scroll', function () {
          o.clientWidth && t(o.scrollLeft, 'horizontal');
        }),
        (this.checkedZeroWidth = !1),
        Cl &&
          kl < 8 &&
          (this.horiz.style.minHeight = this.vert.style.minWidth = '18px');
    };
  (La.prototype.update = function (e) {
    var t = e.scrollWidth > e.clientWidth + 1,
      n = e.scrollHeight > e.clientHeight + 1,
      r = e.nativeBarWidth;
    if (n) {
      (this.vert.style.display = 'block'),
        (this.vert.style.bottom = t ? r + 'px' : '0');
      var i = e.viewHeight - (t ? r : 0);
      this.vert.firstChild.style.height =
        Math.max(0, e.scrollHeight - e.clientHeight + i) + 'px';
    } else
      (this.vert.style.display = ''), (this.vert.firstChild.style.height = '0');
    if (t) {
      (this.horiz.style.display = 'block'),
        (this.horiz.style.right = n ? r + 'px' : '0'),
        (this.horiz.style.left = e.barLeft + 'px');
      var o = e.viewWidth - e.barLeft - (n ? r : 0);
      this.horiz.firstChild.style.width =
        Math.max(0, e.scrollWidth - e.clientWidth + o) + 'px';
    } else
      (this.horiz.style.display = ''),
        (this.horiz.firstChild.style.width = '0');
    return (
      !this.checkedZeroWidth &&
        e.clientHeight > 0 &&
        (0 == r && this.zeroWidthHack(), (this.checkedZeroWidth = !0)),
      { right: n ? r : 0, bottom: t ? r : 0 }
    );
  }),
    (La.prototype.setScrollLeft = function (e) {
      this.horiz.scrollLeft != e && (this.horiz.scrollLeft = e),
        this.disableHoriz &&
          this.enableZeroWidthBar(this.horiz, this.disableHoriz, 'horiz');
    }),
    (La.prototype.setScrollTop = function (e) {
      this.vert.scrollTop != e && (this.vert.scrollTop = e),
        this.disableVert &&
          this.enableZeroWidthBar(this.vert, this.disableVert, 'vert');
    }),
    (La.prototype.zeroWidthHack = function () {
      var e = Fl && !Nl ? '12px' : '18px';
      (this.horiz.style.height = this.vert.style.width = e),
        (this.horiz.style.pointerEvents = this.vert.style.pointerEvents =
          'none'),
        (this.disableHoriz = new Gl()),
        (this.disableVert = new Gl());
    }),
    (La.prototype.enableZeroWidthBar = function (e, t, n) {
      function r() {
        var i = e.getBoundingClientRect(),
          o =
            'vert' == n
              ? document.elementFromPoint(i.right - 1, (i.top + i.bottom) / 2)
              : document.elementFromPoint((i.right + i.left) / 2, i.bottom - 1);
        o != e ? (e.style.pointerEvents = 'none') : t.set(1e3, r);
      }
      (e.style.pointerEvents = 'auto'), t.set(1e3, r);
    }),
    (La.prototype.clear = function () {
      var e = this.horiz.parentNode;
      e.removeChild(this.horiz), e.removeChild(this.vert);
    });
  var Ta = function () {};
  (Ta.prototype.update = function () {
    return { bottom: 0, right: 0 };
  }),
    (Ta.prototype.setScrollLeft = function () {}),
    (Ta.prototype.setScrollTop = function () {}),
    (Ta.prototype.clear = function () {});
  var Ma = { native: La, null: Ta },
    Oa = 0,
    Na = function (e, t, n) {
      var r = e.display;
      (this.viewport = t),
        (this.visible = Kn(r, e.doc, t)),
        (this.editorIsHidden = !r.wrapper.offsetWidth),
        (this.wrapperHeight = r.wrapper.clientHeight),
        (this.wrapperWidth = r.wrapper.clientWidth),
        (this.oldDisplayWidth = Bt(e)),
        (this.force = n),
        (this.dims = wn(e)),
        (this.events = []);
    };
  (Na.prototype.signal = function (e, t) {
    F(e, t) && this.events.push(arguments);
  }),
    (Na.prototype.finish = function () {
      for (var e = 0; e < this.events.length; e++)
        P.apply(null, this.events[e]);
    });
  var Aa = 0,
    Pa = null;
  Cl ? (Pa = -0.53) : yl ? (Pa = 15) : Tl ? (Pa = -0.7) : Ol && (Pa = -1 / 3);
  var Da = function (e, t) {
    (this.ranges = e), (this.primIndex = t);
  };
  (Da.prototype.primary = function () {
    return this.ranges[this.primIndex];
  }),
    (Da.prototype.equals = function (e) {
      if (e == this) return !0;
      if (
        e.primIndex != this.primIndex ||
        e.ranges.length != this.ranges.length
      )
        return !1;
      for (var t = 0; t < this.ranges.length; t++) {
        var n = this.ranges[t],
          r = e.ranges[t];
        if (!ce(n.anchor, r.anchor) || !ce(n.head, r.head)) return !1;
      }
      return !0;
    }),
    (Da.prototype.deepCopy = function () {
      for (var e = [], t = 0; t < this.ranges.length; t++)
        e[t] = new Ha(ue(this.ranges[t].anchor), ue(this.ranges[t].head));
      return new Da(e, this.primIndex);
    }),
    (Da.prototype.somethingSelected = function () {
      for (var e = 0; e < this.ranges.length; e++)
        if (!this.ranges[e].empty()) return !0;
      return !1;
    }),
    (Da.prototype.contains = function (e, t) {
      t || (t = e);
      for (var n = 0; n < this.ranges.length; n++) {
        var r = this.ranges[n];
        if (se(t, r.from()) >= 0 && se(e, r.to()) <= 0) return n;
      }
      return -1;
    });
  var Ha = function (e, t) {
    (this.anchor = e), (this.head = t);
  };
  (Ha.prototype.from = function () {
    return de(this.anchor, this.head);
  }),
    (Ha.prototype.to = function () {
      return fe(this.anchor, this.head);
    }),
    (Ha.prototype.empty = function () {
      return (
        this.head.line == this.anchor.line && this.head.ch == this.anchor.ch
      );
    }),
    (Gi.prototype = {
      chunkSize: function () {
        return this.lines.length;
      },
      removeInner: function (e, t) {
        for (var n = e, r = e + t; n < r; ++n) {
          var i = this.lines[n];
          (this.height -= i.height), lt(i), xt(i, 'delete');
        }
        this.lines.splice(e, t);
      },
      collapse: function (e) {
        e.push.apply(e, this.lines);
      },
      insertInner: function (e, t, n) {
        (this.height += n),
          (this.lines = this.lines
            .slice(0, e)
            .concat(t)
            .concat(this.lines.slice(e)));
        for (var r = 0; r < t.length; ++r) t[r].parent = this;
      },
      iterN: function (e, t, n) {
        for (var r = e + t; e < r; ++e) if (n(this.lines[e])) return !0;
      },
    }),
    (Ui.prototype = {
      chunkSize: function () {
        return this.size;
      },
      removeInner: function (e, t) {
        this.size -= t;
        for (var n = 0; n < this.children.length; ++n) {
          var r = this.children[n],
            i = r.chunkSize();
          if (e < i) {
            var o = Math.min(t, i - e),
              l = r.height;
            if (
              (r.removeInner(e, o),
              (this.height -= l - r.height),
              i == o && (this.children.splice(n--, 1), (r.parent = null)),
              0 == (t -= o))
            )
              break;
            e = 0;
          } else e -= i;
        }
        if (
          this.size - t < 25 &&
          (this.children.length > 1 || !(this.children[0] instanceof Gi))
        ) {
          var a = [];
          this.collapse(a),
            (this.children = [new Gi(a)]),
            (this.children[0].parent = this);
        }
      },
      collapse: function (e) {
        for (var t = 0; t < this.children.length; ++t)
          this.children[t].collapse(e);
      },
      insertInner: function (e, t, n) {
        (this.size += t.length), (this.height += n);
        for (var r = 0; r < this.children.length; ++r) {
          var i = this.children[r],
            o = i.chunkSize();
          if (e <= o) {
            if ((i.insertInner(e, t, n), i.lines && i.lines.length > 50)) {
              for (
                var l = (i.lines.length % 25) + 25, a = l;
                a < i.lines.length;

              ) {
                var s = new Gi(i.lines.slice(a, (a += 25)));
                (i.height -= s.height),
                  this.children.splice(++r, 0, s),
                  (s.parent = this);
              }
              (i.lines = i.lines.slice(0, l)), this.maybeSpill();
            }
            break;
          }
          e -= o;
        }
      },
      maybeSpill: function () {
        if (!(this.children.length <= 10)) {
          var e = this;
          do {
            var t = e.children.splice(e.children.length - 5, 5),
              n = new Ui(t);
            if (e.parent) {
              (e.size -= n.size), (e.height -= n.height);
              var r = d(e.parent.children, e);
              e.parent.children.splice(r + 1, 0, n);
            } else {
              var i = new Ui(e.children);
              (i.parent = e), (e.children = [i, n]), (e = i);
            }
            n.parent = e.parent;
          } while (e.children.length > 10);
          e.parent.maybeSpill();
        }
      },
      iterN: function (e, t, n) {
        for (var r = 0; r < this.children.length; ++r) {
          var i = this.children[r],
            o = i.chunkSize();
          if (e < o) {
            var l = Math.min(t, o - e);
            if (i.iterN(e, l, n)) return !0;
            if (0 == (t -= l)) break;
            e = 0;
          } else e -= o;
        }
      },
    });
  var Fa = function (e, t, n) {
    if (n) for (var r in n) n.hasOwnProperty(r) && (this[r] = n[r]);
    (this.doc = e), (this.node = t);
  };
  (Fa.prototype.clear = function () {
    var e = this.doc.cm,
      t = this.line.widgets,
      n = this.line,
      r = re(n);
    if (null != r && t) {
      for (var i = 0; i < t.length; ++i) t[i] == this && t.splice(i--, 1);
      t.length || (n.widgets = null);
      var o = Ft(this);
      ne(n, Math.max(0, n.height - o)),
        e &&
          (vr(e, function () {
            Ki(e, n, -o), On(e, r, 'widget');
          }),
          xt(e, 'lineWidgetCleared', e, this, r));
    }
  }),
    (Fa.prototype.changed = function () {
      var e = this,
        t = this.height,
        n = this.doc.cm,
        r = this.line;
      this.height = null;
      var i = Ft(this) - t;
      i &&
        (et(this.doc, r) || ne(r, r.height + i),
        n &&
          vr(n, function () {
            (n.curOp.forceUpdate = !0),
              Ki(n, r, i),
              xt(n, 'lineWidgetChanged', n, e, re(r));
          }));
    }),
    W(Fa);
  var Wa = 0,
    Ea = function (e, t) {
      (this.lines = []), (this.type = t), (this.doc = e), (this.id = ++Wa);
    };
  (Ea.prototype.clear = function () {
    if (!this.explicitlyCleared) {
      var e = this.doc.cm,
        t = e && !e.curOp;
      if ((t && cr(e), F(this, 'clear'))) {
        var n = this.find();
        n && xt(this, 'clear', n.from, n.to);
      }
      for (var r = null, i = null, o = 0; o < this.lines.length; ++o) {
        var l = this.lines[o],
          a = Pe(l.markedSpans, this);
        e && !this.collapsed
          ? On(e, re(l), 'text')
          : e && (null != a.to && (i = re(l)), null != a.from && (r = re(l))),
          (l.markedSpans = De(l.markedSpans, a)),
          null == a.from &&
            this.collapsed &&
            !et(this.doc, l) &&
            e &&
            ne(l, bn(e.display));
      }
      if (e && this.collapsed && !e.options.lineWrapping)
        for (var s = 0; s < this.lines.length; ++s) {
          var c = Xe(this.lines[s]),
            u = rt(c);
          u > e.display.maxLineLength &&
            ((e.display.maxLine = c),
            (e.display.maxLineLength = u),
            (e.display.maxLineChanged = !0));
        }
      null != r && e && this.collapsed && Mn(e, r, i + 1),
        (this.lines.length = 0),
        (this.explicitlyCleared = !0),
        this.atomic &&
          this.doc.cantEdit &&
          ((this.doc.cantEdit = !1), e && Li(e.doc)),
        e && xt(e, 'markerCleared', e, this, r, i),
        t && ur(e),
        this.parent && this.parent.clear();
    }
  }),
    (Ea.prototype.find = function (e, t) {
      null == e && 'bookmark' == this.type && (e = 1);
      for (var n, r, i = 0; i < this.lines.length; ++i) {
        var o = this.lines[i],
          l = Pe(o.markedSpans, this);
        if (null != l.from && ((n = ae(t ? o : re(o), l.from)), e == -1))
          return n;
        if (null != l.to && ((r = ae(t ? o : re(o), l.to)), 1 == e)) return r;
      }
      return n && { from: n, to: r };
    }),
    (Ea.prototype.changed = function () {
      var e = this,
        t = this.find(-1, !0),
        n = this,
        r = this.doc.cm;
      t &&
        r &&
        vr(r, function () {
          var i = t.line,
            o = re(t.line),
            l = Vt(r, o);
          if (
            (l &&
              (Jt(l), (r.curOp.selectionChanged = r.curOp.forceUpdate = !0)),
            (r.curOp.updateMaxLine = !0),
            !et(n.doc, i) && null != n.height)
          ) {
            var a = n.height;
            n.height = null;
            var s = Ft(n) - a;
            s && ne(i, i.height + s);
          }
          xt(r, 'markerChanged', r, e);
        });
    }),
    (Ea.prototype.attachLine = function (e) {
      if (!this.lines.length && this.doc.cm) {
        var t = this.doc.cm.curOp;
        (t.maybeHiddenMarkers && d(t.maybeHiddenMarkers, this) != -1) ||
          (t.maybeUnhiddenMarkers || (t.maybeUnhiddenMarkers = [])).push(this);
      }
      this.lines.push(e);
    }),
    (Ea.prototype.detachLine = function (e) {
      if (
        (this.lines.splice(d(this.lines, e), 1),
        !this.lines.length && this.doc.cm)
      ) {
        var t = this.doc.cm.curOp;
        (t.maybeHiddenMarkers || (t.maybeHiddenMarkers = [])).push(this);
      }
    }),
    W(Ea);
  var Ia = function (e, t) {
    (this.markers = e), (this.primary = t);
    for (var n = 0; n < e.length; ++n) e[n].parent = this;
  };
  (Ia.prototype.clear = function () {
    if (!this.explicitlyCleared) {
      this.explicitlyCleared = !0;
      for (var e = 0; e < this.markers.length; ++e) this.markers[e].clear();
      xt(this, 'clear');
    }
  }),
    (Ia.prototype.find = function (e, t) {
      return this.primary.find(e, t);
    }),
    W(Ia);
  var Ra = 0,
    za = function (e, t, n, r, i) {
      if (!(this instanceof za)) return new za(e, t, n, r, i);
      null == n && (n = 0),
        Ui.call(this, [new Gi([new ya('', null)])]),
        (this.first = n),
        (this.scrollTop = this.scrollLeft = 0),
        (this.cantEdit = !1),
        (this.cleanGeneration = 1),
        (this.modeFrontier = this.highlightFrontier = n);
      var o = ae(n, 0);
      (this.sel = qr(o)),
        (this.history = new ni(null)),
        (this.id = ++Ra),
        (this.modeOption = t),
        (this.lineSep = r),
        (this.direction = 'rtl' == i ? 'rtl' : 'ltr'),
        (this.extend = !1),
        'string' == typeof e && (e = this.splitLines(e)),
        Zr(this, { from: o, to: o, text: e }),
        Ci(this, qr(o), $l);
    };
  (za.prototype = b(Ui.prototype, {
    constructor: za,
    iter: function (e, t, n) {
      n
        ? this.iterN(e - this.first, t - e, n)
        : this.iterN(this.first, this.first + this.size, e);
    },
    insert: function (e, t) {
      for (var n = 0, r = 0; r < t.length; ++r) n += t[r].height;
      this.insertInner(e - this.first, t, n);
    },
    remove: function (e, t) {
      this.removeInner(e - this.first, t);
    },
    getValue: function (e) {
      var t = te(this, this.first, this.first + this.size);
      return e === !1 ? t : t.join(e || this.lineSeparator());
    },
    setValue: xr(function (e) {
      var t = ae(this.first, 0),
        n = this.first + this.size - 1;
      Di(
        this,
        {
          from: t,
          to: ae(n, J(this, n).text.length),
          text: this.splitLines(e),
          origin: 'setValue',
          full: !0,
        },
        !0
      ),
        this.cm && Qn(this.cm, 0, 0),
        Ci(this, qr(t), $l);
    }),
    replaceRange: function (e, t, n, r) {
      (t = pe(this, t)), (n = n ? pe(this, n) : t), Ri(this, e, t, n, r);
    },
    getRange: function (e, t, n) {
      var r = ee(this, pe(this, e), pe(this, t));
      return n === !1
        ? r
        : '' === n
        ? r.join('')
        : r.join(n || this.lineSeparator());
    },
    getLine: function (e) {
      var t = this.getLineHandle(e);
      return t && t.text;
    },
    getLineHandle: function (e) {
      if (oe(this, e)) return J(this, e);
    },
    getLineNumber: function (e) {
      return re(e);
    },
    getLineHandleVisualStart: function (e) {
      return 'number' == typeof e && (e = J(this, e)), Xe(e);
    },
    lineCount: function () {
      return this.size;
    },
    firstLine: function () {
      return this.first;
    },
    lastLine: function () {
      return this.first + this.size - 1;
    },
    clipPos: function (e) {
      return pe(this, e);
    },
    getCursor: function (e) {
      var t,
        n = this.sel.primary();
      return (t =
        null == e || 'head' == e
          ? n.head
          : 'anchor' == e
          ? n.anchor
          : 'end' == e || 'to' == e || e === !1
          ? n.to()
          : n.from());
    },
    listSelections: function () {
      return this.sel.ranges;
    },
    somethingSelected: function () {
      return this.sel.somethingSelected();
    },
    setCursor: xr(function (e, t, n) {
      bi(this, pe(this, 'number' == typeof e ? ae(e, t || 0) : e), null, n);
    }),
    setSelection: xr(function (e, t, n) {
      bi(this, pe(this, e), pe(this, t || e), n);
    }),
    extendSelection: xr(function (e, t, n) {
      mi(this, pe(this, e), t && pe(this, t), n);
    }),
    extendSelections: xr(function (e, t) {
      vi(this, me(this, e), t);
    }),
    extendSelectionsBy: xr(function (e, t) {
      var n = m(this.sel.ranges, e);
      vi(this, me(this, n), t);
    }),
    setSelections: xr(function (e, t, n) {
      if (e.length) {
        for (var r = [], i = 0; i < e.length; i++)
          r[i] = new Ha(
            pe(this, e[i].anchor),
            pe(this, e[i].head || e[i].anchor)
          );
        null == t && (t = Math.min(e.length - 1, this.sel.primIndex)),
          Ci(this, jr(this.cm, r, t), n);
      }
    }),
    addSelection: xr(function (e, t, n) {
      var r = this.sel.ranges.slice(0);
      r.push(new Ha(pe(this, e), pe(this, t || e))),
        Ci(this, jr(this.cm, r, r.length - 1), n);
    }),
    getSelection: function (e) {
      for (var t, n = this.sel.ranges, r = 0; r < n.length; r++) {
        var i = ee(this, n[r].from(), n[r].to());
        t = t ? t.concat(i) : i;
      }
      return e === !1 ? t : t.join(e || this.lineSeparator());
    },
    getSelections: function (e) {
      for (var t = [], n = this.sel.ranges, r = 0; r < n.length; r++) {
        var i = ee(this, n[r].from(), n[r].to());
        e !== !1 && (i = i.join(e || this.lineSeparator())), (t[r] = i);
      }
      return t;
    },
    replaceSelection: function (e, t, n) {
      for (var r = [], i = 0; i < this.sel.ranges.length; i++) r[i] = e;
      this.replaceSelections(r, t, n || '+input');
    },
    replaceSelections: xr(function (e, t, n) {
      for (var r = [], i = this.sel, o = 0; o < i.ranges.length; o++) {
        var l = i.ranges[o];
        r[o] = {
          from: l.from(),
          to: l.to(),
          text: this.splitLines(e[o]),
          origin: n,
        };
      }
      for (
        var a = t && 'end' != t && _r(this, r, t), s = r.length - 1;
        s >= 0;
        s--
      )
        Di(this, r[s]);
      a ? wi(this, a) : this.cm && Zn(this.cm);
    }),
    undo: xr(function () {
      Fi(this, 'undo');
    }),
    redo: xr(function () {
      Fi(this, 'redo');
    }),
    undoSelection: xr(function () {
      Fi(this, 'undo', !0);
    }),
    redoSelection: xr(function () {
      Fi(this, 'redo', !0);
    }),
    setExtending: function (e) {
      this.extend = e;
    },
    getExtending: function () {
      return this.extend;
    },
    historySize: function () {
      for (var e = this.history, t = 0, n = 0, r = 0; r < e.done.length; r++)
        e.done[r].ranges || ++t;
      for (var i = 0; i < e.undone.length; i++) e.undone[i].ranges || ++n;
      return { undo: t, redo: n };
    },
    clearHistory: function () {
      var e = this;
      (this.history = new ni(this.history)),
        Qr(
          this,
          function (t) {
            return (t.history = e.history);
          },
          !0
        );
    },
    markClean: function () {
      this.cleanGeneration = this.changeGeneration(!0);
    },
    changeGeneration: function (e) {
      return (
        e &&
          (this.history.lastOp =
            this.history.lastSelOp =
            this.history.lastOrigin =
              null),
        this.history.generation
      );
    },
    isClean: function (e) {
      return this.history.generation == (e || this.cleanGeneration);
    },
    getHistory: function () {
      return { done: pi(this.history.done), undone: pi(this.history.undone) };
    },
    setHistory: function (e) {
      var t = (this.history = new ni(this.history));
      (t.done = pi(e.done.slice(0), null, !0)),
        (t.undone = pi(e.undone.slice(0), null, !0));
    },
    setGutterMarker: xr(function (e, t, n) {
      return qi(this, e, 'gutter', function (e) {
        var r = e.gutterMarkers || (e.gutterMarkers = {});
        return (r[t] = n), !n && C(r) && (e.gutterMarkers = null), !0;
      });
    }),
    clearGutter: xr(function (e) {
      var t = this;
      this.iter(function (n) {
        n.gutterMarkers &&
          n.gutterMarkers[e] &&
          qi(t, n, 'gutter', function () {
            return (
              (n.gutterMarkers[e] = null),
              C(n.gutterMarkers) && (n.gutterMarkers = null),
              !0
            );
          });
      });
    }),
    lineInfo: function (e) {
      var t;
      if ('number' == typeof e) {
        if (!oe(this, e)) return null;
        if (((t = e), (e = J(this, e)), !e)) return null;
      } else if (((t = re(e)), null == t)) return null;
      return {
        line: t,
        handle: e,
        text: e.text,
        gutterMarkers: e.gutterMarkers,
        textClass: e.textClass,
        bgClass: e.bgClass,
        wrapClass: e.wrapClass,
        widgets: e.widgets,
      };
    },
    addLineClass: xr(function (t, n, r) {
      return qi(this, t, 'gutter' == n ? 'gutter' : 'class', function (t) {
        var i =
          'text' == n
            ? 'textClass'
            : 'background' == n
            ? 'bgClass'
            : 'gutter' == n
            ? 'gutterClass'
            : 'wrapClass';
        if (t[i]) {
          if (e(r).test(t[i])) return !1;
          t[i] += ' ' + r;
        } else t[i] = r;
        return !0;
      });
    }),
    removeLineClass: xr(function (t, n, r) {
      return qi(this, t, 'gutter' == n ? 'gutter' : 'class', function (t) {
        var i =
            'text' == n
              ? 'textClass'
              : 'background' == n
              ? 'bgClass'
              : 'gutter' == n
              ? 'gutterClass'
              : 'wrapClass',
          o = t[i];
        if (!o) return !1;
        if (null == r) t[i] = null;
        else {
          var l = o.match(e(r));
          if (!l) return !1;
          var a = l.index + l[0].length;
          t[i] =
            o.slice(0, l.index) +
              (l.index && a != o.length ? ' ' : '') +
              o.slice(a) || null;
        }
        return !0;
      });
    }),
    addLineWidget: xr(function (e, t, n) {
      return Vi(this, e, t, n);
    }),
    removeLineWidget: function (e) {
      e.clear();
    },
    markText: function (e, t, n) {
      return _i(this, pe(this, e), pe(this, t), n, (n && n.type) || 'range');
    },
    setBookmark: function (e, t) {
      var n = {
        replacedWith: t && (null == t.nodeType ? t.widget : t),
        insertLeft: t && t.insertLeft,
        clearWhenEmpty: !1,
        shared: t && t.shared,
        handleMouseEvents: t && t.handleMouseEvents,
      };
      return (e = pe(this, e)), _i(this, e, e, n, 'bookmark');
    },
    findMarksAt: function (e) {
      e = pe(this, e);
      var t = [],
        n = J(this, e.line).markedSpans;
      if (n)
        for (var r = 0; r < n.length; ++r) {
          var i = n[r];
          (null == i.from || i.from <= e.ch) &&
            (null == i.to || i.to >= e.ch) &&
            t.push(i.marker.parent || i.marker);
        }
      return t;
    },
    findMarks: function (e, t, n) {
      (e = pe(this, e)), (t = pe(this, t));
      var r = [],
        i = e.line;
      return (
        this.iter(e.line, t.line + 1, function (o) {
          var l = o.markedSpans;
          if (l)
            for (var a = 0; a < l.length; a++) {
              var s = l[a];
              (null != s.to && i == e.line && e.ch >= s.to) ||
                (null == s.from && i != e.line) ||
                (null != s.from && i == t.line && s.from >= t.ch) ||
                (n && !n(s.marker)) ||
                r.push(s.marker.parent || s.marker);
            }
          ++i;
        }),
        r
      );
    },
    getAllMarks: function () {
      var e = [];
      return (
        this.iter(function (t) {
          var n = t.markedSpans;
          if (n)
            for (var r = 0; r < n.length; ++r)
              null != n[r].from && e.push(n[r].marker);
        }),
        e
      );
    },
    posFromIndex: function (e) {
      var t,
        n = this.first,
        r = this.lineSeparator().length;
      return (
        this.iter(function (i) {
          var o = i.text.length + r;
          return o > e ? ((t = e), !0) : ((e -= o), void ++n);
        }),
        pe(this, ae(n, t))
      );
    },
    indexFromPos: function (e) {
      e = pe(this, e);
      var t = e.ch;
      if (e.line < this.first || e.ch < 0) return 0;
      var n = this.lineSeparator().length;
      return (
        this.iter(this.first, e.line, function (e) {
          t += e.text.length + n;
        }),
        t
      );
    },
    copy: function (e) {
      var t = new za(
        te(this, this.first, this.first + this.size),
        this.modeOption,
        this.first,
        this.lineSep,
        this.direction
      );
      return (
        (t.scrollTop = this.scrollTop),
        (t.scrollLeft = this.scrollLeft),
        (t.sel = this.sel),
        (t.extend = !1),
        e &&
          ((t.history.undoDepth = this.history.undoDepth),
          t.setHistory(this.getHistory())),
        t
      );
    },
    linkedDoc: function (e) {
      e || (e = {});
      var t = this.first,
        n = this.first + this.size;
      null != e.from && e.from > t && (t = e.from),
        null != e.to && e.to < n && (n = e.to);
      var r = new za(
        te(this, t, n),
        e.mode || this.modeOption,
        t,
        this.lineSep,
        this.direction
      );
      return (
        e.sharedHist && (r.history = this.history),
        (this.linked || (this.linked = [])).push({
          doc: r,
          sharedHist: e.sharedHist,
        }),
        (r.linked = [{ doc: this, isParent: !0, sharedHist: e.sharedHist }]),
        Yi(r, Xi(this)),
        r
      );
    },
    unlinkDoc: function (e) {
      if ((e instanceof Xo && (e = e.doc), this.linked))
        for (var t = 0; t < this.linked.length; ++t) {
          var n = this.linked[t];
          if (n.doc == e) {
            this.linked.splice(t, 1), e.unlinkDoc(this), Zi(Xi(this));
            break;
          }
        }
      if (e.history == this.history) {
        var r = [e.id];
        Qr(
          e,
          function (e) {
            return r.push(e.id);
          },
          !0
        ),
          (e.history = new ni(null)),
          (e.history.done = pi(this.history.done, r)),
          (e.history.undone = pi(this.history.undone, r));
      }
    },
    iterLinkedDocs: function (e) {
      Qr(this, e);
    },
    getMode: function () {
      return this.mode;
    },
    getEditor: function () {
      return this.cm;
    },
    splitLines: function (e) {
      return this.lineSep ? e.split(this.lineSep) : oa(e);
    },
    lineSeparator: function () {
      return this.lineSep || '\n';
    },
    setDirection: xr(function (e) {
      'rtl' != e && (e = 'ltr'),
        e != this.direction &&
          ((this.direction = e),
          this.iter(function (e) {
            return (e.order = null);
          }),
          this.cm && ti(this.cm));
    }),
  })),
    (za.prototype.eachLine = za.prototype.iter);
  for (
    var Ba = 0,
      ja = !1,
      qa = {
        3: 'Pause',
        8: 'Backspace',
        9: 'Tab',
        13: 'Enter',
        16: 'Shift',
        17: 'Ctrl',
        18: 'Alt',
        19: 'Pause',
        20: 'CapsLock',
        27: 'Esc',
        32: 'Space',
        33: 'PageUp',
        34: 'PageDown',
        35: 'End',
        36: 'Home',
        37: 'Left',
        38: 'Up',
        39: 'Right',
        40: 'Down',
        44: 'PrintScrn',
        45: 'Insert',
        46: 'Delete',
        59: ';',
        61: '=',
        91: 'Mod',
        92: 'Mod',
        93: 'Mod',
        106: '*',
        107: '=',
        109: '-',
        110: '.',
        111: '/',
        145: 'ScrollLock',
        173: '-',
        186: ';',
        187: '=',
        188: ',',
        189: '-',
        190: '.',
        191: '/',
        192: '`',
        219: '[',
        220: '\\',
        221: ']',
        222: "'",
        224: 'Mod',
        63232: 'Up',
        63233: 'Down',
        63234: 'Left',
        63235: 'Right',
        63272: 'Delete',
        63273: 'Home',
        63275: 'End',
        63276: 'PageUp',
        63277: 'PageDown',
        63302: 'Insert',
      },
      Ga = 0;
    Ga < 10;
    Ga++
  )
    qa[Ga + 48] = qa[Ga + 96] = String(Ga);
  for (var Ua = 65; Ua <= 90; Ua++) qa[Ua] = String.fromCharCode(Ua);
  for (var Ka = 1; Ka <= 12; Ka++) qa[Ka + 111] = qa[Ka + 63235] = 'F' + Ka;
  var Va = {};
  (Va.basic = {
    Left: 'goCharLeft',
    Right: 'goCharRight',
    Up: 'goLineUp',
    Down: 'goLineDown',
    End: 'goLineEnd',
    Home: 'goLineStartSmart',
    PageUp: 'goPageUp',
    PageDown: 'goPageDown',
    Delete: 'delCharAfter',
    Backspace: 'delCharBefore',
    'Shift-Backspace': 'delCharBefore',
    Tab: 'defaultTab',
    'Shift-Tab': 'indentAuto',
    Enter: 'newlineAndIndent',
    Insert: 'toggleOverwrite',
    Esc: 'singleSelection',
  }),
    (Va.pcDefault = {
      'Ctrl-A': 'selectAll',
      'Ctrl-D': 'deleteLine',
      'Ctrl-Z': 'undo',
      'Shift-Ctrl-Z': 'redo',
      'Ctrl-Y': 'redo',
      'Ctrl-Home': 'goDocStart',
      'Ctrl-End': 'goDocEnd',
      'Ctrl-Up': 'goLineUp',
      'Ctrl-Down': 'goLineDown',
      'Ctrl-Left': 'goGroupLeft',
      'Ctrl-Right': 'goGroupRight',
      'Alt-Left': 'goLineStart',
      'Alt-Right': 'goLineEnd',
      'Ctrl-Backspace': 'delGroupBefore',
      'Ctrl-Delete': 'delGroupAfter',
      'Ctrl-S': 'save',
      'Ctrl-F': 'find',
      'Ctrl-G': 'findNext',
      'Shift-Ctrl-G': 'findPrev',
      'Shift-Ctrl-F': 'replace',
      'Shift-Ctrl-R': 'replaceAll',
      'Ctrl-[': 'indentLess',
      'Ctrl-]': 'indentMore',
      'Ctrl-U': 'undoSelection',
      'Shift-Ctrl-U': 'redoSelection',
      'Alt-U': 'redoSelection',
      fallthrough: 'basic',
    }),
    (Va.emacsy = {
      'Ctrl-F': 'goCharRight',
      'Ctrl-B': 'goCharLeft',
      'Ctrl-P': 'goLineUp',
      'Ctrl-N': 'goLineDown',
      'Ctrl-A': 'goLineStart',
      'Ctrl-E': 'goLineEnd',
      'Ctrl-V': 'goPageDown',
      'Shift-Ctrl-V': 'goPageUp',
      'Ctrl-D': 'delCharAfter',
      'Ctrl-H': 'delCharBefore',
      'Alt-Backspace': 'delWordBefore',
      'Ctrl-K': 'killLine',
      'Ctrl-T': 'transposeChars',
      'Ctrl-O': 'openLine',
    }),
    (Va.macDefault = {
      'Cmd-A': 'selectAll',
      'Cmd-D': 'deleteLine',
      'Cmd-Z': 'undo',
      'Shift-Cmd-Z': 'redo',
      'Cmd-Y': 'redo',
      'Cmd-Home': 'goDocStart',
      'Cmd-Up': 'goDocStart',
      'Cmd-End': 'goDocEnd',
      'Cmd-Down': 'goDocEnd',
      'Alt-Left': 'goGroupLeft',
      'Alt-Right': 'goGroupRight',
      'Cmd-Left': 'goLineLeft',
      'Cmd-Right': 'goLineRight',
      'Alt-Backspace': 'delGroupBefore',
      'Ctrl-Alt-Backspace': 'delGroupAfter',
      'Alt-Delete': 'delGroupAfter',
      'Cmd-S': 'save',
      'Cmd-F': 'find',
      'Cmd-G': 'findNext',
      'Shift-Cmd-G': 'findPrev',
      'Cmd-Alt-F': 'replace',
      'Shift-Cmd-Alt-F': 'replaceAll',
      'Cmd-[': 'indentLess',
      'Cmd-]': 'indentMore',
      'Cmd-Backspace': 'delWrappedLineLeft',
      'Cmd-Delete': 'delWrappedLineRight',
      'Cmd-U': 'undoSelection',
      'Shift-Cmd-U': 'redoSelection',
      'Ctrl-Up': 'goDocStart',
      'Ctrl-Down': 'goDocEnd',
      fallthrough: ['basic', 'emacsy'],
    }),
    (Va['default'] = Fl ? Va.macDefault : Va.pcDefault);
  var _a = {
      selectAll: Ai,
      singleSelection: function (e) {
        return e.setSelection(e.getCursor('anchor'), e.getCursor('head'), $l);
      },
      killLine: function (e) {
        return po(e, function (t) {
          if (t.empty()) {
            var n = J(e.doc, t.head.line).text.length;
            return t.head.ch == n && t.head.line < e.lastLine()
              ? { from: t.head, to: ae(t.head.line + 1, 0) }
              : { from: t.head, to: ae(t.head.line, n) };
          }
          return { from: t.from(), to: t.to() };
        });
      },
      deleteLine: function (e) {
        return po(e, function (t) {
          return {
            from: ae(t.from().line, 0),
            to: pe(e.doc, ae(t.to().line + 1, 0)),
          };
        });
      },
      delLineLeft: function (e) {
        return po(e, function (e) {
          return { from: ae(e.from().line, 0), to: e.from() };
        });
      },
      delWrappedLineLeft: function (e) {
        return po(e, function (t) {
          var n = e.charCoords(t.head, 'div').top + 5,
            r = e.coordsChar({ left: 0, top: n }, 'div');
          return { from: r, to: t.from() };
        });
      },
      delWrappedLineRight: function (e) {
        return po(e, function (t) {
          var n = e.charCoords(t.head, 'div').top + 5,
            r = e.coordsChar(
              { left: e.display.lineDiv.offsetWidth + 100, top: n },
              'div'
            );
          return { from: t.from(), to: r };
        });
      },
      undo: function (e) {
        return e.undo();
      },
      redo: function (e) {
        return e.redo();
      },
      undoSelection: function (e) {
        return e.undoSelection();
      },
      redoSelection: function (e) {
        return e.redoSelection();
      },
      goDocStart: function (e) {
        return e.extendSelection(ae(e.firstLine(), 0));
      },
      goDocEnd: function (e) {
        return e.extendSelection(ae(e.lastLine()));
      },
      goLineStart: function (e) {
        return e.extendSelectionsBy(
          function (t) {
            return bo(e, t.head.line);
          },
          { origin: '+move', bias: 1 }
        );
      },
      goLineStartSmart: function (e) {
        return e.extendSelectionsBy(
          function (t) {
            return wo(e, t.head);
          },
          { origin: '+move', bias: 1 }
        );
      },
      goLineEnd: function (e) {
        return e.extendSelectionsBy(
          function (t) {
            return xo(e, t.head.line);
          },
          { origin: '+move', bias: -1 }
        );
      },
      goLineRight: function (e) {
        return e.extendSelectionsBy(function (t) {
          var n = e.cursorCoords(t.head, 'div').top + 5;
          return e.coordsChar(
            { left: e.display.lineDiv.offsetWidth + 100, top: n },
            'div'
          );
        }, Yl);
      },
      goLineLeft: function (e) {
        return e.extendSelectionsBy(function (t) {
          var n = e.cursorCoords(t.head, 'div').top + 5;
          return e.coordsChar({ left: 0, top: n }, 'div');
        }, Yl);
      },
      goLineLeftSmart: function (e) {
        return e.extendSelectionsBy(function (t) {
          var n = e.cursorCoords(t.head, 'div').top + 5,
            r = e.coordsChar({ left: 0, top: n }, 'div');
          return r.ch < e.getLine(r.line).search(/\S/) ? wo(e, t.head) : r;
        }, Yl);
      },
      goLineUp: function (e) {
        return e.moveV(-1, 'line');
      },
      goLineDown: function (e) {
        return e.moveV(1, 'line');
      },
      goPageUp: function (e) {
        return e.moveV(-1, 'page');
      },
      goPageDown: function (e) {
        return e.moveV(1, 'page');
      },
      goCharLeft: function (e) {
        return e.moveH(-1, 'char');
      },
      goCharRight: function (e) {
        return e.moveH(1, 'char');
      },
      goColumnLeft: function (e) {
        return e.moveH(-1, 'column');
      },
      goColumnRight: function (e) {
        return e.moveH(1, 'column');
      },
      goWordLeft: function (e) {
        return e.moveH(-1, 'word');
      },
      goGroupRight: function (e) {
        return e.moveH(1, 'group');
      },
      goGroupLeft: function (e) {
        return e.moveH(-1, 'group');
      },
      goWordRight: function (e) {
        return e.moveH(1, 'word');
      },
      delCharBefore: function (e) {
        return e.deleteH(-1, 'codepoint');
      },
      delCharAfter: function (e) {
        return e.deleteH(1, 'char');
      },
      delWordBefore: function (e) {
        return e.deleteH(-1, 'word');
      },
      delWordAfter: function (e) {
        return e.deleteH(1, 'word');
      },
      delGroupBefore: function (e) {
        return e.deleteH(-1, 'group');
      },
      delGroupAfter: function (e) {
        return e.deleteH(1, 'group');
      },
      indentAuto: function (e) {
        return e.indentSelection('smart');
      },
      indentMore: function (e) {
        return e.indentSelection('add');
      },
      indentLess: function (e) {
        return e.indentSelection('subtract');
      },
      insertTab: function (e) {
        return e.replaceSelection('\t');
      },
      insertSoftTab: function (e) {
        for (
          var t = [], n = e.listSelections(), r = e.options.tabSize, i = 0;
          i < n.length;
          i++
        ) {
          var o = n[i].from(),
            l = f(e.getLine(o.line), o.ch, r);
          t.push(p(r - (l % r)));
        }
        e.replaceSelections(t);
      },
      defaultTab: function (e) {
        e.somethingSelected()
          ? e.indentSelection('add')
          : e.execCommand('insertTab');
      },
      transposeChars: function (e) {
        return vr(e, function () {
          for (var t = e.listSelections(), n = [], r = 0; r < t.length; r++)
            if (t[r].empty()) {
              var i = t[r].head,
                o = J(e.doc, i.line).text;
              if (o)
                if (
                  (i.ch == o.length && (i = new ae(i.line, i.ch - 1)), i.ch > 0)
                )
                  (i = new ae(i.line, i.ch + 1)),
                    e.replaceRange(
                      o.charAt(i.ch - 1) + o.charAt(i.ch - 2),
                      ae(i.line, i.ch - 2),
                      i,
                      '+transpose'
                    );
                else if (i.line > e.doc.first) {
                  var l = J(e.doc, i.line - 1).text;
                  l &&
                    ((i = new ae(i.line, 1)),
                    e.replaceRange(
                      o.charAt(0) +
                        e.doc.lineSeparator() +
                        l.charAt(l.length - 1),
                      ae(i.line - 1, l.length - 1),
                      i,
                      '+transpose'
                    ));
                }
              n.push(new Ha(i, i));
            }
          e.setSelections(n);
        });
      },
      newlineAndIndent: function (e) {
        return vr(e, function () {
          for (var t = e.listSelections(), n = t.length - 1; n >= 0; n--)
            e.replaceRange(
              e.doc.lineSeparator(),
              t[n].anchor,
              t[n].head,
              '+input'
            );
          t = e.listSelections();
          for (var r = 0; r < t.length; r++)
            e.indentLine(t[r].from().line, null, !0);
          Zn(e);
        });
      },
      openLine: function (e) {
        return e.replaceSelection('\n', 'start');
      },
      toggleOverwrite: function (e) {
        return e.toggleOverwrite();
      },
    },
    $a = new Gl(),
    Xa = null,
    Ya = 400,
    Za = function (e, t, n) {
      (this.time = e), (this.pos = t), (this.button = n);
    };
  Za.prototype.compare = function (e, t, n) {
    return this.time + Ya > e && 0 == se(t, this.pos) && n == this.button;
  };
  var Qa,
    Ja,
    es = {
      toString: function () {
        return 'CodeMirror.Init';
      },
    },
    ts = {},
    ns = {};
  (Xo.defaults = ts), (Xo.optionHandlers = ns);
  var rs = [];
  Xo.defineInitHook = function (e) {
    return rs.push(e);
  };
  var is = null,
    os = function (e) {
      (this.cm = e),
        (this.lastAnchorNode =
          this.lastAnchorOffset =
          this.lastFocusNode =
          this.lastFocusOffset =
            null),
        (this.polling = new Gl()),
        (this.composing = null),
        (this.gracePeriod = !1),
        (this.readDOMTimeout = null);
    };
  (os.prototype.init = function (e) {
    function t(e) {
      for (var t = e.target; t; t = t.parentNode) {
        if (t == a) return !0;
        if (/\bCodeMirror-(?:line)?widget\b/.test(t.className)) break;
      }
      return !1;
    }
    function n(e) {
      if (t(e) && !D(o, e)) {
        if (o.somethingSelected())
          Qo({ lineWise: !1, text: o.getSelections() }),
            'cut' == e.type && o.replaceSelection('', null, 'cut');
        else {
          if (!o.options.lineWiseCopyCut) return;
          var n = nl(o);
          Qo({ lineWise: !0, text: n.text }),
            'cut' == e.type &&
              o.operation(function () {
                o.setSelections(n.ranges, 0, $l),
                  o.replaceSelection('', null, 'cut');
              });
        }
        if (e.clipboardData) {
          e.clipboardData.clearData();
          var r = is.text.join('\n');
          if (
            (e.clipboardData.setData('Text', r),
            e.clipboardData.getData('Text') == r)
          )
            return void e.preventDefault();
        }
        var s = il(),
          c = s.firstChild;
        o.display.lineSpace.insertBefore(s, o.display.lineSpace.firstChild),
          (c.value = is.text.join('\n'));
        var u = l();
        ql(c),
          setTimeout(function () {
            o.display.lineSpace.removeChild(s),
              u.focus(),
              u == a && i.showPrimarySelection();
          }, 50);
      }
    }
    var r = this,
      i = this,
      o = i.cm,
      a = (i.div = e.lineDiv);
    (a.contentEditable = !0),
      rl(
        a,
        o.options.spellcheck,
        o.options.autocorrect,
        o.options.autocapitalize
      ),
      ra(a, 'paste', function (e) {
        !t(e) ||
          D(o, e) ||
          el(e, o) ||
          (kl <= 11 &&
            setTimeout(
              yr(o, function () {
                return r.updateFromDOM();
              }),
              20
            ));
      }),
      ra(a, 'compositionstart', function (e) {
        r.composing = { data: e.data, done: !1 };
      }),
      ra(a, 'compositionupdate', function (e) {
        r.composing || (r.composing = { data: e.data, done: !1 });
      }),
      ra(a, 'compositionend', function (e) {
        r.composing &&
          (e.data != r.composing.data && r.readFromDOMSoon(),
          (r.composing.done = !0));
      }),
      ra(a, 'touchstart', function () {
        return i.forceCompositionEnd();
      }),
      ra(a, 'input', function () {
        r.composing || r.readFromDOMSoon();
      }),
      ra(a, 'copy', n),
      ra(a, 'cut', n);
  }),
    (os.prototype.screenReaderLabelChanged = function (e) {
      e
        ? this.div.setAttribute('aria-label', e)
        : this.div.removeAttribute('aria-label');
    }),
    (os.prototype.prepareSelection = function () {
      var e = Fn(this.cm, !1);
      return (e.focus = l() == this.div), e;
    }),
    (os.prototype.showSelection = function (e, t) {
      e &&
        this.cm.display.view.length &&
        ((e.focus || t) && this.showPrimarySelection(),
        this.showMultipleSelections(e));
    }),
    (os.prototype.getSelection = function () {
      return this.cm.display.wrapper.ownerDocument.getSelection();
    }),
    (os.prototype.showPrimarySelection = function () {
      var e = this.getSelection(),
        t = this.cm,
        n = t.doc.sel.primary(),
        r = n.from(),
        i = n.to();
      if (
        t.display.viewTo == t.display.viewFrom ||
        r.line >= t.display.viewTo ||
        i.line < t.display.viewFrom
      )
        return void e.removeAllRanges();
      var o = dl(t, e.anchorNode, e.anchorOffset),
        l = dl(t, e.focusNode, e.focusOffset);
      if (
        !o ||
        o.bad ||
        !l ||
        l.bad ||
        0 != se(de(o, l), r) ||
        0 != se(fe(o, l), i)
      ) {
        var a = t.display.view,
          s = (r.line >= t.display.viewFrom && sl(t, r)) || {
            node: a[0].measure.map[2],
            offset: 0,
          },
          c = i.line < t.display.viewTo && sl(t, i);
        if (!c) {
          var u = a[a.length - 1].measure,
            f = u.maps ? u.maps[u.maps.length - 1] : u.map;
          c = {
            node: f[f.length - 1],
            offset: f[f.length - 2] - f[f.length - 3],
          };
        }
        if (!s || !c) return void e.removeAllRanges();
        var d,
          h = e.rangeCount && e.getRangeAt(0);
        try {
          d = Rl(s.node, s.offset, c.offset, c.node);
        } catch (p) {}
        d &&
          (!yl && t.state.focused
            ? (e.collapse(s.node, s.offset),
              d.collapsed || (e.removeAllRanges(), e.addRange(d)))
            : (e.removeAllRanges(), e.addRange(d)),
          h && null == e.anchorNode
            ? e.addRange(h)
            : yl && this.startGracePeriod()),
          this.rememberSelection();
      }
    }),
    (os.prototype.startGracePeriod = function () {
      var e = this;
      clearTimeout(this.gracePeriod),
        (this.gracePeriod = setTimeout(function () {
          (e.gracePeriod = !1),
            e.selectionChanged() &&
              e.cm.operation(function () {
                return (e.cm.curOp.selectionChanged = !0);
              });
        }, 20));
    }),
    (os.prototype.showMultipleSelections = function (e) {
      n(this.cm.display.cursorDiv, e.cursors),
        n(this.cm.display.selectionDiv, e.selection);
    }),
    (os.prototype.rememberSelection = function () {
      var e = this.getSelection();
      (this.lastAnchorNode = e.anchorNode),
        (this.lastAnchorOffset = e.anchorOffset),
        (this.lastFocusNode = e.focusNode),
        (this.lastFocusOffset = e.focusOffset);
    }),
    (os.prototype.selectionInEditor = function () {
      var e = this.getSelection();
      if (!e.rangeCount) return !1;
      var t = e.getRangeAt(0).commonAncestorContainer;
      return o(this.div, t);
    }),
    (os.prototype.focus = function () {
      'nocursor' != this.cm.options.readOnly &&
        ((this.selectionInEditor() && l() == this.div) ||
          this.showSelection(this.prepareSelection(), !0),
        this.div.focus());
    }),
    (os.prototype.blur = function () {
      this.div.blur();
    }),
    (os.prototype.getField = function () {
      return this.div;
    }),
    (os.prototype.supportsTouch = function () {
      return !0;
    }),
    (os.prototype.receivedFocus = function () {
      function e() {
        t.cm.state.focused &&
          (t.pollSelection(), t.polling.set(t.cm.options.pollInterval, e));
      }
      var t = this;
      this.selectionInEditor()
        ? this.pollSelection()
        : vr(this.cm, function () {
            return (t.cm.curOp.selectionChanged = !0);
          }),
        this.polling.set(this.cm.options.pollInterval, e);
    }),
    (os.prototype.selectionChanged = function () {
      var e = this.getSelection();
      return (
        e.anchorNode != this.lastAnchorNode ||
        e.anchorOffset != this.lastAnchorOffset ||
        e.focusNode != this.lastFocusNode ||
        e.focusOffset != this.lastFocusOffset
      );
    }),
    (os.prototype.pollSelection = function () {
      if (
        null == this.readDOMTimeout &&
        !this.gracePeriod &&
        this.selectionChanged()
      ) {
        var e = this.getSelection(),
          t = this.cm;
        if (Dl && Tl && this.cm.display.gutterSpecs.length && cl(e.anchorNode))
          return (
            this.cm.triggerOnKeyDown({
              type: 'keydown',
              keyCode: 8,
              preventDefault: Math.abs,
            }),
            this.blur(),
            void this.focus()
          );
        if (!this.composing) {
          this.rememberSelection();
          var n = dl(t, e.anchorNode, e.anchorOffset),
            r = dl(t, e.focusNode, e.focusOffset);
          n &&
            r &&
            vr(t, function () {
              Ci(t.doc, qr(n, r), $l),
                (n.bad || r.bad) && (t.curOp.selectionChanged = !0);
            });
        }
      }
    }),
    (os.prototype.pollContent = function () {
      null != this.readDOMTimeout &&
        (clearTimeout(this.readDOMTimeout), (this.readDOMTimeout = null));
      var e = this.cm,
        t = e.display,
        n = e.doc.sel.primary(),
        r = n.from(),
        i = n.to();
      if (
        (0 == r.ch &&
          r.line > e.firstLine() &&
          (r = ae(r.line - 1, J(e.doc, r.line - 1).length)),
        i.ch == J(e.doc, i.line).text.length &&
          i.line < e.lastLine() &&
          (i = ae(i.line + 1, 0)),
        r.line < t.viewFrom || i.line > t.viewTo - 1)
      )
        return !1;
      var o, l, a;
      r.line == t.viewFrom || 0 == (o = Tn(e, r.line))
        ? ((l = re(t.view[0].line)), (a = t.view[0].node))
        : ((l = re(t.view[o].line)), (a = t.view[o - 1].node.nextSibling));
      var s,
        c,
        u = Tn(e, i.line);
      if (
        (u == t.view.length - 1
          ? ((s = t.viewTo - 1), (c = t.lineDiv.lastChild))
          : ((s = re(t.view[u + 1].line) - 1),
            (c = t.view[u + 1].node.previousSibling)),
        !a)
      )
        return !1;
      for (
        var f = e.doc.splitLines(fl(e, a, c, l, s)),
          d = ee(e.doc, ae(l, 0), ae(s, J(e.doc, s).text.length));
        f.length > 1 && d.length > 1;

      )
        if (g(f) == g(d)) f.pop(), d.pop(), s--;
        else {
          if (f[0] != d[0]) break;
          f.shift(), d.shift(), l++;
        }
      for (
        var h = 0, p = 0, m = f[0], v = d[0], y = Math.min(m.length, v.length);
        h < y && m.charCodeAt(h) == v.charCodeAt(h);

      )
        ++h;
      for (
        var b = g(f),
          x = g(d),
          w = Math.min(
            b.length - (1 == f.length ? h : 0),
            x.length - (1 == d.length ? h : 0)
          );
        p < w &&
        b.charCodeAt(b.length - p - 1) == x.charCodeAt(x.length - p - 1);

      )
        ++p;
      if (1 == f.length && 1 == d.length && l == r.line)
        for (
          ;
          h &&
          h > r.ch &&
          b.charCodeAt(b.length - p - 1) == x.charCodeAt(x.length - p - 1);

        )
          h--, p++;
      (f[f.length - 1] = b.slice(0, b.length - p).replace(/^\u200b+/, '')),
        (f[0] = f[0].slice(h).replace(/\u200b+$/, ''));
      var C = ae(l, h),
        k = ae(s, d.length ? g(d).length - p : 0);
      return f.length > 1 || f[0] || se(C, k)
        ? (Ri(e.doc, f, C, k, '+input'), !0)
        : void 0;
    }),
    (os.prototype.ensurePolled = function () {
      this.forceCompositionEnd();
    }),
    (os.prototype.reset = function () {
      this.forceCompositionEnd();
    }),
    (os.prototype.forceCompositionEnd = function () {
      this.composing &&
        (clearTimeout(this.readDOMTimeout),
        (this.composing = null),
        this.updateFromDOM(),
        this.div.blur(),
        this.div.focus());
    }),
    (os.prototype.readFromDOMSoon = function () {
      var e = this;
      null == this.readDOMTimeout &&
        (this.readDOMTimeout = setTimeout(function () {
          if (((e.readDOMTimeout = null), e.composing)) {
            if (!e.composing.done) return;
            e.composing = null;
          }
          e.updateFromDOM();
        }, 80));
    }),
    (os.prototype.updateFromDOM = function () {
      var e = this;
      (!this.cm.isReadOnly() && this.pollContent()) ||
        vr(this.cm, function () {
          return Mn(e.cm);
        });
    }),
    (os.prototype.setUneditable = function (e) {
      e.contentEditable = 'false';
    }),
    (os.prototype.onKeyPress = function (e) {
      0 == e.charCode ||
        this.composing ||
        (e.preventDefault(),
        this.cm.isReadOnly() ||
          yr(this.cm, Jo)(
            this.cm,
            String.fromCharCode(null == e.charCode ? e.keyCode : e.charCode),
            0
          ));
    }),
    (os.prototype.readOnlyChanged = function (e) {
      this.div.contentEditable = String('nocursor' != e);
    }),
    (os.prototype.onContextMenu = function () {}),
    (os.prototype.resetPosition = function () {}),
    (os.prototype.needsContentAttribute = !0);
  var ls = function (e) {
    (this.cm = e),
      (this.prevInput = ''),
      (this.pollingFast = !1),
      (this.polling = new Gl()),
      (this.hasSelection = !1),
      (this.composing = null);
  };
  (ls.prototype.init = function (e) {
    function t(e) {
      if (!D(i, e)) {
        if (i.somethingSelected())
          Qo({ lineWise: !1, text: i.getSelections() });
        else {
          if (!i.options.lineWiseCopyCut) return;
          var t = nl(i);
          Qo({ lineWise: !0, text: t.text }),
            'cut' == e.type
              ? i.setSelections(t.ranges, null, $l)
              : ((r.prevInput = ''), (o.value = t.text.join('\n')), ql(o));
        }
        'cut' == e.type && (i.state.cutIncoming = +new Date());
      }
    }
    var n = this,
      r = this,
      i = this.cm;
    this.createField(e);
    var o = this.textarea;
    e.wrapper.insertBefore(this.wrapper, e.wrapper.firstChild),
      Pl && (o.style.width = '0px'),
      ra(o, 'input', function () {
        Cl && kl >= 9 && n.hasSelection && (n.hasSelection = null), r.poll();
      }),
      ra(o, 'paste', function (e) {
        D(i, e) ||
          el(e, i) ||
          ((i.state.pasteIncoming = +new Date()), r.fastPoll());
      }),
      ra(o, 'cut', t),
      ra(o, 'copy', t),
      ra(e.scroller, 'paste', function (t) {
        if (!Wt(e, t) && !D(i, t)) {
          if (!o.dispatchEvent)
            return (i.state.pasteIncoming = +new Date()), void r.focus();
          var n = new Event('paste');
          (n.clipboardData = t.clipboardData), o.dispatchEvent(n);
        }
      }),
      ra(e.lineSpace, 'selectstart', function (t) {
        Wt(e, t) || E(t);
      }),
      ra(o, 'compositionstart', function () {
        var e = i.getCursor('from');
        r.composing && r.composing.range.clear(),
          (r.composing = {
            start: e,
            range: i.markText(e, i.getCursor('to'), {
              className: 'CodeMirror-composing',
            }),
          });
      }),
      ra(o, 'compositionend', function () {
        r.composing &&
          (r.poll(), r.composing.range.clear(), (r.composing = null));
      });
  }),
    (ls.prototype.createField = function (e) {
      (this.wrapper = il()), (this.textarea = this.wrapper.firstChild);
    }),
    (ls.prototype.screenReaderLabelChanged = function (e) {
      e
        ? this.textarea.setAttribute('aria-label', e)
        : this.textarea.removeAttribute('aria-label');
    }),
    (ls.prototype.prepareSelection = function () {
      var e = this.cm,
        t = e.display,
        n = e.doc,
        r = Fn(e);
      if (e.options.moveInputWithCursor) {
        var i = cn(e, n.sel.primary().head, 'div'),
          o = t.wrapper.getBoundingClientRect(),
          l = t.lineDiv.getBoundingClientRect();
        (r.teTop = Math.max(
          0,
          Math.min(t.wrapper.clientHeight - 10, i.top + l.top - o.top)
        )),
          (r.teLeft = Math.max(
            0,
            Math.min(t.wrapper.clientWidth - 10, i.left + l.left - o.left)
          ));
      }
      return r;
    }),
    (ls.prototype.showSelection = function (e) {
      var t = this.cm,
        r = t.display;
      n(r.cursorDiv, e.cursors),
        n(r.selectionDiv, e.selection),
        null != e.teTop &&
          ((this.wrapper.style.top = e.teTop + 'px'),
          (this.wrapper.style.left = e.teLeft + 'px'));
    }),
    (ls.prototype.reset = function (e) {
      if (!this.contextMenuPending && !this.composing) {
        var t = this.cm;
        if (t.somethingSelected()) {
          this.prevInput = '';
          var n = t.getSelection();
          (this.textarea.value = n),
            t.state.focused && ql(this.textarea),
            Cl && kl >= 9 && (this.hasSelection = n);
        } else
          e ||
            ((this.prevInput = this.textarea.value = ''),
            Cl && kl >= 9 && (this.hasSelection = null));
      }
    }),
    (ls.prototype.getField = function () {
      return this.textarea;
    }),
    (ls.prototype.supportsTouch = function () {
      return !1;
    }),
    (ls.prototype.focus = function () {
      if (
        'nocursor' != this.cm.options.readOnly &&
        (!Hl || l() != this.textarea)
      )
        try {
          this.textarea.focus();
        } catch (e) {}
    }),
    (ls.prototype.blur = function () {
      this.textarea.blur();
    }),
    (ls.prototype.resetPosition = function () {
      this.wrapper.style.top = this.wrapper.style.left = 0;
    }),
    (ls.prototype.receivedFocus = function () {
      this.slowPoll();
    }),
    (ls.prototype.slowPoll = function () {
      var e = this;
      this.pollingFast ||
        this.polling.set(this.cm.options.pollInterval, function () {
          e.poll(), e.cm.state.focused && e.slowPoll();
        });
    }),
    (ls.prototype.fastPoll = function () {
      function e() {
        var r = n.poll();
        r || t
          ? ((n.pollingFast = !1), n.slowPoll())
          : ((t = !0), n.polling.set(60, e));
      }
      var t = !1,
        n = this;
      (n.pollingFast = !0), n.polling.set(20, e);
    }),
    (ls.prototype.poll = function () {
      var e = this,
        t = this.cm,
        n = this.textarea,
        r = this.prevInput;
      if (
        this.contextMenuPending ||
        !t.state.focused ||
        (la(n) && !r && !this.composing) ||
        t.isReadOnly() ||
        t.options.disableInput ||
        t.state.keySeq
      )
        return !1;
      var i = n.value;
      if (i == r && !t.somethingSelected()) return !1;
      if (
        (Cl && kl >= 9 && this.hasSelection === i) ||
        (Fl && /[\uf700-\uf7ff]/.test(i))
      )
        return t.display.input.reset(), !1;
      if (t.doc.sel == t.display.selForContextMenu) {
        var o = i.charCodeAt(0);
        if ((8203 != o || r || (r = '​'), 8666 == o))
          return this.reset(), this.cm.execCommand('undo');
      }
      for (
        var l = 0, a = Math.min(r.length, i.length);
        l < a && r.charCodeAt(l) == i.charCodeAt(l);

      )
        ++l;
      return (
        vr(t, function () {
          Jo(
            t,
            i.slice(l),
            r.length - l,
            null,
            e.composing ? '*compose' : null
          ),
            i.length > 1e3 || i.indexOf('\n') > -1
              ? (n.value = e.prevInput = '')
              : (e.prevInput = i),
            e.composing &&
              (e.composing.range.clear(),
              (e.composing.range = t.markText(
                e.composing.start,
                t.getCursor('to'),
                { className: 'CodeMirror-composing' }
              )));
        }),
        !0
      );
    }),
    (ls.prototype.ensurePolled = function () {
      this.pollingFast && this.poll() && (this.pollingFast = !1);
    }),
    (ls.prototype.onKeyPress = function () {
      Cl && kl >= 9 && (this.hasSelection = null), this.fastPoll();
    }),
    (ls.prototype.onContextMenu = function (e) {
      function t() {
        if (null != l.selectionStart) {
          var e = i.somethingSelected(),
            t = '​' + (e ? l.value : '');
          (l.value = '⇚'),
            (l.value = t),
            (r.prevInput = e ? '' : '​'),
            (l.selectionStart = 1),
            (l.selectionEnd = t.length),
            (o.selForContextMenu = i.doc.sel);
        }
      }
      function n() {
        if (
          r.contextMenuPending == n &&
          ((r.contextMenuPending = !1),
          (r.wrapper.style.cssText = f),
          (l.style.cssText = u),
          Cl && kl < 9 && o.scrollbars.setScrollTop((o.scroller.scrollTop = s)),
          null != l.selectionStart)
        ) {
          (!Cl || (Cl && kl < 9)) && t();
          var e = 0,
            a = function () {
              o.selForContextMenu == i.doc.sel &&
              0 == l.selectionStart &&
              l.selectionEnd > 0 &&
              '​' == r.prevInput
                ? yr(i, Ai)(i)
                : e++ < 10
                ? (o.detectingSelectAll = setTimeout(a, 500))
                : ((o.selForContextMenu = null), o.input.reset());
            };
          o.detectingSelectAll = setTimeout(a, 200);
        }
      }
      var r = this,
        i = r.cm,
        o = i.display,
        l = r.textarea;
      r.contextMenuPending && r.contextMenuPending();
      var a = Ln(i, e),
        s = o.scroller.scrollTop;
      if (a && !Ml) {
        var c = i.options.resetSelectionOnContextMenu;
        c && i.doc.sel.contains(a) == -1 && yr(i, Ci)(i.doc, qr(a), $l);
        var u = l.style.cssText,
          f = r.wrapper.style.cssText,
          d = r.wrapper.offsetParent.getBoundingClientRect();
        (r.wrapper.style.cssText = 'position: static'),
          (l.style.cssText =
            'position: absolute; width: 30px; height: 30px;\n      top: ' +
            (e.clientY - d.top - 5) +
            'px; left: ' +
            (e.clientX - d.left - 5) +
            'px;\n      z-index: 1000; background: ' +
            (Cl ? 'rgba(255, 255, 255, .05)' : 'transparent') +
            ';\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);');
        var h;
        if (
          (Sl && (h = window.scrollY),
          o.input.focus(),
          Sl && window.scrollTo(null, h),
          o.input.reset(),
          i.somethingSelected() || (l.value = r.prevInput = ' '),
          (r.contextMenuPending = n),
          (o.selForContextMenu = i.doc.sel),
          clearTimeout(o.detectingSelectAll),
          Cl && kl >= 9 && t(),
          Bl)
        ) {
          z(e);
          var p = function () {
            A(window, 'mouseup', p), setTimeout(n, 20);
          };
          ra(window, 'mouseup', p);
        } else setTimeout(n, 50);
      }
    }),
    (ls.prototype.readOnlyChanged = function (e) {
      e || this.reset(),
        (this.textarea.disabled = 'nocursor' == e),
        (this.textarea.readOnly = !!e);
    }),
    (ls.prototype.setUneditable = function () {}),
    (ls.prototype.needsContentAttribute = !1),
    Vo(Xo),
    ol(Xo);
  var as = 'iter insert remove copy getEditor constructor'.split(' ');
  for (var ss in za.prototype)
    za.prototype.hasOwnProperty(ss) &&
      d(as, ss) < 0 &&
      (Xo.prototype[ss] = (function (e) {
        return function () {
          return e.apply(this.doc, arguments);
        };
      })(za.prototype[ss]));
  return (
    W(za),
    (Xo.inputStyles = { textarea: ls, contenteditable: os }),
    (Xo.defineMode = function (e) {
      Xo.defaults.mode || 'null' == e || (Xo.defaults.mode = e),
        K.apply(this, arguments);
    }),
    (Xo.defineMIME = V),
    Xo.defineMode('null', function () {
      return {
        token: function (e) {
          return e.skipToEnd();
        },
      };
    }),
    Xo.defineMIME('text/plain', 'null'),
    (Xo.defineExtension = function (e, t) {
      Xo.prototype[e] = t;
    }),
    (Xo.defineDocExtension = function (e, t) {
      za.prototype[e] = t;
    }),
    (Xo.fromTextArea = pl),
    gl(Xo),
    (Xo.version = '5.62.3'),
    Xo
  );
}),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    var t = {
        autoSelfClosers: {
          area: !0,
          base: !0,
          br: !0,
          col: !0,
          command: !0,
          embed: !0,
          frame: !0,
          hr: !0,
          img: !0,
          input: !0,
          keygen: !0,
          link: !0,
          meta: !0,
          param: !0,
          source: !0,
          track: !0,
          wbr: !0,
          menuitem: !0,
        },
        implicitlyClosed: {
          dd: !0,
          li: !0,
          optgroup: !0,
          option: !0,
          p: !0,
          rp: !0,
          rt: !0,
          tbody: !0,
          td: !0,
          tfoot: !0,
          th: !0,
          tr: !0,
        },
        contextGrabbers: {
          dd: { dd: !0, dt: !0 },
          dt: { dd: !0, dt: !0 },
          li: { li: !0 },
          option: { option: !0, optgroup: !0 },
          optgroup: { optgroup: !0 },
          p: {
            address: !0,
            article: !0,
            aside: !0,
            blockquote: !0,
            dir: !0,
            div: !0,
            dl: !0,
            fieldset: !0,
            footer: !0,
            form: !0,
            h1: !0,
            h2: !0,
            h3: !0,
            h4: !0,
            h5: !0,
            h6: !0,
            header: !0,
            hgroup: !0,
            hr: !0,
            menu: !0,
            nav: !0,
            ol: !0,
            p: !0,
            pre: !0,
            section: !0,
            table: !0,
            ul: !0,
          },
          rp: { rp: !0, rt: !0 },
          rt: { rp: !0, rt: !0 },
          tbody: { tbody: !0, tfoot: !0 },
          td: { td: !0, th: !0 },
          tfoot: { tbody: !0 },
          th: { td: !0, th: !0 },
          thead: { tbody: !0, tfoot: !0 },
          tr: { tr: !0 },
        },
        doNotIndent: { pre: !0 },
        allowUnquoted: !0,
        allowMissing: !0,
        caseFold: !0,
      },
      n = {
        autoSelfClosers: {},
        implicitlyClosed: {},
        contextGrabbers: {},
        doNotIndent: {},
        allowUnquoted: !1,
        allowMissing: !1,
        allowMissingTagName: !1,
        caseFold: !1,
      };
    e.defineMode('xml', function (r, i) {
      function o(e, t) {
        function n(n) {
          return (t.tokenize = n), n(e, t);
        }
        var r = e.next();
        if ('<' == r)
          return e.eat('!')
            ? e.eat('[')
              ? e.match('CDATA[')
                ? n(s('atom', ']]>'))
                : null
              : e.match('--')
              ? n(s('comment', '-->'))
              : e.match('DOCTYPE', !0, !0)
              ? (e.eatWhile(/[\w\._\-]/), n(c(1)))
              : null
            : e.eat('?')
            ? (e.eatWhile(/[\w\._\-]/), (t.tokenize = s('meta', '?>')), 'meta')
            : ((T = e.eat('/') ? 'closeTag' : 'openTag'),
              (t.tokenize = l),
              'tag bracket');
        if ('&' == r) {
          var i;
          return (
            (i = e.eat('#')
              ? e.eat('x')
                ? e.eatWhile(/[a-fA-F\d]/) && e.eat(';')
                : e.eatWhile(/[\d]/) && e.eat(';')
              : e.eatWhile(/[\w\.\-:]/) && e.eat(';')),
            i ? 'atom' : 'error'
          );
        }
        return e.eatWhile(/[^&<]/), null;
      }
      function l(e, t) {
        var n = e.next();
        if ('>' == n || ('/' == n && e.eat('>')))
          return (
            (t.tokenize = o),
            (T = '>' == n ? 'endTag' : 'selfcloseTag'),
            'tag bracket'
          );
        if ('=' == n) return (T = 'equals'), null;
        if ('<' == n) {
          (t.tokenize = o), (t.state = h), (t.tagName = t.tagStart = null);
          var r = t.tokenize(e, t);
          return r ? r + ' tag error' : 'tag error';
        }
        return /[\'\"]/.test(n)
          ? ((t.tokenize = a(n)),
            (t.stringStartCol = e.column()),
            t.tokenize(e, t))
          : (e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/), 'word');
      }
      function a(e) {
        var t = function (t, n) {
          for (; !t.eol(); )
            if (t.next() == e) {
              n.tokenize = l;
              break;
            }
          return 'string';
        };
        return (t.isInAttribute = !0), t;
      }
      function s(e, t) {
        return function (n, r) {
          for (; !n.eol(); ) {
            if (n.match(t)) {
              r.tokenize = o;
              break;
            }
            n.next();
          }
          return e;
        };
      }
      function c(e) {
        return function (t, n) {
          for (var r; null != (r = t.next()); ) {
            if ('<' == r) return (n.tokenize = c(e + 1)), n.tokenize(t, n);
            if ('>' == r) {
              if (1 == e) {
                n.tokenize = o;
                break;
              }
              return (n.tokenize = c(e - 1)), n.tokenize(t, n);
            }
          }
          return 'meta';
        };
      }
      function u(e, t, n) {
        (this.prev = e.context),
          (this.tagName = t || ''),
          (this.indent = e.indented),
          (this.startOfLine = n),
          (k.doNotIndent.hasOwnProperty(t) ||
            (e.context && e.context.noIndent)) &&
            (this.noIndent = !0);
      }
      function f(e) {
        e.context && (e.context = e.context.prev);
      }
      function d(e, t) {
        for (var n; ; ) {
          if (!e.context) return;
          if (
            ((n = e.context.tagName),
            !k.contextGrabbers.hasOwnProperty(n) ||
              !k.contextGrabbers[n].hasOwnProperty(t))
          )
            return;
          f(e);
        }
      }
      function h(e, t, n) {
        return 'openTag' == e
          ? ((n.tagStart = t.column()), p)
          : 'closeTag' == e
          ? g
          : h;
      }
      function p(e, t, n) {
        return 'word' == e
          ? ((n.tagName = t.current()), (M = 'tag'), y)
          : k.allowMissingTagName && 'endTag' == e
          ? ((M = 'tag bracket'), y(e, t, n))
          : ((M = 'error'), p);
      }
      function g(e, t, n) {
        if ('word' == e) {
          var r = t.current();
          return (
            n.context &&
              n.context.tagName != r &&
              k.implicitlyClosed.hasOwnProperty(n.context.tagName) &&
              f(n),
            (n.context && n.context.tagName == r) || k.matchClosing === !1
              ? ((M = 'tag'), m)
              : ((M = 'tag error'), v)
          );
        }
        return k.allowMissingTagName && 'endTag' == e
          ? ((M = 'tag bracket'), m(e, t, n))
          : ((M = 'error'), v);
      }
      function m(e, t, n) {
        return 'endTag' != e ? ((M = 'error'), m) : (f(n), h);
      }
      function v(e, t, n) {
        return (M = 'error'), m(e, t, n);
      }
      function y(e, t, n) {
        if ('word' == e) return (M = 'attribute'), b;
        if ('endTag' == e || 'selfcloseTag' == e) {
          var r = n.tagName,
            i = n.tagStart;
          return (
            (n.tagName = n.tagStart = null),
            'selfcloseTag' == e || k.autoSelfClosers.hasOwnProperty(r)
              ? d(n, r)
              : (d(n, r), (n.context = new u(n, r, i == n.indented))),
            h
          );
        }
        return (M = 'error'), y;
      }
      function b(e, t, n) {
        return 'equals' == e
          ? x
          : (k.allowMissing || (M = 'error'), y(e, t, n));
      }
      function x(e, t, n) {
        return 'string' == e
          ? w
          : 'word' == e && k.allowUnquoted
          ? ((M = 'string'), y)
          : ((M = 'error'), y(e, t, n));
      }
      function w(e, t, n) {
        return 'string' == e ? w : y(e, t, n);
      }
      var C = r.indentUnit,
        k = {},
        S = i.htmlMode ? t : n;
      for (var L in S) k[L] = S[L];
      for (var L in i) k[L] = i[L];
      var T, M;
      return (
        (o.isInText = !0),
        {
          startState: function (e) {
            var t = {
              tokenize: o,
              state: h,
              indented: e || 0,
              tagName: null,
              tagStart: null,
              context: null,
            };
            return null != e && (t.baseIndent = e), t;
          },
          token: function (e, t) {
            if (
              (!t.tagName && e.sol() && (t.indented = e.indentation()),
              e.eatSpace())
            )
              return null;
            T = null;
            var n = t.tokenize(e, t);
            return (
              (n || T) &&
                'comment' != n &&
                ((M = null),
                (t.state = t.state(T || n, e, t)),
                M && (n = 'error' == M ? n + ' error' : M)),
              n
            );
          },
          indent: function (t, n, r) {
            var i = t.context;
            if (t.tokenize.isInAttribute)
              return t.tagStart == t.indented
                ? t.stringStartCol + 1
                : t.indented + C;
            if (i && i.noIndent) return e.Pass;
            if (t.tokenize != l && t.tokenize != o)
              return r ? r.match(/^(\s*)/)[0].length : 0;
            if (t.tagName)
              return k.multilineTagIndentPastTag !== !1
                ? t.tagStart + t.tagName.length + 2
                : t.tagStart + C * (k.multilineTagIndentFactor || 1);
            if (k.alignCDATA && /<!\[CDATA\[/.test(n)) return 0;
            var a = n && /^<(\/)?([\w_:\.-]*)/.exec(n);
            if (a && a[1])
              for (; i; ) {
                if (i.tagName == a[2]) {
                  i = i.prev;
                  break;
                }
                if (!k.implicitlyClosed.hasOwnProperty(i.tagName)) break;
                i = i.prev;
              }
            else if (a)
              for (; i; ) {
                var s = k.contextGrabbers[i.tagName];
                if (!s || !s.hasOwnProperty(a[2])) break;
                i = i.prev;
              }
            for (; i && i.prev && !i.startOfLine; ) i = i.prev;
            return i ? i.indent + C : t.baseIndent || 0;
          },
          electricInput: /<\/[\s\w:]+>$/,
          blockCommentStart: '<!--',
          blockCommentEnd: '-->',
          configuration: k.htmlMode ? 'html' : 'xml',
          helperType: k.htmlMode ? 'html' : 'xml',
          skipAttribute: function (e) {
            e.state == x && (e.state = y);
          },
          xmlCurrentTag: function (e) {
            return e.tagName
              ? { name: e.tagName, close: 'closeTag' == e.type }
              : null;
          },
          xmlCurrentContext: function (e) {
            for (var t = [], n = e.context; n; n = n.prev) t.push(n.tagName);
            return t.reverse();
          },
        }
      );
    }),
      e.defineMIME('text/xml', 'xml'),
      e.defineMIME('application/xml', 'xml'),
      e.mimeModes.hasOwnProperty('text/html') ||
        e.defineMIME('text/html', { name: 'xml', htmlMode: !0 });
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(
          require('../../lib/codemirror'),
          require('../xml/xml'),
          require('../javascript/javascript'),
          require('../css/css')
        )
      : 'function' == typeof define && define.amd
      ? define(
          [
            '../../lib/codemirror',
            '../xml/xml',
            '../javascript/javascript',
            '../css/css',
          ],
          e
        )
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    function t(e, t, n) {
      var r = e.current(),
        i = r.search(t);
      return (
        i > -1
          ? e.backUp(r.length - i)
          : r.match(/<\/?$/) &&
            (e.backUp(r.length), e.match(t, !1) || e.match(r)),
        n
      );
    }
    function n(e) {
      var t = s[e];
      return t
        ? t
        : (s[e] = new RegExp(
            '\\s+' + e + '\\s*=\\s*(\'|")?([^\'"]+)(\'|")?\\s*'
          ));
    }
    function r(e, t) {
      var r = e.match(n(t));
      return r ? /^\s*(.*?)\s*$/.exec(r[2])[1] : '';
    }
    function i(e, t) {
      return new RegExp((t ? '^' : '') + '</s*' + e + 's*>', 'i');
    }
    function o(e, t) {
      for (var n in e)
        for (
          var r = t[n] || (t[n] = []), i = e[n], o = i.length - 1;
          o >= 0;
          o--
        )
          r.unshift(i[o]);
    }
    function l(e, t) {
      for (var n = 0; n < e.length; n++) {
        var i = e[n];
        if (!i[0] || i[1].test(r(t, i[0]))) return i[2];
      }
    }
    var a = {
        script: [
          ['lang', /(javascript|babel)/i, 'javascript'],
          [
            'type',
            /^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,
            'javascript',
          ],
          ['type', /./, 'text/plain'],
          [null, null, 'javascript'],
        ],
        style: [
          ['lang', /^css$/i, 'css'],
          ['type', /^(text\/)?(x-)?(stylesheet|css)$/i, 'css'],
          ['type', /./, 'text/plain'],
          [null, null, 'css'],
        ],
      },
      s = {};
    e.defineMode(
      'htmlmixed',
      function (n, r) {
        function s(r, o) {
          var a,
            f = c.token(r, o.htmlState),
            d = /\btag\b/.test(f);
          if (
            d &&
            !/[<>\s\/]/.test(r.current()) &&
            (a = o.htmlState.tagName && o.htmlState.tagName.toLowerCase()) &&
            u.hasOwnProperty(a)
          )
            o.inTag = a + ' ';
          else if (o.inTag && d && />$/.test(r.current())) {
            var h = /^([\S]+) (.*)/.exec(o.inTag);
            o.inTag = null;
            var p = '>' == r.current() && l(u[h[1]], h[2]),
              g = e.getMode(n, p),
              m = i(h[1], !0),
              v = i(h[1], !1);
            (o.token = function (e, n) {
              return e.match(m, !1)
                ? ((n.token = s), (n.localState = n.localMode = null), null)
                : t(e, v, n.localMode.token(e, n.localState));
            }),
              (o.localMode = g),
              (o.localState = e.startState(g, c.indent(o.htmlState, '', '')));
          } else
            o.inTag && ((o.inTag += r.current()), r.eol() && (o.inTag += ' '));
          return f;
        }
        var c = e.getMode(n, {
            name: 'xml',
            htmlMode: !0,
            multilineTagIndentFactor: r.multilineTagIndentFactor,
            multilineTagIndentPastTag: r.multilineTagIndentPastTag,
            allowMissingTagName: r.allowMissingTagName,
          }),
          u = {},
          f = r && r.tags,
          d = r && r.scriptTypes;
        if ((o(a, u), f && o(f, u), d))
          for (var h = d.length - 1; h >= 0; h--)
            u.script.unshift(['type', d[h].matches, d[h].mode]);
        return {
          startState: function () {
            var t = e.startState(c);
            return {
              token: s,
              inTag: null,
              localMode: null,
              localState: null,
              htmlState: t,
            };
          },
          copyState: function (t) {
            var n;
            return (
              t.localState && (n = e.copyState(t.localMode, t.localState)),
              {
                token: t.token,
                inTag: t.inTag,
                localMode: t.localMode,
                localState: n,
                htmlState: e.copyState(c, t.htmlState),
              }
            );
          },
          token: function (e, t) {
            return t.token(e, t);
          },
          indent: function (t, n, r) {
            return !t.localMode || /^\s*<\//.test(n)
              ? c.indent(t.htmlState, n, r)
              : t.localMode.indent
              ? t.localMode.indent(t.localState, n, r)
              : e.Pass;
          },
          innerMode: function (e) {
            return {
              state: e.localState || e.htmlState,
              mode: e.localMode || c,
            };
          },
        };
      },
      'xml',
      'javascript',
      'css'
    ),
      e.defineMIME('text/html', 'htmlmixed');
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    function t(e, t) {
      if (!window.JSHINT)
        return (
          window.console &&
            window.console.error(
              'Error: window.JSHINT not defined, CodeMirror JavaScript linting cannot run.'
            ),
          []
        );
      t.indent || (t.indent = 1), JSHINT(e, t, t.globals);
      var r = JSHINT.data().errors,
        i = [];
      return r && n(r, i), i;
    }
    function n(t, n) {
      for (var r = 0; r < t.length; r++) {
        var i = t[r];
        if (i) {
          if (i.line <= 0) {
            window.console &&
              window.console.warn(
                'Cannot display JSHint error (invalid line ' + i.line + ')',
                i
              );
            continue;
          }
          var o = i.character - 1,
            l = o + 1;
          if (i.evidence) {
            var a = i.evidence.substring(o).search(/.\b/);
            a > -1 && (l += a);
          }
          var s = {
            message: i.reason,
            severity: i.code && i.code.startsWith('W') ? 'warning' : 'error',
            from: e.Pos(i.line - 1, o),
            to: e.Pos(i.line - 1, l),
          };
          n.push(s);
        }
      }
    }
    e.registerHelper('lint', 'javascript', t);
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    function t(t, n, r) {
      function i(t) {
        return o.parentNode
          ? ((o.style.top = Math.max(0, t.clientY - o.offsetHeight - 5) + 'px'),
            void (o.style.left = t.clientX + 5 + 'px'))
          : e.off(document, 'mousemove', i);
      }
      var o = document.createElement('div');
      return (
        (o.className = 'CodeMirror-lint-tooltip cm-s-' + t.options.theme),
        o.appendChild(r.cloneNode(!0)),
        t.state.lint.options.selfContain
          ? t.getWrapperElement().appendChild(o)
          : document.body.appendChild(o),
        e.on(document, 'mousemove', i),
        i(n),
        null != o.style.opacity && (o.style.opacity = 1),
        o
      );
    }
    function n(e) {
      e.parentNode && e.parentNode.removeChild(e);
    }
    function r(e) {
      e.parentNode &&
        (null == e.style.opacity && n(e),
        (e.style.opacity = 0),
        setTimeout(function () {
          n(e);
        }, 600));
    }
    function i(n, i, o, l) {
      function a() {
        e.off(l, 'mouseout', a), s && (r(s), (s = null));
      }
      var s = t(n, i, o),
        c = setInterval(function () {
          if (s)
            for (var e = l; ; e = e.parentNode) {
              if ((e && 11 == e.nodeType && (e = e.host), e == document.body))
                return;
              if (!e) {
                a();
                break;
              }
            }
          if (!s) return clearInterval(c);
        }, 400);
      e.on(l, 'mouseout', a);
    }
    function o(e, t, n) {
      (this.marked = []),
        t instanceof Function && (t = { getAnnotations: t }),
        (t && t !== !0) || (t = {}),
        (this.options = {}),
        (this.linterOptions = t.options || {});
      for (var r in x) this.options[r] = x[r];
      for (var r in t)
        x.hasOwnProperty(r)
          ? null != t[r] && (this.options[r] = t[r])
          : t.options || (this.linterOptions[r] = t[r]);
      (this.timeout = null),
        (this.hasGutter = n),
        (this.onMouseOver = function (t) {
          v(e, t);
        }),
        (this.waitingFor = 0);
    }
    function l(e) {
      var t = e.state.lint;
      t.hasGutter && e.clearGutter(y), t.options.highlightLines && a(e);
      for (var n = 0; n < t.marked.length; ++n) t.marked[n].clear();
      t.marked.length = 0;
    }
    function a(e) {
      e.eachLine(function (t) {
        var n = t.wrapClass && /\bCodeMirror-lint-line-\w+\b/.exec(t.wrapClass);
        n && e.removeLineClass(t, 'wrap', n[0]);
      });
    }
    function s(t, n, r, o, l) {
      var a = document.createElement('div'),
        s = a;
      return (
        (a.className = 'CodeMirror-lint-marker CodeMirror-lint-marker-' + r),
        o &&
          ((s = a.appendChild(document.createElement('div'))),
          (s.className =
            'CodeMirror-lint-marker CodeMirror-lint-marker-multiple')),
        0 != l &&
          e.on(s, 'mouseover', function (e) {
            i(t, e, n, s);
          }),
        a
      );
    }
    function c(e, t) {
      return 'error' == e ? e : t;
    }
    function u(e) {
      for (var t = [], n = 0; n < e.length; ++n) {
        var r = e[n],
          i = r.from.line;
        (t[i] || (t[i] = [])).push(r);
      }
      return t;
    }
    function f(e) {
      var t = e.severity;
      t || (t = 'error');
      var n = document.createElement('div');
      return (
        (n.className = 'CodeMirror-lint-message CodeMirror-lint-message-' + t),
        'undefined' != typeof e.messageHTML
          ? (n.innerHTML = e.messageHTML)
          : n.appendChild(document.createTextNode(e.message)),
        n
      );
    }
    function d(t, n) {
      function r() {
        (o = -1), t.off('change', r);
      }
      var i = t.state.lint,
        o = ++i.waitingFor;
      t.on('change', r),
        n(
          t.getValue(),
          function (n, l) {
            t.off('change', r),
              i.waitingFor == o &&
                (l && n instanceof e && (n = l),
                t.operation(function () {
                  p(t, n);
                }));
          },
          i.linterOptions,
          t
        );
    }
    function h(t) {
      var n = t.state.lint;
      if (n) {
        var r = n.options,
          i = r.getAnnotations || t.getHelper(e.Pos(0, 0), 'lint');
        if (i)
          if (r.async || i.async) d(t, i);
          else {
            var o = i(t.getValue(), n.linterOptions, t);
            if (!o) return;
            o.then
              ? o.then(function (e) {
                  t.operation(function () {
                    p(t, e);
                  });
                })
              : t.operation(function () {
                  p(t, o);
                });
          }
      }
    }
    function p(e, t) {
      var n = e.state.lint;
      if (n) {
        var r = n.options;
        l(e);
        for (var i = u(t), o = 0; o < i.length; ++o) {
          var a = i[o];
          if (a) {
            var d = [];
            a = a.filter(function (e) {
              return !(d.indexOf(e.message) > -1) && d.push(e.message);
            });
            for (
              var h = null,
                p = n.hasGutter && document.createDocumentFragment(),
                g = 0;
              g < a.length;
              ++g
            ) {
              var m = a[g],
                v = m.severity;
              v || (v = 'error'),
                (h = c(h, v)),
                r.formatAnnotation && (m = r.formatAnnotation(m)),
                n.hasGutter && p.appendChild(f(m)),
                m.to &&
                  n.marked.push(
                    e.markText(m.from, m.to, {
                      className:
                        'CodeMirror-lint-mark CodeMirror-lint-mark-' + v,
                      __annotation: m,
                    })
                  );
            }
            n.hasGutter &&
              e.setGutterMarker(o, y, s(e, p, h, i[o].length > 1, r.tooltips)),
              r.highlightLines && e.addLineClass(o, 'wrap', b + h);
          }
        }
        r.onUpdateLinting && r.onUpdateLinting(t, i, e);
      }
    }
    function g(e) {
      var t = e.state.lint;
      t &&
        (clearTimeout(t.timeout),
        (t.timeout = setTimeout(function () {
          h(e);
        }, t.options.delay)));
    }
    function m(e, t, n) {
      for (
        var r = n.target || n.srcElement,
          o = document.createDocumentFragment(),
          l = 0;
        l < t.length;
        l++
      ) {
        var a = t[l];
        o.appendChild(f(a));
      }
      i(e, n, o, r);
    }
    function v(e, t) {
      var n = t.target || t.srcElement;
      if (/\bCodeMirror-lint-mark-/.test(n.className)) {
        for (
          var r = n.getBoundingClientRect(),
            i = (r.left + r.right) / 2,
            o = (r.top + r.bottom) / 2,
            l = e.findMarksAt(e.coordsChar({ left: i, top: o }, 'client')),
            a = [],
            s = 0;
          s < l.length;
          ++s
        ) {
          var c = l[s].__annotation;
          c && a.push(c);
        }
        a.length && m(e, a, t);
      }
    }
    var y = 'CodeMirror-lint-markers',
      b = 'CodeMirror-lint-line-',
      x = {
        highlightLines: !1,
        tooltips: !0,
        delay: 500,
        lintOnChange: !0,
        getAnnotations: null,
        async: !1,
        selfContain: null,
        formatAnnotation: null,
        onUpdateLinting: null,
      };
    e.defineOption('lint', !1, function (t, n, r) {
      if (
        (r &&
          r != e.Init &&
          (l(t),
          t.state.lint.options.lintOnChange !== !1 && t.off('change', g),
          e.off(t.getWrapperElement(), 'mouseover', t.state.lint.onMouseOver),
          clearTimeout(t.state.lint.timeout),
          delete t.state.lint),
        n)
      ) {
        for (var i = t.getOption('gutters'), a = !1, s = 0; s < i.length; ++s)
          i[s] == y && (a = !0);
        var c = (t.state.lint = new o(t, n, a));
        c.options.lintOnChange && t.on('change', g),
          0 != c.options.tooltips &&
            'gutter' != c.options.tooltips &&
            e.on(t.getWrapperElement(), 'mouseover', c.onMouseOver),
          h(t);
      }
    }),
      e.defineExtension('performLint', function () {
        h(this);
      });
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    function t(e, t) {
      for (var n = 0, r = e.length; n < r; ++n) t(e[n]);
    }
    function n(e, t) {
      if (!Array.prototype.indexOf) {
        for (var n = e.length; n--; ) if (e[n] === t) return !0;
        return !1;
      }
      return e.indexOf(t) != -1;
    }
    function r(t, n, r, i) {
      var o = t.getCursor(),
        l = r(t, o);
      if (!/\b(?:string|comment)\b/.test(l.type)) {
        var a = e.innerMode(t.getMode(), l.state);
        if ('json' !== a.mode.helperType) {
          (l.state = a.state),
            /^[\w$_]*$/.test(l.string)
              ? l.end > o.ch &&
                ((l.end = o.ch), (l.string = l.string.slice(0, o.ch - l.start)))
              : (l = {
                  start: o.ch,
                  end: o.ch,
                  string: '',
                  state: l.state,
                  type: '.' == l.string ? 'property' : null,
                });
          for (var u = l; 'property' == u.type; ) {
            if (((u = r(t, c(o.line, u.start))), '.' != u.string)) return;
            if (((u = r(t, c(o.line, u.start))), !f)) var f = [];
            f.push(u);
          }
          return {
            list: s(l, f, n, i),
            from: c(o.line, l.start),
            to: c(o.line, l.end),
          };
        }
      }
    }
    function i(e, t) {
      return r(
        e,
        h,
        function (e, t) {
          return e.getTokenAt(t);
        },
        t
      );
    }
    function o(e, t) {
      var n = e.getTokenAt(t);
      return (
        t.ch == n.start + 1 && '.' == n.string.charAt(0)
          ? ((n.end = n.start), (n.string = '.'), (n.type = 'property'))
          : /^\.[\w$_]*$/.test(n.string) &&
            ((n.type = 'property'),
            n.start++,
            (n.string = n.string.replace(/\./, ''))),
        n
      );
    }
    function l(e, t) {
      return r(e, p, o, t);
    }
    function a(e, t) {
      if (Object.getOwnPropertyNames && Object.getPrototypeOf)
        for (var n = e; n; n = Object.getPrototypeOf(n))
          Object.getOwnPropertyNames(n).forEach(t);
      else for (var r in e) t(r);
    }
    function s(e, r, i, o) {
      function l(e) {
        0 != e.lastIndexOf(h, 0) || n(c, e) || c.push(e);
      }
      function s(e) {
        'string' == typeof e
          ? t(u, l)
          : e instanceof Array
          ? t(f, l)
          : e instanceof Function && t(d, l),
          a(e, l);
      }
      var c = [],
        h = e.string,
        p = (o && o.globalScope) || window;
      if (r && r.length) {
        var g,
          m = r.pop();
        for (
          m.type && 0 === m.type.indexOf('variable')
            ? (o && o.additionalContext && (g = o.additionalContext[m.string]),
              (o && o.useGlobalScope === !1) || (g = g || p[m.string]))
            : 'string' == m.type
            ? (g = '')
            : 'atom' == m.type
            ? (g = 1)
            : 'function' == m.type &&
              (null == p.jQuery ||
              ('$' != m.string && 'jQuery' != m.string) ||
              'function' != typeof p.jQuery
                ? null != p._ &&
                  '_' == m.string &&
                  'function' == typeof p._ &&
                  (g = p._())
                : (g = p.jQuery()));
          null != g && r.length;

        )
          g = g[r.pop().string];
        null != g && s(g);
      } else {
        for (var v = e.state.localVars; v; v = v.next) l(v.name);
        for (var y = e.state.context; y; y = y.prev)
          for (var v = y.vars; v; v = v.next) l(v.name);
        for (var v = e.state.globalVars; v; v = v.next) l(v.name);
        if (o && null != o.additionalContext)
          for (var b in o.additionalContext) l(b);
        (o && o.useGlobalScope === !1) || s(p), t(i, l);
      }
      return c;
    }
    var c = e.Pos;
    e.registerHelper('hint', 'javascript', i),
      e.registerHelper('hint', 'coffeescript', l);
    var u =
        'charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight toUpperCase toLowerCase split concat match replace search'.split(
          ' '
        ),
      f =
        'length concat join splice push pop shift unshift slice reverse sort indexOf lastIndexOf every some filter forEach map reduce reduceRight '.split(
          ' '
        ),
      d = 'prototype apply call bind'.split(' '),
      h =
        'break case catch class const continue debugger default delete do else export extends false finally for function if in import instanceof new null return super switch this throw true try typeof var void while with yield'.split(
          ' '
        ),
      p =
        'and break catch class continue delete do else extends false finally for if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes'.split(
          ' '
        );
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    function t(t, n, r) {
      var i,
        o = t.getWrapperElement();
      return (
        (i = o.appendChild(document.createElement('div'))),
        r
          ? (i.className = 'CodeMirror-dialog CodeMirror-dialog-bottom')
          : (i.className = 'CodeMirror-dialog CodeMirror-dialog-top'),
        'string' == typeof n ? (i.innerHTML = n) : i.appendChild(n),
        e.addClass(o, 'dialog-opened'),
        i
      );
    }
    function n(e, t) {
      e.state.currentNotificationClose && e.state.currentNotificationClose(),
        (e.state.currentNotificationClose = t);
    }
    e.defineExtension('openDialog', function (r, i, o) {
      function l(t) {
        if ('string' == typeof t) f.value = t;
        else {
          if (c) return;
          (c = !0),
            e.rmClass(s.parentNode, 'dialog-opened'),
            s.parentNode.removeChild(s),
            u.focus(),
            o.onClose && o.onClose(s);
        }
      }
      o || (o = {}), n(this, null);
      var a,
        s = t(this, r, o.bottom),
        c = !1,
        u = this,
        f = s.getElementsByTagName('input')[0];
      return (
        f
          ? (f.focus(),
            o.value &&
              ((f.value = o.value), o.selectValueOnOpen !== !1 && f.select()),
            o.onInput &&
              e.on(f, 'input', function (e) {
                o.onInput(e, f.value, l);
              }),
            o.onKeyUp &&
              e.on(f, 'keyup', function (e) {
                o.onKeyUp(e, f.value, l);
              }),
            e.on(f, 'keydown', function (t) {
              (o && o.onKeyDown && o.onKeyDown(t, f.value, l)) ||
                ((27 == t.keyCode ||
                  (o.closeOnEnter !== !1 && 13 == t.keyCode)) &&
                  (f.blur(), e.e_stop(t), l()),
                13 == t.keyCode && i(f.value, t));
            }),
            o.closeOnBlur !== !1 &&
              e.on(s, 'focusout', function (e) {
                null !== e.relatedTarget && l();
              }))
          : (a = s.getElementsByTagName('button')[0]) &&
            (e.on(a, 'click', function () {
              l(), u.focus();
            }),
            o.closeOnBlur !== !1 && e.on(a, 'blur', l),
            a.focus()),
        l
      );
    }),
      e.defineExtension('openConfirm', function (r, i, o) {
        function l() {
          c ||
            ((c = !0),
            e.rmClass(a.parentNode, 'dialog-opened'),
            a.parentNode.removeChild(a),
            u.focus());
        }
        n(this, null);
        var a = t(this, r, o && o.bottom),
          s = a.getElementsByTagName('button'),
          c = !1,
          u = this,
          f = 1;
        s[0].focus();
        for (var d = 0; d < s.length; ++d) {
          var h = s[d];
          !(function (t) {
            e.on(h, 'click', function (n) {
              e.e_preventDefault(n), l(), t && t(u);
            });
          })(i[d]),
            e.on(h, 'blur', function () {
              --f,
                setTimeout(function () {
                  f <= 0 && l();
                }, 200);
            }),
            e.on(h, 'focus', function () {
              ++f;
            });
        }
      }),
      e.defineExtension('openNotification', function (r, i) {
        function o() {
          s ||
            ((s = !0),
            clearTimeout(l),
            e.rmClass(a.parentNode, 'dialog-opened'),
            a.parentNode.removeChild(a));
        }
        n(this, o);
        var l,
          a = t(this, r, i && i.bottom),
          s = !1,
          c = i && 'undefined' != typeof i.duration ? i.duration : 5e3;
        return (
          e.on(a, 'click', function (t) {
            e.e_preventDefault(t), o();
          }),
          c && (l = setTimeout(o, c)),
          o
        );
      });
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    function t(t, i, o, l) {
      function a(e) {
        var n = s(t, i);
        if (!n || n.to.line - n.from.line < c) return null;
        if ('fold' === l) return n;
        for (var r = t.findMarksAt(n.from), o = 0; o < r.length; ++o)
          if (r[o].__isFold) {
            if (!e) return null;
            (n.cleared = !0), r[o].clear();
          }
        return n;
      }
      if (o && o.call) {
        var s = o;
        o = null;
      } else var s = r(t, o, 'rangeFinder');
      'number' == typeof i && (i = e.Pos(i, 0));
      var c = r(t, o, 'minFoldSize'),
        u = a(!0);
      if (r(t, o, 'scanUp'))
        for (; !u && i.line > t.firstLine(); )
          (i = e.Pos(i.line - 1, 0)), (u = a(!1));
      if (u && !u.cleared && 'unfold' !== l) {
        var f = n(t, o, u);
        e.on(f, 'mousedown', function (t) {
          d.clear(), e.e_preventDefault(t);
        });
        var d = t.markText(u.from, u.to, {
          replacedWith: f,
          clearOnEnter: r(t, o, 'clearOnEnter'),
          __isFold: !0,
        });
        d.on('clear', function (n, r) {
          e.signal(t, 'unfold', t, n, r);
        }),
          e.signal(t, 'fold', t, u.from, u.to);
      }
    }
    function n(e, t, n) {
      var i = r(e, t, 'widget');
      if (
        ('function' == typeof i && (i = i(n.from, n.to)), 'string' == typeof i)
      ) {
        var o = document.createTextNode(i);
        (i = document.createElement('span')),
          i.appendChild(o),
          (i.className = 'CodeMirror-foldmarker');
      } else i && (i = i.cloneNode(!0));
      return i;
    }
    function r(e, t, n) {
      if (t && void 0 !== t[n]) return t[n];
      var r = e.options.foldOptions;
      return r && void 0 !== r[n] ? r[n] : i[n];
    }
    (e.newFoldFunction = function (e, n) {
      return function (r, i) {
        t(r, i, { rangeFinder: e, widget: n });
      };
    }),
      e.defineExtension('foldCode', function (e, n, r) {
        t(this, e, n, r);
      }),
      e.defineExtension('isFolded', function (e) {
        for (var t = this.findMarksAt(e), n = 0; n < t.length; ++n)
          if (t[n].__isFold) return !0;
      }),
      (e.commands.toggleFold = function (e) {
        e.foldCode(e.getCursor());
      }),
      (e.commands.fold = function (e) {
        e.foldCode(e.getCursor(), null, 'fold');
      }),
      (e.commands.unfold = function (e) {
        e.foldCode(e.getCursor(), { scanUp: !1 }, 'unfold');
      }),
      (e.commands.foldAll = function (t) {
        t.operation(function () {
          for (var n = t.firstLine(), r = t.lastLine(); n <= r; n++)
            t.foldCode(e.Pos(n, 0), { scanUp: !1 }, 'fold');
        });
      }),
      (e.commands.unfoldAll = function (t) {
        t.operation(function () {
          for (var n = t.firstLine(), r = t.lastLine(); n <= r; n++)
            t.foldCode(e.Pos(n, 0), { scanUp: !1 }, 'unfold');
        });
      }),
      e.registerHelper('fold', 'combine', function () {
        var e = Array.prototype.slice.call(arguments, 0);
        return function (t, n) {
          for (var r = 0; r < e.length; ++r) {
            var i = e[r](t, n);
            if (i) return i;
          }
        };
      }),
      e.registerHelper('fold', 'auto', function (e, t) {
        for (var n = e.getHelpers(t, 'fold'), r = 0; r < n.length; r++) {
          var i = n[r](e, t);
          if (i) return i;
        }
      });
    var i = {
      rangeFinder: e.fold.auto,
      widget: '↔',
      minFoldSize: 0,
      scanUp: !1,
      clearOnEnter: !0,
    };
    e.defineOption('foldOptions', null),
      e.defineExtension('foldOption', function (e, t) {
        return r(this, e, t);
      });
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    e.registerHelper('fold', 'brace', function (t, n) {
      function r(r) {
        for (var o = n.ch, l = 0; ; ) {
          var a = o <= 0 ? -1 : c.lastIndexOf(r, o - 1);
          if (a != -1) {
            if (1 == l && a < n.ch) break;
            if (
              ((i = t.getTokenTypeAt(e.Pos(s, a + 1))),
              !/^(comment|string)/.test(i))
            )
              return a + 1;
            o = a - 1;
          } else {
            if (1 == l) break;
            (l = 1), (o = c.length);
          }
        }
      }
      var i,
        o,
        l,
        a,
        s = n.line,
        c = t.getLine(s),
        u = r('{'),
        f = r('[');
      if (null != u && (null == f || f > u)) (a = u), (o = '{'), (l = '}');
      else {
        if (null == f) return;
        (a = f), (o = '['), (l = ']');
      }
      var d,
        h,
        p = 1,
        g = t.lastLine();
      e: for (var m = s; m <= g; ++m)
        for (var v = t.getLine(m), y = m == s ? a : 0; ; ) {
          var b = v.indexOf(o, y),
            x = v.indexOf(l, y);
          if (
            (b < 0 && (b = v.length),
            x < 0 && (x = v.length),
            (y = Math.min(b, x)),
            y == v.length)
          )
            break;
          if (t.getTokenTypeAt(e.Pos(m, y + 1)) == i)
            if (y == b) ++p;
            else if (!--p) {
              (d = m), (h = y);
              break e;
            }
          ++y;
        }
      if (null != d && s != d) return { from: e.Pos(s, a), to: e.Pos(d, h) };
    }),
      e.registerHelper('fold', 'import', function (t, n) {
        function r(n) {
          if (n < t.firstLine() || n > t.lastLine()) return null;
          var r = t.getTokenAt(e.Pos(n, 1));
          if (
            (/\S/.test(r.string) || (r = t.getTokenAt(e.Pos(n, r.end + 1))),
            'keyword' != r.type || 'import' != r.string)
          )
            return null;
          for (var i = n, o = Math.min(t.lastLine(), n + 10); i <= o; ++i) {
            var l = t.getLine(i),
              a = l.indexOf(';');
            if (a != -1) return { startCh: r.end, end: e.Pos(i, a) };
          }
        }
        var i,
          o = n.line,
          l = r(o);
        if (!l || r(o - 1) || ((i = r(o - 2)) && i.end.line == o - 1))
          return null;
        for (var a = l.end; ; ) {
          var s = r(a.line + 1);
          if (null == s) break;
          a = s.end;
        }
        return { from: t.clipPos(e.Pos(o, l.startCh + 1)), to: a };
      }),
      e.registerHelper('fold', 'include', function (t, n) {
        function r(n) {
          if (n < t.firstLine() || n > t.lastLine()) return null;
          var r = t.getTokenAt(e.Pos(n, 1));
          return (
            /\S/.test(r.string) || (r = t.getTokenAt(e.Pos(n, r.end + 1))),
            'meta' == r.type && '#include' == r.string.slice(0, 8)
              ? r.start + 8
              : void 0
          );
        }
        var i = n.line,
          o = r(i);
        if (null == o || null != r(i - 1)) return null;
        for (var l = i; ; ) {
          var a = r(l + 1);
          if (null == a) break;
          ++l;
        }
        return { from: e.Pos(i, o + 1), to: t.clipPos(e.Pos(l)) };
      });
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'), require('./foldcode'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror', './foldcode'], e)
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    function t(e) {
      (this.options = e), (this.from = this.to = 0);
    }
    function n(e) {
      return (
        e === !0 && (e = {}),
        null == e.gutter && (e.gutter = 'CodeMirror-foldgutter'),
        null == e.indicatorOpen &&
          (e.indicatorOpen = 'CodeMirror-foldgutter-open'),
        null == e.indicatorFolded &&
          (e.indicatorFolded = 'CodeMirror-foldgutter-folded'),
        e
      );
    }
    function r(e, t) {
      for (var n = e.findMarks(d(t, 0), d(t + 1, 0)), r = 0; r < n.length; ++r)
        if (n[r].__isFold) {
          var i = n[r].find(-1);
          if (i && i.line === t) return n[r];
        }
    }
    function i(e) {
      if ('string' == typeof e) {
        var t = document.createElement('div');
        return (t.className = e + ' CodeMirror-guttermarker-subtle'), t;
      }
      return e.cloneNode(!0);
    }
    function o(e, t, n) {
      var o = e.state.foldGutter.options,
        a = t - 1,
        s = e.foldOption(o, 'minFoldSize'),
        c = e.foldOption(o, 'rangeFinder'),
        u = 'string' == typeof o.indicatorFolded && l(o.indicatorFolded),
        f = 'string' == typeof o.indicatorOpen && l(o.indicatorOpen);
      e.eachLine(t, n, function (t) {
        ++a;
        var n = null,
          l = t.gutterMarkers;
        if ((l && (l = l[o.gutter]), r(e, a))) {
          if (u && l && u.test(l.className)) return;
          n = i(o.indicatorFolded);
        } else {
          var h = d(a, 0),
            p = c && c(e, h);
          if (p && p.to.line - p.from.line >= s) {
            if (f && l && f.test(l.className)) return;
            n = i(o.indicatorOpen);
          }
        }
        (n || l) && e.setGutterMarker(t, o.gutter, n);
      });
    }
    function l(e) {
      return new RegExp('(^|\\s)' + e + '(?:$|\\s)\\s*');
    }
    function a(e) {
      var t = e.getViewport(),
        n = e.state.foldGutter;
      n &&
        (e.operation(function () {
          o(e, t.from, t.to);
        }),
        (n.from = t.from),
        (n.to = t.to));
    }
    function s(e, t, n) {
      var i = e.state.foldGutter;
      if (i) {
        var o = i.options;
        if (n == o.gutter) {
          var l = r(e, t);
          l ? l.clear() : e.foldCode(d(t, 0), o);
        }
      }
    }
    function c(e) {
      var t = e.state.foldGutter;
      if (t) {
        var n = t.options;
        (t.from = t.to = 0),
          clearTimeout(t.changeUpdate),
          (t.changeUpdate = setTimeout(function () {
            a(e);
          }, n.foldOnChangeTimeSpan || 600));
      }
    }
    function u(e) {
      var t = e.state.foldGutter;
      if (t) {
        var n = t.options;
        clearTimeout(t.changeUpdate),
          (t.changeUpdate = setTimeout(function () {
            var n = e.getViewport();
            t.from == t.to || n.from - t.to > 20 || t.from - n.to > 20
              ? a(e)
              : e.operation(function () {
                  n.from < t.from && (o(e, n.from, t.from), (t.from = n.from)),
                    n.to > t.to && (o(e, t.to, n.to), (t.to = n.to));
                });
          }, n.updateViewportTimeSpan || 400));
      }
    }
    function f(e, t) {
      var n = e.state.foldGutter;
      if (n) {
        var r = t.line;
        r >= n.from && r < n.to && o(e, r, r + 1);
      }
    }
    e.defineOption('foldGutter', !1, function (r, i, o) {
      o &&
        o != e.Init &&
        (r.clearGutter(r.state.foldGutter.options.gutter),
        (r.state.foldGutter = null),
        r.off('gutterClick', s),
        r.off('changes', c),
        r.off('viewportChange', u),
        r.off('fold', f),
        r.off('unfold', f),
        r.off('swapDoc', c)),
        i &&
          ((r.state.foldGutter = new t(n(i))),
          a(r),
          r.on('gutterClick', s),
          r.on('changes', c),
          r.on('viewportChange', u),
          r.on('fold', f),
          r.on('unfold', f),
          r.on('swapDoc', c));
    });
    var d = e.Pos;
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    e.registerHelper('fold', 'markdown', function (t, n) {
      function r(n) {
        var r = t.getTokenTypeAt(e.Pos(n, 0));
        return r && /\bheader\b/.test(r);
      }
      function i(e, t, n) {
        var i = t && t.match(/^#+/);
        return i && r(e)
          ? i[0].length
          : ((i = n && n.match(/^[=\-]+\s*$/)),
            i && r(e + 1) ? ('=' == n[0] ? 1 : 2) : o);
      }
      var o = 100,
        l = t.getLine(n.line),
        a = t.getLine(n.line + 1),
        s = i(n.line, l, a);
      if (s !== o) {
        for (
          var c = t.lastLine(), u = n.line, f = t.getLine(u + 2);
          u < c && !(i(u + 1, a, f) <= s);

        )
          ++u, (a = f), (f = t.getLine(u + 2));
        return {
          from: e.Pos(n.line, l.length),
          to: e.Pos(u, t.getLine(u).length),
        };
      }
    });
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    function t(e, t) {
      return e.line - t.line || e.ch - t.ch;
    }
    function n(e, t, n, r) {
      (this.line = t),
        (this.ch = n),
        (this.cm = e),
        (this.text = e.getLine(t)),
        (this.min = r ? Math.max(r.from, e.firstLine()) : e.firstLine()),
        (this.max = r ? Math.min(r.to - 1, e.lastLine()) : e.lastLine());
    }
    function r(e, t) {
      var n = e.cm.getTokenTypeAt(d(e.line, t));
      return n && /\btag\b/.test(n);
    }
    function i(e) {
      if (!(e.line >= e.max))
        return (e.ch = 0), (e.text = e.cm.getLine(++e.line)), !0;
    }
    function o(e) {
      if (!(e.line <= e.min))
        return (e.text = e.cm.getLine(--e.line)), (e.ch = e.text.length), !0;
    }
    function l(e) {
      for (;;) {
        var t = e.text.indexOf('>', e.ch);
        if (t == -1) {
          if (i(e)) continue;
          return;
        }
        {
          if (r(e, t + 1)) {
            var n = e.text.lastIndexOf('/', t),
              o = n > -1 && !/\S/.test(e.text.slice(n + 1, t));
            return (e.ch = t + 1), o ? 'selfClose' : 'regular';
          }
          e.ch = t + 1;
        }
      }
    }
    function a(e) {
      for (;;) {
        var t = e.ch ? e.text.lastIndexOf('<', e.ch - 1) : -1;
        if (t == -1) {
          if (o(e)) continue;
          return;
        }
        if (r(e, t + 1)) {
          (g.lastIndex = t), (e.ch = t);
          var n = g.exec(e.text);
          if (n && n.index == t) return n;
        } else e.ch = t;
      }
    }
    function s(e) {
      for (;;) {
        g.lastIndex = e.ch;
        var t = g.exec(e.text);
        if (!t) {
          if (i(e)) continue;
          return;
        }
        {
          if (r(e, t.index + 1)) return (e.ch = t.index + t[0].length), t;
          e.ch = t.index + 1;
        }
      }
    }
    function c(e) {
      for (;;) {
        var t = e.ch ? e.text.lastIndexOf('>', e.ch - 1) : -1;
        if (t == -1) {
          if (o(e)) continue;
          return;
        }
        {
          if (r(e, t + 1)) {
            var n = e.text.lastIndexOf('/', t),
              i = n > -1 && !/\S/.test(e.text.slice(n + 1, t));
            return (e.ch = t + 1), i ? 'selfClose' : 'regular';
          }
          e.ch = t;
        }
      }
    }
    function u(e, t) {
      for (var n = []; ; ) {
        var r,
          i = s(e),
          o = e.line,
          a = e.ch - (i ? i[0].length : 0);
        if (!i || !(r = l(e))) return;
        if ('selfClose' != r)
          if (i[1]) {
            for (var c = n.length - 1; c >= 0; --c)
              if (n[c] == i[2]) {
                n.length = c;
                break;
              }
            if (c < 0 && (!t || t == i[2]))
              return { tag: i[2], from: d(o, a), to: d(e.line, e.ch) };
          } else n.push(i[2]);
      }
    }
    function f(e, t) {
      for (var n = []; ; ) {
        var r = c(e);
        if (!r) return;
        if ('selfClose' != r) {
          var i = e.line,
            o = e.ch,
            l = a(e);
          if (!l) return;
          if (l[1]) n.push(l[2]);
          else {
            for (var s = n.length - 1; s >= 0; --s)
              if (n[s] == l[2]) {
                n.length = s;
                break;
              }
            if (s < 0 && (!t || t == l[2]))
              return { tag: l[2], from: d(e.line, e.ch), to: d(i, o) };
          }
        } else a(e);
      }
    }
    var d = e.Pos,
      h =
        'A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD',
      p = h + '-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040',
      g = new RegExp('<(/?)([' + h + '][' + p + ']*)', 'g');
    e.registerHelper('fold', 'xml', function (e, r) {
      for (var i = new n(e, r.line, 0); ; ) {
        var o = s(i);
        if (!o || i.line != r.line) return;
        var a = l(i);
        if (!a) return;
        if (!o[1] && 'selfClose' != a) {
          var c = d(i.line, i.ch),
            f = u(i, o[2]);
          return f && t(f.from, c) > 0 ? { from: c, to: f.from } : null;
        }
      }
    }),
      (e.findMatchingTag = function (e, r, i) {
        var o = new n(e, r.line, r.ch, i);
        if (o.text.indexOf('>') != -1 || o.text.indexOf('<') != -1) {
          var s = l(o),
            c = s && d(o.line, o.ch),
            h = s && a(o);
          if (s && h && !(t(o, r) > 0)) {
            var p = { from: d(o.line, o.ch), to: c, tag: h[2] };
            return 'selfClose' == s
              ? { open: p, close: null, at: 'open' }
              : h[1]
              ? { open: f(o, h[2]), close: p, at: 'close' }
              : ((o = new n(e, c.line, c.ch, i)),
                { open: p, close: u(o, h[2]), at: 'open' });
          }
        }
      }),
      (e.findEnclosingTag = function (e, t, r, i) {
        for (var o = new n(e, t.line, t.ch, r); ; ) {
          var l = f(o, i);
          if (!l) break;
          var a = new n(e, t.line, t.ch, r),
            s = u(a, l.tag);
          if (s) return { open: l, close: s };
        }
      }),
      (e.scanForClosingTag = function (e, t, r, i) {
        var o = new n(e, t.line, t.ch, i ? { from: 0, to: i } : null);
        return u(o, r);
      });
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    function t(t, n) {
      var r = t.getLine(n),
        i = r.search(/\S/);
      return i == -1 || /\bcomment\b/.test(t.getTokenTypeAt(e.Pos(n, i + 1)))
        ? -1
        : e.countColumn(r, null, t.getOption('tabSize'));
    }
    e.registerHelper('fold', 'indent', function (n, r) {
      var i = t(n, r.line);
      if (!(i < 0)) {
        for (var o = null, l = r.line + 1, a = n.lastLine(); l <= a; ++l) {
          var s = t(n, l);
          if (s == -1);
          else {
            if (!(s > i)) break;
            o = l;
          }
        }
        return o
          ? {
              from: e.Pos(r.line, n.getLine(r.line).length),
              to: e.Pos(o, n.getLine(o).length),
            }
          : void 0;
      }
    });
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    e.registerGlobalHelper(
      'fold',
      'comment',
      function (e) {
        return e.blockCommentStart && e.blockCommentEnd;
      },
      function (t, n) {
        var r = t.getModeAt(n),
          i = r.blockCommentStart,
          o = r.blockCommentEnd;
        if (i && o) {
          for (var l, a = n.line, s = t.getLine(a), c = n.ch, u = 0; ; ) {
            var f = c <= 0 ? -1 : s.lastIndexOf(i, c - 1);
            if (f != -1) {
              if (1 == u && f < n.ch) return;
              if (
                /comment/.test(t.getTokenTypeAt(e.Pos(a, f + 1))) &&
                (0 == f ||
                  s.slice(f - o.length, f) == o ||
                  !/comment/.test(t.getTokenTypeAt(e.Pos(a, f))))
              ) {
                l = f + i.length;
                break;
              }
              c = f - 1;
            } else {
              if (1 == u) return;
              (u = 1), (c = s.length);
            }
          }
          var d,
            h,
            p = 1,
            g = t.lastLine();
          e: for (var m = a; m <= g; ++m)
            for (var v = t.getLine(m), y = m == a ? l : 0; ; ) {
              var b = v.indexOf(i, y),
                x = v.indexOf(o, y);
              if (
                (b < 0 && (b = v.length),
                x < 0 && (x = v.length),
                (y = Math.min(b, x)),
                y == v.length)
              )
                break;
              if (y == b) ++p;
              else if (!--p) {
                (d = m), (h = y);
                break e;
              }
              ++y;
            }
          if (null != d && (a != d || h != l))
            return { from: e.Pos(a, l), to: e.Pos(d, h) };
        }
      }
    );
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    function t(e) {
      var t = e.getWrapperElement();
      (e.state.fullScreenRestore = {
        scrollTop: window.pageYOffset,
        scrollLeft: window.pageXOffset,
        width: t.style.width,
        height: t.style.height,
      }),
        (t.style.width = ''),
        (t.style.height = 'auto'),
        (t.className += ' CodeMirror-fullscreen'),
        (document.documentElement.style.overflow = 'hidden'),
        e.refresh();
    }
    function n(e) {
      var t = e.getWrapperElement();
      (t.className = t.className.replace(/\s*CodeMirror-fullscreen\b/, '')),
        (document.documentElement.style.overflow = '');
      var n = e.state.fullScreenRestore;
      (t.style.width = n.width),
        (t.style.height = n.height),
        window.scrollTo(n.scrollLeft, n.scrollTop),
        e.refresh();
    }
    e.defineOption('fullScreen', !1, function (r, i, o) {
      o == e.Init && (o = !1), !o != !i && (i ? t(r) : n(r));
    });
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    function t(e) {
      for (var t = 0; t < e.state.activeLines.length; t++)
        e.removeLineClass(e.state.activeLines[t], 'wrap', o),
          e.removeLineClass(e.state.activeLines[t], 'background', l),
          e.removeLineClass(e.state.activeLines[t], 'gutter', a);
    }
    function n(e, t) {
      if (e.length != t.length) return !1;
      for (var n = 0; n < e.length; n++) if (e[n] != t[n]) return !1;
      return !0;
    }
    function r(e, r) {
      for (var i = [], s = 0; s < r.length; s++) {
        var c = r[s],
          u = e.getOption('styleActiveLine');
        if (
          'object' == typeof u && u.nonEmpty
            ? c.anchor.line == c.head.line
            : c.empty()
        ) {
          var f = e.getLineHandleVisualStart(c.head.line);
          i[i.length - 1] != f && i.push(f);
        }
      }
      n(e.state.activeLines, i) ||
        e.operation(function () {
          t(e);
          for (var n = 0; n < i.length; n++)
            e.addLineClass(i[n], 'wrap', o),
              e.addLineClass(i[n], 'background', l),
              e.addLineClass(i[n], 'gutter', a);
          e.state.activeLines = i;
        });
    }
    function i(e, t) {
      r(e, t.ranges);
    }
    var o = 'CodeMirror-activeline',
      l = 'CodeMirror-activeline-background',
      a = 'CodeMirror-activeline-gutter';
    e.defineOption('styleActiveLine', !1, function (n, o, l) {
      var a = l != e.Init && l;
      o != a &&
        (a &&
          (n.off('beforeSelectionChange', i), t(n), delete n.state.activeLines),
        o &&
          ((n.state.activeLines = []),
          r(n, n.listSelections()),
          n.on('beforeSelectionChange', i)));
    });
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    e.overlayMode = function (t, n, r) {
      return {
        startState: function () {
          return {
            base: e.startState(t),
            overlay: e.startState(n),
            basePos: 0,
            baseCur: null,
            overlayPos: 0,
            overlayCur: null,
            streamSeen: null,
          };
        },
        copyState: function (r) {
          return {
            base: e.copyState(t, r.base),
            overlay: e.copyState(n, r.overlay),
            basePos: r.basePos,
            baseCur: null,
            overlayPos: r.overlayPos,
            overlayCur: null,
          };
        },
        token: function (e, i) {
          return (
            (e != i.streamSeen ||
              Math.min(i.basePos, i.overlayPos) < e.start) &&
              ((i.streamSeen = e), (i.basePos = i.overlayPos = e.start)),
            e.start == i.basePos &&
              ((i.baseCur = t.token(e, i.base)), (i.basePos = e.pos)),
            e.start == i.overlayPos &&
              ((e.pos = e.start),
              (i.overlayCur = n.token(e, i.overlay)),
              (i.overlayPos = e.pos)),
            (e.pos = Math.min(i.basePos, i.overlayPos)),
            null == i.overlayCur
              ? i.baseCur
              : (null != i.baseCur && i.overlay.combineTokens) ||
                (r && null == i.overlay.combineTokens)
              ? i.baseCur + ' ' + i.overlayCur
              : i.overlayCur
          );
        },
        indent:
          t.indent &&
          function (e, n, r) {
            return t.indent(e.base, n, r);
          },
        electricChars: t.electricChars,
        innerMode: function (e) {
          return { state: e.base, mode: t };
        },
        blankLine: function (e) {
          var i, o;
          return (
            t.blankLine && (i = t.blankLine(e.base)),
            n.blankLine && (o = n.blankLine(e.overlay)),
            null == o ? i : r && null != i ? i + ' ' + o : o
          );
        },
      };
    };
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    e.runMode = function (t, n, r, i) {
      var o = e.getMode(e.defaults, n),
        l = (i && i.tabSize) || e.defaults.tabSize;
      if (r.appendChild) {
        var a = /MSIE \d/.test(navigator.userAgent),
          s = a && (null == document.documentMode || document.documentMode < 9),
          c = r,
          u = 0;
        (c.innerHTML = ''),
          (r = function (e, t) {
            if ('\n' == e)
              return (
                c.appendChild(document.createTextNode(s ? '\r' : e)),
                void (u = 0)
              );
            for (var n = '', r = 0; ; ) {
              var i = e.indexOf('\t', r);
              if (i == -1) {
                (n += e.slice(r)), (u += e.length - r);
                break;
              }
              (u += i - r), (n += e.slice(r, i));
              var o = l - (u % l);
              u += o;
              for (var a = 0; a < o; ++a) n += ' ';
              r = i + 1;
            }
            if (t) {
              var f = c.appendChild(document.createElement('span'));
              (f.className = 'cm-' + t.replace(/ +/g, ' cm-')),
                f.appendChild(document.createTextNode(n));
            } else c.appendChild(document.createTextNode(n));
          });
      }
      for (
        var f = e.splitLines(t),
          d = (i && i.state) || e.startState(o),
          h = 0,
          p = f.length;
        h < p;
        ++h
      ) {
        h && r('\n');
        var g = new e.StringStream(f[h], null, {
          lookAhead: function (e) {
            return f[h + e];
          },
          baseToken: function () {},
        });
        for (!g.string && o.blankLine && o.blankLine(d); !g.eol(); ) {
          var m = o.token(g, d);
          r(g.current(), m, h, g.start, d, o), (g.start = g.pos);
        }
      }
    };
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(
          require('../../lib/codemirror'),
          require('./searchcursor'),
          require('../dialog/dialog')
        )
      : 'function' == typeof define && define.amd
      ? define(
          ['../../lib/codemirror', './searchcursor', '../dialog/dialog'],
          e
        )
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    function t(e, t) {
      return (
        'string' == typeof e
          ? (e = new RegExp(
              e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, '\\$&'),
              t ? 'gi' : 'g'
            ))
          : e.global || (e = new RegExp(e.source, e.ignoreCase ? 'gi' : 'g')),
        {
          token: function (t) {
            e.lastIndex = t.pos;
            var n = e.exec(t.string);
            return n && n.index == t.pos
              ? ((t.pos += n[0].length || 1), 'searching')
              : void (n ? (t.pos = n.index) : t.skipToEnd());
          },
        }
      );
    }
    function n() {
      (this.posFrom = this.posTo = this.lastQuery = this.query = null),
        (this.overlay = null);
    }
    function r(e) {
      return e.state.search || (e.state.search = new n());
    }
    function i(e) {
      return 'string' == typeof e && e == e.toLowerCase();
    }
    function o(e, t, n) {
      return e.getSearchCursor(t, n, { caseFold: i(t), multiline: !0 });
    }
    function l(e, t, n, r, i) {
      e.openDialog(t, r, {
        value: n,
        selectValueOnOpen: !0,
        closeOnEnter: !1,
        onClose: function () {
          p(e);
        },
        onKeyDown: i,
        bottom: e.options.search.bottom,
      });
    }
    function a(e, t, n, r, i) {
      e.openDialog
        ? e.openDialog(t, i, {
            value: r,
            selectValueOnOpen: !0,
            bottom: e.options.search.bottom,
          })
        : i(prompt(n, r));
    }
    function s(e, t, n, r) {
      e.openConfirm ? e.openConfirm(t, r) : confirm(n) && r[0]();
    }
    function c(e) {
      return e.replace(/\\([nrt\\])/g, function (e, t) {
        return 'n' == t
          ? '\n'
          : 'r' == t
          ? '\r'
          : 't' == t
          ? '\t'
          : '\\' == t
          ? '\\'
          : e;
      });
    }
    function u(e) {
      var t = e.match(/^\/(.*)\/([a-z]*)$/);
      if (t)
        try {
          e = new RegExp(t[1], t[2].indexOf('i') == -1 ? '' : 'i');
        } catch (n) {}
      else e = c(e);
      return ('string' == typeof e ? '' == e : e.test('')) && (e = /x^/), e;
    }
    function f(e, n, r) {
      (n.queryText = r),
        (n.query = u(r)),
        e.removeOverlay(n.overlay, i(n.query)),
        (n.overlay = t(n.query, i(n.query))),
        e.addOverlay(n.overlay),
        e.showMatchesOnScrollbar &&
          (n.annotate && (n.annotate.clear(), (n.annotate = null)),
          (n.annotate = e.showMatchesOnScrollbar(n.query, i(n.query))));
    }
    function d(t, n, i, o) {
      var s = r(t);
      if (s.query) return h(t, n);
      var c = t.getSelection() || s.lastQuery;
      if (
        (c instanceof RegExp && 'x^' == c.source && (c = null),
        i && t.openDialog)
      ) {
        var u = null,
          d = function (n, r) {
            e.e_stop(r),
              n &&
                (n != s.queryText &&
                  (f(t, s, n), (s.posFrom = s.posTo = t.getCursor())),
                u && (u.style.opacity = 1),
                h(t, r.shiftKey, function (e, n) {
                  var r;
                  n.line < 3 &&
                    document.querySelector &&
                    (r =
                      t.display.wrapper.querySelector('.CodeMirror-dialog')) &&
                    r.getBoundingClientRect().bottom - 4 >
                      t.cursorCoords(n, 'window').top &&
                    ((u = r).style.opacity = 0.4);
                }));
          };
        l(t, m(t), c, d, function (n, i) {
          var o = e.keyName(n),
            l = t.getOption('extraKeys'),
            a = (l && l[o]) || e.keyMap[t.getOption('keyMap')][o];
          'findNext' == a ||
          'findPrev' == a ||
          'findPersistentNext' == a ||
          'findPersistentPrev' == a
            ? (e.e_stop(n), f(t, r(t), i), t.execCommand(a))
            : ('find' != a && 'findPersistent' != a) || (e.e_stop(n), d(i, n));
        }),
          o && c && (f(t, s, c), h(t, n));
      } else
        a(t, m(t), 'Search for:', c, function (e) {
          e &&
            !s.query &&
            t.operation(function () {
              f(t, s, e), (s.posFrom = s.posTo = t.getCursor()), h(t, n);
            });
        });
    }
    function h(t, n, i) {
      t.operation(function () {
        var l = r(t),
          a = o(t, l.query, n ? l.posFrom : l.posTo);
        (a.find(n) ||
          ((a = o(
            t,
            l.query,
            n ? e.Pos(t.lastLine()) : e.Pos(t.firstLine(), 0)
          )),
          a.find(n))) &&
          (t.setSelection(a.from(), a.to()),
          t.scrollIntoView({ from: a.from(), to: a.to() }, 20),
          (l.posFrom = a.from()),
          (l.posTo = a.to()),
          i && i(a.from(), a.to()));
      });
    }
    function p(e) {
      e.operation(function () {
        var t = r(e);
        (t.lastQuery = t.query),
          t.query &&
            ((t.query = t.queryText = null),
            e.removeOverlay(t.overlay),
            t.annotate && (t.annotate.clear(), (t.annotate = null)));
      });
    }
    function g(e, t) {
      var n = e ? document.createElement(e) : document.createDocumentFragment();
      for (var r in t) n[r] = t[r];
      for (var i = 2; i < arguments.length; i++) {
        var o = arguments[i];
        n.appendChild('string' == typeof o ? document.createTextNode(o) : o);
      }
      return n;
    }
    function m(e) {
      return g(
        '',
        null,
        g(
          'span',
          { className: 'CodeMirror-search-label' },
          e.phrase('Search:')
        ),
        ' ',
        g('input', {
          type: 'text',
          style: 'width: 10em',
          className: 'CodeMirror-search-field',
        }),
        ' ',
        g(
          'span',
          { style: 'color: #888', className: 'CodeMirror-search-hint' },
          e.phrase('(Use /re/ syntax for regexp search)')
        )
      );
    }
    function v(e) {
      return g(
        '',
        null,
        ' ',
        g('input', {
          type: 'text',
          style: 'width: 10em',
          className: 'CodeMirror-search-field',
        }),
        ' ',
        g(
          'span',
          { style: 'color: #888', className: 'CodeMirror-search-hint' },
          e.phrase('(Use /re/ syntax for regexp search)')
        )
      );
    }
    function y(e) {
      return g(
        '',
        null,
        g('span', { className: 'CodeMirror-search-label' }, e.phrase('With:')),
        ' ',
        g('input', {
          type: 'text',
          style: 'width: 10em',
          className: 'CodeMirror-search-field',
        })
      );
    }
    function b(e) {
      return g(
        '',
        null,
        g(
          'span',
          { className: 'CodeMirror-search-label' },
          e.phrase('Replace?')
        ),
        ' ',
        g('button', {}, e.phrase('Yes')),
        ' ',
        g('button', {}, e.phrase('No')),
        ' ',
        g('button', {}, e.phrase('All')),
        ' ',
        g('button', {}, e.phrase('Stop'))
      );
    }
    function x(e, t, n) {
      e.operation(function () {
        for (var r = o(e, t); r.findNext(); )
          if ('string' != typeof t) {
            var i = e.getRange(r.from(), r.to()).match(t);
            r.replace(
              n.replace(/\$(\d)/g, function (e, t) {
                return i[t];
              })
            );
          } else r.replace(n);
      });
    }
    function w(e, t) {
      if (!e.getOption('readOnly')) {
        var n = e.getSelection() || r(e).lastQuery,
          i = t ? e.phrase('Replace all:') : e.phrase('Replace:'),
          l = g(
            '',
            null,
            g('span', { className: 'CodeMirror-search-label' }, i),
            v(e)
          );
        a(e, l, i, n, function (n) {
          n &&
            ((n = u(n)),
            a(e, y(e), e.phrase('Replace with:'), '', function (r) {
              if (((r = c(r)), t)) x(e, n, r);
              else {
                p(e);
                var i = o(e, n, e.getCursor('from')),
                  l = function () {
                    var t,
                      c = i.from();
                    (!(t = i.findNext()) &&
                      ((i = o(e, n)),
                      !(t = i.findNext()) ||
                        (c &&
                          i.from().line == c.line &&
                          i.from().ch == c.ch))) ||
                      (e.setSelection(i.from(), i.to()),
                      e.scrollIntoView({ from: i.from(), to: i.to() }),
                      s(e, b(e), e.phrase('Replace?'), [
                        function () {
                          a(t);
                        },
                        l,
                        function () {
                          x(e, n, r);
                        },
                      ]));
                  },
                  a = function (e) {
                    i.replace(
                      'string' == typeof n
                        ? r
                        : r.replace(/\$(\d)/g, function (t, n) {
                            return e[n];
                          })
                    ),
                      l();
                  };
                l();
              }
            }));
        });
      }
    }
    e.defineOption('search', { bottom: !1 }),
      (e.commands.find = function (e) {
        p(e), d(e);
      }),
      (e.commands.findPersistent = function (e) {
        p(e), d(e, !1, !0);
      }),
      (e.commands.findPersistentNext = function (e) {
        d(e, !1, !0, !0);
      }),
      (e.commands.findPersistentPrev = function (e) {
        d(e, !0, !0, !0);
      }),
      (e.commands.findNext = d),
      (e.commands.findPrev = function (e) {
        d(e, !0);
      }),
      (e.commands.clearSearch = p),
      (e.commands.replace = w),
      (e.commands.replaceAll = function (e) {
        w(e, !0);
      });
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    function t(e) {
      var t = e.flags;
      return null != t
        ? t
        : (e.ignoreCase ? 'i' : '') +
            (e.global ? 'g' : '') +
            (e.multiline ? 'm' : '');
    }
    function n(e, n) {
      for (var r = t(e), i = r, o = 0; o < n.length; o++)
        i.indexOf(n.charAt(o)) == -1 && (i += n.charAt(o));
      return r == i ? e : new RegExp(e.source, i);
    }
    function r(e) {
      return /\\s|\\n|\n|\\W|\\D|\[\^/.test(e.source);
    }
    function i(e, t, r) {
      t = n(t, 'g');
      for (var i = r.line, o = r.ch, l = e.lastLine(); i <= l; i++, o = 0) {
        t.lastIndex = o;
        var a = e.getLine(i),
          s = t.exec(a);
        if (s)
          return {
            from: g(i, s.index),
            to: g(i, s.index + s[0].length),
            match: s,
          };
      }
    }
    function o(e, t, o) {
      if (!r(t)) return i(e, t, o);
      t = n(t, 'gm');
      for (var l, a = 1, s = o.line, c = e.lastLine(); s <= c; ) {
        for (var u = 0; u < a && !(s > c); u++) {
          var f = e.getLine(s++);
          l = null == l ? f : l + '\n' + f;
        }
        (a = 2 * a), (t.lastIndex = o.ch);
        var d = t.exec(l);
        if (d) {
          var h = l.slice(0, d.index).split('\n'),
            p = d[0].split('\n'),
            m = o.line + h.length - 1,
            v = h[h.length - 1].length;
          return {
            from: g(m, v),
            to: g(
              m + p.length - 1,
              1 == p.length ? v + p[0].length : p[p.length - 1].length
            ),
            match: d,
          };
        }
      }
    }
    function l(e, t, n) {
      for (var r, i = 0; i <= e.length; ) {
        t.lastIndex = i;
        var o = t.exec(e);
        if (!o) break;
        var l = o.index + o[0].length;
        if (l > e.length - n) break;
        (!r || l > r.index + r[0].length) && (r = o), (i = o.index + 1);
      }
      return r;
    }
    function a(e, t, r) {
      t = n(t, 'g');
      for (var i = r.line, o = r.ch, a = e.firstLine(); i >= a; i--, o = -1) {
        var s = e.getLine(i),
          c = l(s, t, o < 0 ? 0 : s.length - o);
        if (c)
          return {
            from: g(i, c.index),
            to: g(i, c.index + c[0].length),
            match: c,
          };
      }
    }
    function s(e, t, i) {
      if (!r(t)) return a(e, t, i);
      t = n(t, 'gm');
      for (
        var o,
          s = 1,
          c = e.getLine(i.line).length - i.ch,
          u = i.line,
          f = e.firstLine();
        u >= f;

      ) {
        for (var d = 0; d < s && u >= f; d++) {
          var h = e.getLine(u--);
          o = null == o ? h : h + '\n' + o;
        }
        s *= 2;
        var p = l(o, t, c);
        if (p) {
          var m = o.slice(0, p.index).split('\n'),
            v = p[0].split('\n'),
            y = u + m.length,
            b = m[m.length - 1].length;
          return {
            from: g(y, b),
            to: g(
              y + v.length - 1,
              1 == v.length ? b + v[0].length : v[v.length - 1].length
            ),
            match: p,
          };
        }
      }
    }
    function c(e, t, n, r) {
      if (e.length == t.length) return n;
      for (var i = 0, o = n + Math.max(0, e.length - t.length); ; ) {
        if (i == o) return i;
        var l = (i + o) >> 1,
          a = r(e.slice(0, l)).length;
        if (a == n) return l;
        a > n ? (o = l) : (i = l + 1);
      }
    }
    function u(e, t, n, r) {
      if (!t.length) return null;
      var i = r ? h : p,
        o = i(t).split(/\r|\n\r?/);
      e: for (
        var l = n.line, a = n.ch, s = e.lastLine() + 1 - o.length;
        l <= s;
        l++, a = 0
      ) {
        var u = e.getLine(l).slice(a),
          f = i(u);
        if (1 == o.length) {
          var d = f.indexOf(o[0]);
          if (d == -1) continue e;
          var n = c(u, f, d, i) + a;
          return {
            from: g(l, c(u, f, d, i) + a),
            to: g(l, c(u, f, d + o[0].length, i) + a),
          };
        }
        var m = f.length - o[0].length;
        if (f.slice(m) == o[0]) {
          for (var v = 1; v < o.length - 1; v++)
            if (i(e.getLine(l + v)) != o[v]) continue e;
          var y = e.getLine(l + o.length - 1),
            b = i(y),
            x = o[o.length - 1];
          if (b.slice(0, x.length) == x)
            return {
              from: g(l, c(u, f, m, i) + a),
              to: g(l + o.length - 1, c(y, b, x.length, i)),
            };
        }
      }
    }
    function f(e, t, n, r) {
      if (!t.length) return null;
      var i = r ? h : p,
        o = i(t).split(/\r|\n\r?/);
      e: for (
        var l = n.line, a = n.ch, s = e.firstLine() - 1 + o.length;
        l >= s;
        l--, a = -1
      ) {
        var u = e.getLine(l);
        a > -1 && (u = u.slice(0, a));
        var f = i(u);
        if (1 == o.length) {
          var d = f.lastIndexOf(o[0]);
          if (d == -1) continue e;
          return {
            from: g(l, c(u, f, d, i)),
            to: g(l, c(u, f, d + o[0].length, i)),
          };
        }
        var m = o[o.length - 1];
        if (f.slice(0, m.length) == m) {
          for (var v = 1, n = l - o.length + 1; v < o.length - 1; v++)
            if (i(e.getLine(n + v)) != o[v]) continue e;
          var y = e.getLine(l + 1 - o.length),
            b = i(y);
          if (b.slice(b.length - o[0].length) == o[0])
            return {
              from: g(l + 1 - o.length, c(y, b, y.length - o[0].length, i)),
              to: g(l, c(u, f, m.length, i)),
            };
        }
      }
    }
    function d(e, t, r, l) {
      (this.atOccurrence = !1),
        (this.doc = e),
        (r = r ? e.clipPos(r) : g(0, 0)),
        (this.pos = { from: r, to: r });
      var c;
      'object' == typeof l ? (c = l.caseFold) : ((c = l), (l = null)),
        'string' == typeof t
          ? (null == c && (c = !1),
            (this.matches = function (n, r) {
              return (n ? f : u)(e, t, r, c);
            }))
          : ((t = n(t, 'gm')),
            l && l.multiline === !1
              ? (this.matches = function (n, r) {
                  return (n ? a : i)(e, t, r);
                })
              : (this.matches = function (n, r) {
                  return (n ? s : o)(e, t, r);
                }));
    }
    var h,
      p,
      g = e.Pos;
    String.prototype.normalize
      ? ((h = function (e) {
          return e.normalize('NFD').toLowerCase();
        }),
        (p = function (e) {
          return e.normalize('NFD');
        }))
      : ((h = function (e) {
          return e.toLowerCase();
        }),
        (p = function (e) {
          return e;
        })),
      (d.prototype = {
        findNext: function () {
          return this.find(!1);
        },
        findPrevious: function () {
          return this.find(!0);
        },
        find: function (t) {
          for (
            var n = this.matches(
              t,
              this.doc.clipPos(t ? this.pos.from : this.pos.to)
            );
            n && 0 == e.cmpPos(n.from, n.to);

          )
            t
              ? n.from.ch
                ? (n.from = g(n.from.line, n.from.ch - 1))
                : (n =
                    n.from.line == this.doc.firstLine()
                      ? null
                      : this.matches(t, this.doc.clipPos(g(n.from.line - 1))))
              : n.to.ch < this.doc.getLine(n.to.line).length
              ? (n.to = g(n.to.line, n.to.ch + 1))
              : (n =
                  n.to.line == this.doc.lastLine()
                    ? null
                    : this.matches(t, g(n.to.line + 1, 0)));
          if (n)
            return (
              (this.pos = n), (this.atOccurrence = !0), this.pos.match || !0
            );
          var r = g(t ? this.doc.firstLine() : this.doc.lastLine() + 1, 0);
          return (this.pos = { from: r, to: r }), (this.atOccurrence = !1);
        },
        from: function () {
          if (this.atOccurrence) return this.pos.from;
        },
        to: function () {
          if (this.atOccurrence) return this.pos.to;
        },
        replace: function (t, n) {
          if (this.atOccurrence) {
            var r = e.splitLines(t);
            this.doc.replaceRange(r, this.pos.from, this.pos.to, n),
              (this.pos.to = g(
                this.pos.from.line + r.length - 1,
                r[r.length - 1].length + (1 == r.length ? this.pos.from.ch : 0)
              ));
          }
        },
      }),
      e.defineExtension('getSearchCursor', function (e, t, n) {
        return new d(this.doc, e, t, n);
      }),
      e.defineDocExtension('getSearchCursor', function (e, t, n) {
        return new d(this, e, t, n);
      }),
      e.defineExtension('selectMatches', function (t, n) {
        for (
          var r = [], i = this.getSearchCursor(t, this.getCursor('from'), n);
          i.findNext() && !(e.cmpPos(i.to(), this.getCursor('to')) > 0);

        )
          r.push({ anchor: i.from(), head: i.to() });
        r.length && this.setSelections(r, 0);
      });
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'), require('../fold/xml-fold'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror', '../fold/xml-fold'], e)
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    function t(e) {
      e.state.tagHit && e.state.tagHit.clear(),
        e.state.tagOther && e.state.tagOther.clear(),
        (e.state.tagHit = e.state.tagOther = null);
    }
    function n(n) {
      (n.state.failedTagMatch = !1),
        n.operation(function () {
          if ((t(n), !n.somethingSelected())) {
            var r = n.getCursor(),
              i = n.getViewport();
            (i.from = Math.min(i.from, r.line)),
              (i.to = Math.max(r.line + 1, i.to));
            var o = e.findMatchingTag(n, r, i);
            if (o) {
              if (n.state.matchBothTags) {
                var l = 'open' == o.at ? o.open : o.close;
                l &&
                  (n.state.tagHit = n.markText(l.from, l.to, {
                    className: 'CodeMirror-matchingtag',
                  }));
              }
              var a = 'close' == o.at ? o.open : o.close;
              a
                ? (n.state.tagOther = n.markText(a.from, a.to, {
                    className: 'CodeMirror-matchingtag',
                  }))
                : (n.state.failedTagMatch = !0);
            }
          }
        });
    }
    function r(e) {
      e.state.failedTagMatch && n(e);
    }
    e.defineOption('matchTags', !1, function (i, o, l) {
      l &&
        l != e.Init &&
        (i.off('cursorActivity', n), i.off('viewportChange', r), t(i)),
        o &&
          ((i.state.matchBothTags = 'object' == typeof o && o.bothTags),
          i.on('cursorActivity', n),
          i.on('viewportChange', r),
          n(i));
    }),
      (e.commands.toMatchingTag = function (t) {
        var n = e.findMatchingTag(t, t.getCursor());
        if (n) {
          var r = 'close' == n.at ? n.open : n.close;
          r && t.extendSelection(r.to, r.from);
        }
      });
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    function t(e) {
      return (e && e.bracketRegex) || /[(){}[\]]/;
    }
    function n(e, n, i) {
      var o = e.getLineHandle(n.line),
        l = n.ch - 1,
        a = i && i.afterCursor;
      null == a &&
        (a = /(^| )cm-fat-cursor($| )/.test(e.getWrapperElement().className));
      var u = t(i),
        f =
          (!a && l >= 0 && u.test(o.text.charAt(l)) && c[o.text.charAt(l)]) ||
          (u.test(o.text.charAt(l + 1)) && c[o.text.charAt(++l)]);
      if (!f) return null;
      var d = '>' == f.charAt(1) ? 1 : -1;
      if (i && i.strict && d > 0 != (l == n.ch)) return null;
      var h = e.getTokenTypeAt(s(n.line, l + 1)),
        p = r(e, s(n.line, l + (d > 0 ? 1 : 0)), d, h, i);
      return null == p
        ? null
        : {
            from: s(n.line, l),
            to: p && p.pos,
            match: p && p.ch == f.charAt(0),
            forward: d > 0,
          };
    }
    function r(e, n, r, i, o) {
      for (
        var l = (o && o.maxScanLineLength) || 1e4,
          a = (o && o.maxScanLines) || 1e3,
          u = [],
          f = t(o),
          d =
            r > 0
              ? Math.min(n.line + a, e.lastLine() + 1)
              : Math.max(e.firstLine() - 1, n.line - a),
          h = n.line;
        h != d;
        h += r
      ) {
        var p = e.getLine(h);
        if (p) {
          var g = r > 0 ? 0 : p.length - 1,
            m = r > 0 ? p.length : -1;
          if (!(p.length > l))
            for (h == n.line && (g = n.ch - (r < 0 ? 1 : 0)); g != m; g += r) {
              var v = p.charAt(g);
              if (
                f.test(v) &&
                (void 0 === i ||
                  (e.getTokenTypeAt(s(h, g + 1)) || '') == (i || ''))
              ) {
                var y = c[v];
                if (y && ('>' == y.charAt(1)) == r > 0) u.push(v);
                else {
                  if (!u.length) return { pos: s(h, g), ch: v };
                  u.pop();
                }
              }
            }
        }
      }
      return h - r != (r > 0 ? e.lastLine() : e.firstLine()) && null;
    }
    function i(e, t, r) {
      for (
        var i = e.state.matchBrackets.maxHighlightLineLength || 1e3,
          o = r && r.highlightNonMatching,
          l = [],
          c = e.listSelections(),
          u = 0;
        u < c.length;
        u++
      ) {
        var f = c[u].empty() && n(e, c[u].head, r);
        if (f && (f.match || o !== !1) && e.getLine(f.from.line).length <= i) {
          var d = f.match
            ? 'CodeMirror-matchingbracket'
            : 'CodeMirror-nonmatchingbracket';
          l.push(
            e.markText(f.from, s(f.from.line, f.from.ch + 1), { className: d })
          ),
            f.to &&
              e.getLine(f.to.line).length <= i &&
              l.push(
                e.markText(f.to, s(f.to.line, f.to.ch + 1), { className: d })
              );
        }
      }
      if (l.length) {
        a && e.state.focused && e.focus();
        var h = function () {
          e.operation(function () {
            for (var e = 0; e < l.length; e++) l[e].clear();
          });
        };
        if (!t) return h;
        setTimeout(h, 800);
      }
    }
    function o(e) {
      e.operation(function () {
        e.state.matchBrackets.currentlyHighlighted &&
          (e.state.matchBrackets.currentlyHighlighted(),
          (e.state.matchBrackets.currentlyHighlighted = null)),
          (e.state.matchBrackets.currentlyHighlighted = i(
            e,
            !1,
            e.state.matchBrackets
          ));
      });
    }
    function l(e) {
      e.state.matchBrackets &&
        e.state.matchBrackets.currentlyHighlighted &&
        (e.state.matchBrackets.currentlyHighlighted(),
        (e.state.matchBrackets.currentlyHighlighted = null));
    }
    var a =
        /MSIE \d/.test(navigator.userAgent) &&
        (null == document.documentMode || document.documentMode < 8),
      s = e.Pos,
      c = {
        '(': ')>',
        ')': '(<',
        '[': ']>',
        ']': '[<',
        '{': '}>',
        '}': '{<',
        '<': '>>',
        '>': '<<',
      };
    e.defineOption('matchBrackets', !1, function (t, n, r) {
      r &&
        r != e.Init &&
        (t.off('cursorActivity', o), t.off('focus', o), t.off('blur', l), l(t)),
        n &&
          ((t.state.matchBrackets = 'object' == typeof n ? n : {}),
          t.on('cursorActivity', o),
          t.on('focus', o),
          t.on('blur', l));
    }),
      e.defineExtension('matchBrackets', function () {
        i(this, !0);
      }),
      e.defineExtension('findMatchingBracket', function (e, t, r) {
        return (
          (r || 'boolean' == typeof t) &&
            (r ? ((r.strict = t), (t = r)) : (t = t ? { strict: !0 } : null)),
          n(this, e, t)
        );
      }),
      e.defineExtension('scanForBracket', function (e, t, n, i) {
        return r(this, e, t, n, i);
      });
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    function t(e, t) {
      return 'pairs' == t && 'string' == typeof e
        ? e
        : 'object' == typeof e && null != e[t]
        ? e[t]
        : d[t];
    }
    function n(e) {
      for (var t = 0; t < e.length; t++) {
        var n = e.charAt(t),
          i = "'" + n + "'";
        p[i] || (p[i] = r(n));
      }
    }
    function r(e) {
      return function (t) {
        return c(t, e);
      };
    }
    function i(e) {
      var t = e.state.closeBrackets;
      if (!t || t.override) return t;
      var n = e.getModeAt(e.getCursor());
      return n.closeBrackets || t;
    }
    function o(n) {
      var r = i(n);
      if (!r || n.getOption('disableInput')) return e.Pass;
      for (
        var o = t(r, 'pairs'), l = n.listSelections(), a = 0;
        a < l.length;
        a++
      ) {
        if (!l[a].empty()) return e.Pass;
        var s = u(n, l[a].head);
        if (!s || o.indexOf(s) % 2 != 0) return e.Pass;
      }
      for (var a = l.length - 1; a >= 0; a--) {
        var c = l[a].head;
        n.replaceRange('', h(c.line, c.ch - 1), h(c.line, c.ch + 1), '+delete');
      }
    }
    function l(n) {
      var r = i(n),
        o = r && t(r, 'explode');
      if (!o || n.getOption('disableInput')) return e.Pass;
      for (var l = n.listSelections(), s = 0; s < l.length; s++) {
        if (!l[s].empty()) return e.Pass;
        var c = u(n, l[s].head);
        if (!c || o.indexOf(c) % 2 != 0) return e.Pass;
      }
      n.operation(function () {
        var e = n.lineSeparator() || '\n';
        n.replaceSelection(e + e, null), a(n, -1), (l = n.listSelections());
        for (var t = 0; t < l.length; t++) {
          var r = l[t].head.line;
          n.indentLine(r, null, !0), n.indentLine(r + 1, null, !0);
        }
      });
    }
    function a(e, t) {
      for (
        var n = [], r = e.listSelections(), i = 0, o = 0;
        o < r.length;
        o++
      ) {
        var l = r[o];
        l.head == e.getCursor() && (i = o);
        var a =
          l.head.ch || t > 0
            ? { line: l.head.line, ch: l.head.ch + t }
            : { line: l.head.line - 1 };
        n.push({ anchor: a, head: a });
      }
      e.setSelections(n, i);
    }
    function s(t) {
      var n = e.cmpPos(t.anchor, t.head) > 0;
      return {
        anchor: new h(t.anchor.line, t.anchor.ch + (n ? -1 : 1)),
        head: new h(t.head.line, t.head.ch + (n ? 1 : -1)),
      };
    }
    function c(n, r) {
      var o = i(n);
      if (!o || n.getOption('disableInput')) return e.Pass;
      var l = t(o, 'pairs'),
        c = l.indexOf(r);
      if (c == -1) return e.Pass;
      for (
        var u,
          d = t(o, 'closeBefore'),
          p = t(o, 'triples'),
          g = l.charAt(c + 1) == r,
          m = n.listSelections(),
          v = c % 2 == 0,
          y = 0;
        y < m.length;
        y++
      ) {
        var b,
          x = m[y],
          w = x.head,
          C = n.getRange(w, h(w.line, w.ch + 1));
        if (v && !x.empty()) b = 'surround';
        else if ((!g && v) || C != r)
          if (
            g &&
            w.ch > 1 &&
            p.indexOf(r) >= 0 &&
            n.getRange(h(w.line, w.ch - 2), w) == r + r
          ) {
            if (
              w.ch > 2 &&
              /\bstring/.test(n.getTokenTypeAt(h(w.line, w.ch - 2)))
            )
              return e.Pass;
            b = 'addFour';
          } else if (g) {
            var k = 0 == w.ch ? ' ' : n.getRange(h(w.line, w.ch - 1), w);
            if (e.isWordChar(C) || k == r || e.isWordChar(k)) return e.Pass;
            b = 'both';
          } else {
            if (!v || !(0 === C.length || /\s/.test(C) || d.indexOf(C) > -1))
              return e.Pass;
            b = 'both';
          }
        else
          b =
            g && f(n, w)
              ? 'both'
              : p.indexOf(r) >= 0 &&
                n.getRange(w, h(w.line, w.ch + 3)) == r + r + r
              ? 'skipThree'
              : 'skip';
        if (u) {
          if (u != b) return e.Pass;
        } else u = b;
      }
      var S = c % 2 ? l.charAt(c - 1) : r,
        L = c % 2 ? r : l.charAt(c + 1);
      n.operation(function () {
        if ('skip' == u) a(n, 1);
        else if ('skipThree' == u) a(n, 3);
        else if ('surround' == u) {
          for (var e = n.getSelections(), t = 0; t < e.length; t++)
            e[t] = S + e[t] + L;
          n.replaceSelections(e, 'around'), (e = n.listSelections().slice());
          for (var t = 0; t < e.length; t++) e[t] = s(e[t]);
          n.setSelections(e);
        } else
          'both' == u
            ? (n.replaceSelection(S + L, null),
              n.triggerElectric(S + L),
              a(n, -1))
            : 'addFour' == u &&
              (n.replaceSelection(S + S + S + S, 'before'), a(n, 1));
      });
    }
    function u(e, t) {
      var n = e.getRange(h(t.line, t.ch - 1), h(t.line, t.ch + 1));
      return 2 == n.length ? n : null;
    }
    function f(e, t) {
      var n = e.getTokenAt(h(t.line, t.ch + 1));
      return (
        /\bstring/.test(n.type) &&
        n.start == t.ch &&
        (0 == t.ch || !/\bstring/.test(e.getTokenTypeAt(t)))
      );
    }
    var d = {
        pairs: '()[]{}\'\'""',
        closeBefore: ')]}\'":;>',
        triples: '',
        explode: '[]{}',
      },
      h = e.Pos;
    e.defineOption('autoCloseBrackets', !1, function (r, i, o) {
      o && o != e.Init && (r.removeKeyMap(p), (r.state.closeBrackets = null)),
        i && (n(t(i, 'pairs')), (r.state.closeBrackets = i), r.addKeyMap(p));
    });
    var p = { Backspace: o, Enter: l };
    n(d.pairs + '`');
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'), require('../fold/xml-fold'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror', '../fold/xml-fold'], e)
      : e(CodeMirror);
  })(function (e) {
    function t(t) {
      if (t.getOption('disableInput')) return e.Pass;
      for (
        var n = t.listSelections(),
          r = [],
          s = t.getOption('autoCloseTags'),
          c = 0;
        c < n.length;
        c++
      ) {
        if (!n[c].empty()) return e.Pass;
        var u = n[c].head,
          f = t.getTokenAt(u),
          d = e.innerMode(t.getMode(), f.state),
          h = d.state,
          p = d.mode.xmlCurrentTag && d.mode.xmlCurrentTag(h),
          g = p && p.name;
        if (!g) return e.Pass;
        var m = 'html' == d.mode.configuration,
          v = ('object' == typeof s && s.dontCloseTags) || (m && l),
          y = ('object' == typeof s && s.indentTags) || (m && a);
        f.end > u.ch && (g = g.slice(0, g.length - f.end + u.ch));
        var b = g.toLowerCase();
        if (
          !g ||
          ('string' == f.type &&
            (f.end != u.ch ||
              !/[\"\']/.test(f.string.charAt(f.string.length - 1)) ||
              1 == f.string.length)) ||
          ('tag' == f.type && p.close) ||
          f.string.indexOf('/') == u.ch - f.start - 1 ||
          (v && i(v, b) > -1) ||
          o(
            t,
            (d.mode.xmlCurrentContext && d.mode.xmlCurrentContext(h)) || [],
            g,
            u,
            !0
          )
        )
          return e.Pass;
        var x = 'object' == typeof s && s.emptyTags;
        if (x && i(x, g) > -1)
          r[c] = { text: '/>', newPos: e.Pos(u.line, u.ch + 2) };
        else {
          var w = y && i(y, b) > -1;
          r[c] = {
            indent: w,
            text: '>' + (w ? '\n\n' : '') + '</' + g + '>',
            newPos: w ? e.Pos(u.line + 1, 0) : e.Pos(u.line, u.ch + 1),
          };
        }
      }
      for (
        var C = 'object' == typeof s && s.dontIndentOnAutoClose,
          c = n.length - 1;
        c >= 0;
        c--
      ) {
        var k = r[c];
        t.replaceRange(k.text, n[c].head, n[c].anchor, '+insert');
        var S = t.listSelections().slice(0);
        (S[c] = { head: k.newPos, anchor: k.newPos }),
          t.setSelections(S),
          !C &&
            k.indent &&
            (t.indentLine(k.newPos.line, null, !0),
            t.indentLine(k.newPos.line + 1, null, !0));
      }
    }
    function n(t, n) {
      for (
        var r = t.listSelections(),
          i = [],
          l = n ? '/' : '</',
          a = t.getOption('autoCloseTags'),
          s = 'object' == typeof a && a.dontIndentOnSlash,
          c = 0;
        c < r.length;
        c++
      ) {
        if (!r[c].empty()) return e.Pass;
        var u = r[c].head,
          f = t.getTokenAt(u),
          d = e.innerMode(t.getMode(), f.state),
          h = d.state;
        if (
          n &&
          ('string' == f.type ||
            '<' != f.string.charAt(0) ||
            f.start != u.ch - 1)
        )
          return e.Pass;
        var p,
          g = 'xml' != d.mode.name && 'htmlmixed' == t.getMode().name;
        if (g && 'javascript' == d.mode.name) p = l + 'script';
        else if (g && 'css' == d.mode.name) p = l + 'style';
        else {
          var m = d.mode.xmlCurrentContext && d.mode.xmlCurrentContext(h),
            v = m.length ? m[m.length - 1] : '';
          if (!m || (m.length && o(t, m, v, u))) return e.Pass;
          p = l + v;
        }
        '>' != t.getLine(u.line).charAt(f.end) && (p += '>'), (i[c] = p);
      }
      if ((t.replaceSelections(i), (r = t.listSelections()), !s))
        for (var c = 0; c < r.length; c++)
          (c == r.length - 1 || r[c].head.line < r[c + 1].head.line) &&
            t.indentLine(r[c].head.line);
    }
    function r(t) {
      return t.getOption('disableInput') ? e.Pass : n(t, !0);
    }
    function i(e, t) {
      if (e.indexOf) return e.indexOf(t);
      for (var n = 0, r = e.length; n < r; ++n) if (e[n] == t) return n;
      return -1;
    }
    function o(t, n, r, i, o) {
      if (!e.scanForClosingTag) return !1;
      var l = Math.min(t.lastLine() + 1, i.line + 500),
        a = e.scanForClosingTag(t, i, null, l);
      if (!a || a.tag != r) return !1;
      for (var s = o ? 1 : 0, c = n.length - 1; c >= 0 && n[c] == r; c--) ++s;
      i = a.to;
      for (var c = 1; c < s; c++) {
        var u = e.scanForClosingTag(t, i, null, l);
        if (!u || u.tag != r) return !1;
        i = u.to;
      }
      return !0;
    }
    e.defineOption('autoCloseTags', !1, function (n, i, o) {
      if ((o != e.Init && o && n.removeKeyMap('autoCloseTags'), i)) {
        var l = { name: 'autoCloseTags' };
        ('object' == typeof i && i.whenClosing === !1) ||
          (l["'/'"] = function (e) {
            return r(e);
          }),
          ('object' == typeof i && i.whenOpening === !1) ||
            (l["'>'"] = function (e) {
              return t(e);
            }),
          n.addKeyMap(l);
      }
    });
    var l = [
        'area',
        'base',
        'br',
        'col',
        'command',
        'embed',
        'hr',
        'img',
        'input',
        'keygen',
        'link',
        'meta',
        'param',
        'source',
        'track',
        'wbr',
      ],
      a = [
        'applet',
        'blockquote',
        'body',
        'button',
        'div',
        'dl',
        'fieldset',
        'form',
        'frameset',
        'h1',
        'h2',
        'h3',
        'h4',
        'h5',
        'h6',
        'head',
        'html',
        'iframe',
        'layer',
        'legend',
        'object',
        'ol',
        'p',
        'select',
        'table',
        'ul',
      ];
    e.commands.closeTag = function (e) {
      return n(e);
    };
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'), require('./xml-hint'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror', './xml-hint'], e)
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    function t(e) {
      for (var t in f) f.hasOwnProperty(t) && (e.attrs[t] = f[t]);
    }
    function n(t, n) {
      var r = { schemaInfo: u };
      if (n) for (var i in n) r[i] = n[i];
      return e.hint.xml(t, r);
    }
    var r =
        'ab aa af ak sq am ar an hy as av ae ay az bm ba eu be bn bh bi bs br bg my ca ch ce ny zh cv kw co cr hr cs da dv nl dz en eo et ee fo fj fi fr ff gl ka de el gn gu ht ha he hz hi ho hu ia id ie ga ig ik io is it iu ja jv kl kn kr ks kk km ki rw ky kv kg ko ku kj la lb lg li ln lo lt lu lv gv mk mg ms ml mt mi mr mh mn na nv nb nd ne ng nn no ii nr oc oj cu om or os pa pi fa pl ps pt qu rm rn ro ru sa sc sd se sm sg sr gd sn si sk sl so st es su sw ss sv ta te tg th ti bo tk tl tn to tr ts tt tw ty ug uk ur uz ve vi vo wa cy wo fy xh yi yo za zu'.split(
          ' '
        ),
      i = ['_blank', '_self', '_top', '_parent'],
      o = ['ascii', 'utf-8', 'utf-16', 'latin1', 'latin1'],
      l = ['get', 'post', 'put', 'delete'],
      a = [
        'application/x-www-form-urlencoded',
        'multipart/form-data',
        'text/plain',
      ],
      s = [
        'all',
        'screen',
        'print',
        'embossed',
        'braille',
        'handheld',
        'print',
        'projection',
        'screen',
        'tty',
        'tv',
        'speech',
        '3d-glasses',
        'resolution [>][<][=] [X]',
        'device-aspect-ratio: X/Y',
        'orientation:portrait',
        'orientation:landscape',
        'device-height: [X]',
        'device-width: [X]',
      ],
      c = { attrs: {} },
      u = {
        a: {
          attrs: {
            href: null,
            ping: null,
            type: null,
            media: s,
            target: i,
            hreflang: r,
          },
        },
        abbr: c,
        acronym: c,
        address: c,
        applet: c,
        area: {
          attrs: {
            alt: null,
            coords: null,
            href: null,
            target: null,
            ping: null,
            media: s,
            hreflang: r,
            type: null,
            shape: ['default', 'rect', 'circle', 'poly'],
          },
        },
        article: c,
        aside: c,
        audio: {
          attrs: {
            src: null,
            mediagroup: null,
            crossorigin: ['anonymous', 'use-credentials'],
            preload: ['none', 'metadata', 'auto'],
            autoplay: ['', 'autoplay'],
            loop: ['', 'loop'],
            controls: ['', 'controls'],
          },
        },
        b: c,
        base: { attrs: { href: null, target: i } },
        basefont: c,
        bdi: c,
        bdo: c,
        big: c,
        blockquote: { attrs: { cite: null } },
        body: c,
        br: c,
        button: {
          attrs: {
            form: null,
            formaction: null,
            name: null,
            value: null,
            autofocus: ['', 'autofocus'],
            disabled: ['', 'autofocus'],
            formenctype: a,
            formmethod: l,
            formnovalidate: ['', 'novalidate'],
            formtarget: i,
            type: ['submit', 'reset', 'button'],
          },
        },
        canvas: { attrs: { width: null, height: null } },
        caption: c,
        center: c,
        cite: c,
        code: c,
        col: { attrs: { span: null } },
        colgroup: { attrs: { span: null } },
        command: {
          attrs: {
            type: ['command', 'checkbox', 'radio'],
            label: null,
            icon: null,
            radiogroup: null,
            command: null,
            title: null,
            disabled: ['', 'disabled'],
            checked: ['', 'checked'],
          },
        },
        data: { attrs: { value: null } },
        datagrid: {
          attrs: { disabled: ['', 'disabled'], multiple: ['', 'multiple'] },
        },
        datalist: { attrs: { data: null } },
        dd: c,
        del: { attrs: { cite: null, datetime: null } },
        details: { attrs: { open: ['', 'open'] } },
        dfn: c,
        dir: c,
        div: c,
        dialog: { attrs: { open: null } },
        dl: c,
        dt: c,
        em: c,
        embed: { attrs: { src: null, type: null, width: null, height: null } },
        eventsource: { attrs: { src: null } },
        fieldset: {
          attrs: { disabled: ['', 'disabled'], form: null, name: null },
        },
        figcaption: c,
        figure: c,
        font: c,
        footer: c,
        form: {
          attrs: {
            action: null,
            name: null,
            'accept-charset': o,
            autocomplete: ['on', 'off'],
            enctype: a,
            method: l,
            novalidate: ['', 'novalidate'],
            target: i,
          },
        },
        frame: c,
        frameset: c,
        h1: c,
        h2: c,
        h3: c,
        h4: c,
        h5: c,
        h6: c,
        head: {
          attrs: {},
          children: [
            'title',
            'base',
            'link',
            'style',
            'meta',
            'script',
            'noscript',
            'command',
          ],
        },
        header: c,
        hgroup: c,
        hr: c,
        html: { attrs: { manifest: null }, children: ['head', 'body'] },
        i: c,
        iframe: {
          attrs: {
            src: null,
            srcdoc: null,
            name: null,
            width: null,
            height: null,
            sandbox: [
              'allow-top-navigation',
              'allow-same-origin',
              'allow-forms',
              'allow-scripts',
            ],
            seamless: ['', 'seamless'],
          },
        },
        img: {
          attrs: {
            alt: null,
            src: null,
            ismap: null,
            usemap: null,
            width: null,
            height: null,
            crossorigin: ['anonymous', 'use-credentials'],
          },
        },
        input: {
          attrs: {
            alt: null,
            dirname: null,
            form: null,
            formaction: null,
            height: null,
            list: null,
            max: null,
            maxlength: null,
            min: null,
            name: null,
            pattern: null,
            placeholder: null,
            size: null,
            src: null,
            step: null,
            value: null,
            width: null,
            accept: ['audio/*', 'video/*', 'image/*'],
            autocomplete: ['on', 'off'],
            autofocus: ['', 'autofocus'],
            checked: ['', 'checked'],
            disabled: ['', 'disabled'],
            formenctype: a,
            formmethod: l,
            formnovalidate: ['', 'novalidate'],
            formtarget: i,
            multiple: ['', 'multiple'],
            readonly: ['', 'readonly'],
            required: ['', 'required'],
            type: [
              'hidden',
              'text',
              'search',
              'tel',
              'url',
              'email',
              'password',
              'datetime',
              'date',
              'month',
              'week',
              'time',
              'datetime-local',
              'number',
              'range',
              'color',
              'checkbox',
              'radio',
              'file',
              'submit',
              'image',
              'reset',
              'button',
            ],
          },
        },
        ins: { attrs: { cite: null, datetime: null } },
        kbd: c,
        keygen: {
          attrs: {
            challenge: null,
            form: null,
            name: null,
            autofocus: ['', 'autofocus'],
            disabled: ['', 'disabled'],
            keytype: ['RSA'],
          },
        },
        label: { attrs: { for: null, form: null } },
        legend: c,
        li: { attrs: { value: null } },
        link: {
          attrs: {
            href: null,
            type: null,
            hreflang: r,
            media: s,
            sizes: ['all', '16x16', '16x16 32x32', '16x16 32x32 64x64'],
          },
        },
        map: { attrs: { name: null } },
        mark: c,
        menu: { attrs: { label: null, type: ['list', 'context', 'toolbar'] } },
        meta: {
          attrs: {
            content: null,
            charset: o,
            name: [
              'viewport',
              'application-name',
              'author',
              'description',
              'generator',
              'keywords',
            ],
            'http-equiv': [
              'content-language',
              'content-type',
              'default-style',
              'refresh',
            ],
          },
        },
        meter: {
          attrs: {
            value: null,
            min: null,
            low: null,
            high: null,
            max: null,
            optimum: null,
          },
        },
        nav: c,
        noframes: c,
        noscript: c,
        object: {
          attrs: {
            data: null,
            type: null,
            name: null,
            usemap: null,
            form: null,
            width: null,
            height: null,
            typemustmatch: ['', 'typemustmatch'],
          },
        },
        ol: {
          attrs: {
            reversed: ['', 'reversed'],
            start: null,
            type: ['1', 'a', 'A', 'i', 'I'],
          },
        },
        optgroup: { attrs: { disabled: ['', 'disabled'], label: null } },
        option: {
          attrs: {
            disabled: ['', 'disabled'],
            label: null,
            selected: ['', 'selected'],
            value: null,
          },
        },
        output: { attrs: { for: null, form: null, name: null } },
        p: c,
        param: { attrs: { name: null, value: null } },
        pre: c,
        progress: { attrs: { value: null, max: null } },
        q: { attrs: { cite: null } },
        rp: c,
        rt: c,
        ruby: c,
        s: c,
        samp: c,
        script: {
          attrs: {
            type: ['text/javascript'],
            src: null,
            async: ['', 'async'],
            defer: ['', 'defer'],
            charset: o,
          },
        },
        section: c,
        select: {
          attrs: {
            form: null,
            name: null,
            size: null,
            autofocus: ['', 'autofocus'],
            disabled: ['', 'disabled'],
            multiple: ['', 'multiple'],
          },
        },
        small: c,
        source: { attrs: { src: null, type: null, media: null } },
        span: c,
        strike: c,
        strong: c,
        style: { attrs: { type: ['text/css'], media: s, scoped: null } },
        sub: c,
        summary: c,
        sup: c,
        table: c,
        tbody: c,
        td: { attrs: { colspan: null, rowspan: null, headers: null } },
        textarea: {
          attrs: {
            dirname: null,
            form: null,
            maxlength: null,
            name: null,
            placeholder: null,
            rows: null,
            cols: null,
            autofocus: ['', 'autofocus'],
            disabled: ['', 'disabled'],
            readonly: ['', 'readonly'],
            required: ['', 'required'],
            wrap: ['soft', 'hard'],
          },
        },
        tfoot: c,
        th: {
          attrs: {
            colspan: null,
            rowspan: null,
            headers: null,
            scope: ['row', 'col', 'rowgroup', 'colgroup'],
          },
        },
        thead: c,
        time: { attrs: { datetime: null } },
        title: c,
        tr: c,
        track: {
          attrs: {
            src: null,
            label: null,
            default: null,
            kind: [
              'subtitles',
              'captions',
              'descriptions',
              'chapters',
              'metadata',
            ],
            srclang: r,
          },
        },
        tt: c,
        u: c,
        ul: c,
        var: c,
        video: {
          attrs: {
            src: null,
            poster: null,
            width: null,
            height: null,
            crossorigin: ['anonymous', 'use-credentials'],
            preload: ['auto', 'metadata', 'none'],
            autoplay: ['', 'autoplay'],
            mediagroup: ['movie'],
            muted: ['', 'muted'],
            controls: ['', 'controls'],
          },
        },
        wbr: c,
      },
      f = {
        accesskey: [
          'a',
          'b',
          'c',
          'd',
          'e',
          'f',
          'g',
          'h',
          'i',
          'j',
          'k',
          'l',
          'm',
          'n',
          'o',
          'p',
          'q',
          'r',
          's',
          't',
          'u',
          'v',
          'w',
          'x',
          'y',
          'z',
          '0',
          '1',
          '2',
          '3',
          '4',
          '5',
          '6',
          '7',
          '8',
          '9',
        ],
        class: null,
        contenteditable: ['true', 'false'],
        contextmenu: null,
        dir: ['ltr', 'rtl', 'auto'],
        draggable: ['true', 'false', 'auto'],
        dropzone: ['copy', 'move', 'link', 'string:', 'file:'],
        hidden: ['hidden'],
        id: null,
        inert: ['inert'],
        itemid: null,
        itemprop: null,
        itemref: null,
        itemscope: ['itemscope'],
        itemtype: null,
        lang: ['en', 'es'],
        spellcheck: ['true', 'false'],
        autocorrect: ['true', 'false'],
        autocapitalize: ['true', 'false'],
        style: null,
        tabindex: ['1', '2', '3', '4', '5', '6', '7', '8', '9'],
        title: null,
        translate: ['yes', 'no'],
        onclick: null,
        rel: [
          'stylesheet',
          'alternate',
          'author',
          'bookmark',
          'help',
          'license',
          'next',
          'nofollow',
          'noreferrer',
          'prefetch',
          'prev',
          'search',
          'tag',
        ],
      };
    t(c);
    for (var d in u) u.hasOwnProperty(d) && u[d] != c && t(u[d]);
    (e.htmlSchema = u), e.registerHelper('hint', 'html', n);
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    function t(e, t, n) {
      return n ? e.indexOf(t) >= 0 : 0 == e.lastIndexOf(t, 0);
    }
    function n(n, i) {
      function o() {
        return {
          list: p,
          from: g ? r(c.line, null == h ? u.start : h) : c,
          to: g ? r(c.line, u.end) : c,
        };
      }
      var l = i && i.schemaInfo,
        a = (i && i.quoteChar) || '"',
        s = i && i.matchInMiddle;
      if (l) {
        var c = n.getCursor(),
          u = n.getTokenAt(c);
        u.end > c.ch &&
          ((u.end = c.ch), (u.string = u.string.slice(0, c.ch - u.start)));
        var f = e.innerMode(n.getMode(), u.state);
        if (f.mode.xmlCurrentTag) {
          var d,
            h,
            p = [],
            g = !1,
            m = /\btag\b/.test(u.type) && !/>$/.test(u.string),
            v = m && /^\w/.test(u.string);
          if (v) {
            var y = n.getLine(c.line).slice(Math.max(0, u.start - 2), u.start),
              b = /<\/$/.test(y) ? 'close' : /<$/.test(y) ? 'open' : null;
            b && (h = u.start - ('close' == b ? 2 : 1));
          } else
            m && '<' == u.string
              ? (b = 'open')
              : m && '</' == u.string && (b = 'close');
          var x = f.mode.xmlCurrentTag(f.state);
          if ((!m && !x) || b) {
            v && (d = u.string), (g = b);
            var w = f.mode.xmlCurrentContext
                ? f.mode.xmlCurrentContext(f.state)
                : [],
              f = w.length && w[w.length - 1],
              C = f && l[f],
              k = f ? C && C.children : l['!top'];
            if (k && 'close' != b)
              for (var S = 0; S < k.length; ++S)
                (d && !t(k[S], d, s)) || p.push('<' + k[S]);
            else if ('close' != b)
              for (var L in l)
                !l.hasOwnProperty(L) ||
                  '!top' == L ||
                  '!attrs' == L ||
                  (d && !t(L, d, s)) ||
                  p.push('<' + L);
            f && (!d || ('close' == b && t(f, d, s))) && p.push('</' + f + '>');
          } else {
            var C = x && l[x.name],
              T = C && C.attrs,
              M = l['!attrs'];
            if (!T && !M) return;
            if (T) {
              if (M) {
                var O = {};
                for (var N in M) M.hasOwnProperty(N) && (O[N] = M[N]);
                for (var N in T) T.hasOwnProperty(N) && (O[N] = T[N]);
                T = O;
              }
            } else T = M;
            if ('string' == u.type || '=' == u.string) {
              var A,
                y = n.getRange(
                  r(c.line, Math.max(0, c.ch - 60)),
                  r(c.line, 'string' == u.type ? u.start : u.end)
                ),
                P = y.match(/([^\s\u00a0=<>\"\']+)=$/);
              if (!P || !T.hasOwnProperty(P[1]) || !(A = T[P[1]])) return;
              if (
                ('function' == typeof A && (A = A.call(this, n)),
                'string' == u.type)
              ) {
                d = u.string;
                var D = 0;
                /['"]/.test(u.string.charAt(0)) &&
                  ((a = u.string.charAt(0)), (d = u.string.slice(1)), D++);
                var H = u.string.length;
                if (
                  (/['"]/.test(u.string.charAt(H - 1)) &&
                    ((a = u.string.charAt(H - 1)),
                    (d = u.string.substr(D, H - 2))),
                  D)
                ) {
                  var F = n.getLine(c.line);
                  F.length > u.end && F.charAt(u.end) == a && u.end++;
                }
                g = !0;
              }
              var W = function (e) {
                if (e)
                  for (var n = 0; n < e.length; ++n)
                    (d && !t(e[n], d, s)) || p.push(a + e[n] + a);
                return o();
              };
              return A && A.then ? A.then(W) : W(A);
            }
            'attribute' == u.type && ((d = u.string), (g = !0));
            for (var E in T)
              !T.hasOwnProperty(E) || (d && !t(E, d, s)) || p.push(E);
          }
          return o();
        }
      }
    }
    var r = e.Pos;
    e.registerHelper('hint', 'xml', n);
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    function t(e, t, n) {
      var r = e.docs[t];
      r ? n(P(e, r)) : e.options.getFile ? e.options.getFile(t, n) : n(null);
    }
    function n(e, t, n) {
      for (var r in e.docs) {
        var i = e.docs[r];
        if (i.doc == t) return i;
      }
      if (!n)
        for (var o = 0; ; ++o)
          if (((r = '[doc' + (o || '') + ']'), !e.docs[r])) {
            n = r;
            break;
          }
      return e.addDoc(n, t);
    }
    function r(t, r) {
      return 'string' == typeof r
        ? t.docs[r]
        : (r instanceof e && (r = r.getDoc()),
          r instanceof e.Doc ? n(t, r) : void 0);
    }
    function i(e, t, r) {
      var i = n(e, t),
        l = e.cachedArgHints;
      l && l.doc == t && I(l.start, r.to) >= 0 && (e.cachedArgHints = null);
      var a = i.changed;
      null == a && (i.changed = a = { from: r.from.line, to: r.from.line });
      var s = r.from.line + (r.text.length - 1);
      r.from.line < a.to && (a.to = a.to - (r.to.line - s)),
        s >= a.to && (a.to = s + 1),
        a.from > r.from.line && (a.from = r.from.line),
        t.lineCount() > W &&
          r.to - a.from > 100 &&
          setTimeout(function () {
            i.changed && i.changed.to - i.changed.from > 100 && o(e, i);
          }, 200);
    }
    function o(e, t) {
      e.server.request(
        { files: [{ type: 'full', name: t.name, text: P(e, t) }] },
        function (e) {
          e ? window.console.error(e) : (t.changed = null);
        }
      );
    }
    function l(t, n, r) {
      t.request(
        n,
        { type: 'completions', types: !0, docs: !0, urls: !0 },
        function (i, o) {
          if (i) return N(t, n, i);
          var l = [],
            s = '',
            c = o.start,
            u = o.end;
          '["' == n.getRange(H(c.line, c.ch - 2), c) &&
            '"]' != n.getRange(u, H(u.line, u.ch + 2)) &&
            (s = '"]');
          for (var f = 0; f < o.completions.length; ++f) {
            var d = o.completions[f],
              h = a(d.type);
            o.guess && (h += ' ' + F + 'guess'),
              l.push({
                text: d.name + s,
                displayText: d.displayName || d.name,
                className: h,
                data: d,
              });
          }
          var p = { from: c, to: u, list: l },
            g = null;
          e.on(p, 'close', function () {
            M(g);
          }),
            e.on(p, 'update', function () {
              M(g);
            }),
            e.on(p, 'select', function (e, r) {
              M(g);
              var i = t.options.completionTip
                ? t.options.completionTip(e.data)
                : e.data.doc;
              i &&
                (g = T(
                  r.parentNode.getBoundingClientRect().right +
                    window.pageXOffset,
                  r.getBoundingClientRect().top + window.pageYOffset,
                  i,
                  n,
                  F + 'hint-doc'
                ));
            }),
            r(p);
        }
      );
    }
    function a(e) {
      var t;
      return (
        (t =
          '?' == e
            ? 'unknown'
            : 'number' == e || 'string' == e || 'bool' == e
            ? e
            : /^fn\(/.test(e)
            ? 'fn'
            : /^\[/.test(e)
            ? 'array'
            : 'object'),
        F + 'completion ' + F + 'completion-' + t
      );
    }
    function s(e, t, n, r, i) {
      e.request(
        t,
        r,
        function (n, r) {
          if (n) return N(e, t, n);
          if (e.options.typeTip) var o = e.options.typeTip(r);
          else {
            var o = C('span', null, C('strong', null, r.type || 'not found'));
            if (
              (r.doc && o.appendChild(document.createTextNode(' — ' + r.doc)),
              r.url)
            ) {
              o.appendChild(document.createTextNode(' '));
              var l = o.appendChild(C('a', null, '[docs]'));
              (l.href = r.url), (l.target = '_blank');
            }
          }
          S(t, o, e), i && i();
        },
        n
      );
    }
    function c(t, n) {
      if ((A(t), !n.somethingSelected())) {
        var r = n.getTokenAt(n.getCursor()).state,
          i = e.innerMode(n.getMode(), r);
        if ('javascript' == i.mode.name) {
          var o = i.state.lexical;
          if ('call' == o.info) {
            for (
              var l,
                a = o.pos || 0,
                s = n.getOption('tabSize'),
                c = n.getCursor().line,
                d = Math.max(0, c - 9),
                h = !1;
              c >= d;
              --c
            ) {
              for (var p = n.getLine(c), g = 0, m = 0; ; ) {
                var v = p.indexOf('\t', m);
                if (v == -1) break;
                (g += s - ((v + g) % s) - 1), (m = v + 1);
              }
              if (((l = o.column - g), '(' == p.charAt(l))) {
                h = !0;
                break;
              }
            }
            if (h) {
              var y = H(c, l),
                b = t.cachedArgHints;
              return b && b.doc == n.getDoc() && 0 == I(y, b.start)
                ? u(t, n, a)
                : void t.request(
                    n,
                    { type: 'type', preferFunction: !0, end: y },
                    function (e, r) {
                      !e &&
                        r.type &&
                        /^fn\(/.test(r.type) &&
                        ((t.cachedArgHints = {
                          start: y,
                          type: f(r.type),
                          name: r.exprName || r.name || 'fn',
                          guess: r.guess,
                          doc: n.getDoc(),
                        }),
                        u(t, n, a));
                    }
                  );
            }
          }
        }
      }
    }
    function u(e, t, n) {
      A(e);
      for (
        var r = e.cachedArgHints,
          i = r.type,
          o = C(
            'span',
            r.guess ? F + 'fhint-guess' : null,
            C('span', F + 'fname', r.name),
            '('
          ),
          l = 0;
        l < i.args.length;
        ++l
      ) {
        l && o.appendChild(document.createTextNode(', '));
        var a = i.args[l];
        o.appendChild(
          C(
            'span',
            F + 'farg' + (l == n ? ' ' + F + 'farg-current' : ''),
            a.name || '?'
          )
        ),
          '?' != a.type &&
            (o.appendChild(document.createTextNode(': ')),
            o.appendChild(C('span', F + 'type', a.type)));
      }
      o.appendChild(document.createTextNode(i.rettype ? ') -> ' : ')')),
        i.rettype && o.appendChild(C('span', F + 'type', i.rettype));
      var s = t.cursorCoords(null, 'page'),
        c = (e.activeArgHints = T(s.right + 1, s.bottom, o, t));
      setTimeout(function () {
        c.clear = L(t, function () {
          e.activeArgHints == c && A(e);
        });
      }, 20);
    }
    function f(e) {
      function t(t) {
        for (var n = 0, i = r; ; ) {
          var o = e.charAt(r);
          if (t.test(o) && !n) return e.slice(i, r);
          /[{\[\(]/.test(o) ? ++n : /[}\]\)]/.test(o) && --n, ++r;
        }
      }
      var n = [],
        r = 3;
      if (')' != e.charAt(r))
        for (;;) {
          var i = e.slice(r).match(/^([^, \(\[\{]+): /);
          if (
            (i && ((r += i[0].length), (i = i[1])),
            n.push({ name: i, type: t(/[\),]/) }),
            ')' == e.charAt(r))
          )
            break;
          r += 2;
        }
      var o = e.slice(r).match(/^\) -> (.*)$/);
      return { args: n, rettype: o && o[1] };
    }
    function d(e, t) {
      function r(r) {
        var i = { type: 'definition', variable: r || null },
          o = n(e, t.getDoc());
        e.server.request(x(e, o, i), function (n, r) {
          if (n) return N(e, t, n);
          if (!r.file && r.url) return void window.open(r.url);
          if (r.file) {
            var i,
              l = e.docs[r.file];
            if (l && (i = g(l.doc, r)))
              return (
                e.jumpStack.push({
                  file: o.name,
                  start: t.getCursor('from'),
                  end: t.getCursor('to'),
                }),
                void p(e, o, l, i.start, i.end)
              );
          }
          N(e, t, 'Could not find a definition.');
        });
      }
      m(t)
        ? r()
        : k(t, 'Jump to variable', function (e) {
            e && r(e);
          });
    }
    function h(e, t) {
      var r = e.jumpStack.pop(),
        i = r && e.docs[r.file];
      i && p(e, n(e, t.getDoc()), i, r.start, r.end);
    }
    function p(e, t, n, r, i) {
      n.doc.setSelection(r, i),
        t != n &&
          e.options.switchToDoc &&
          (A(e), e.options.switchToDoc(n.name, n.doc));
    }
    function g(e, t) {
      for (
        var n = t.context.slice(0, t.contextOffset).split('\n'),
          r = t.start.line - (n.length - 1),
          i = H(
            r,
            (1 == n.length ? t.start.ch : e.getLine(r).length) - n[0].length
          ),
          o = e.getLine(r).slice(i.ch),
          l = r + 1;
        l < e.lineCount() && o.length < t.context.length;
        ++l
      )
        o += '\n' + e.getLine(l);
      if (o.slice(0, t.context.length) == t.context) return t;
      for (
        var a, s = e.getSearchCursor(t.context, 0, !1), c = 1 / 0;
        s.findNext();

      ) {
        var u = s.from(),
          f = 1e4 * Math.abs(u.line - i.line);
        f || (f = Math.abs(u.ch - i.ch)), f < c && ((a = u), (c = f));
      }
      if (!a) return null;
      if (
        (1 == n.length
          ? (a.ch += n[0].length)
          : (a = H(a.line + (n.length - 1), n[n.length - 1].length)),
        t.start.line == t.end.line)
      )
        var d = H(a.line, a.ch + (t.end.ch - t.start.ch));
      else var d = H(a.line + (t.end.line - t.start.line), t.end.ch);
      return { start: a, end: d };
    }
    function m(e) {
      var t = e.getCursor('end'),
        n = e.getTokenAt(t);
      return (
        !(n.start < t.ch && 'comment' == n.type) &&
        /[\w)\]]/.test(e.getLine(t.line).slice(Math.max(t.ch - 1, 0), t.ch + 1))
      );
    }
    function v(e, t) {
      var n = t.getTokenAt(t.getCursor());
      return /\w/.test(n.string)
        ? void k(t, 'New name for ' + n.string, function (n) {
            e.request(
              t,
              { type: 'rename', newName: n, fullDocs: !0 },
              function (n, r) {
                return n ? N(e, t, n) : void b(e, r.changes);
              }
            );
          })
        : N(e, t, 'Not at a variable');
    }
    function y(e, t) {
      var r = n(e, t.doc).name;
      e.request(t, { type: 'refs' }, function (n, i) {
        if (n) return N(e, t, n);
        for (
          var o = [], l = 0, a = t.getCursor(), s = 0;
          s < i.refs.length;
          s++
        ) {
          var c = i.refs[s];
          c.file == r &&
            (o.push({ anchor: c.start, head: c.end }),
            I(a, c.start) >= 0 && I(a, c.end) <= 0 && (l = o.length - 1));
        }
        t.setSelections(o, l);
      });
    }
    function b(e, t) {
      for (var n = Object.create(null), r = 0; r < t.length; ++r) {
        var i = t[r];
        (n[i.file] || (n[i.file] = [])).push(i);
      }
      for (var o in n) {
        var l = e.docs[o],
          a = n[o];
        if (l) {
          a.sort(function (e, t) {
            return I(t.start, e.start);
          });
          for (var s = '*rename' + ++E, r = 0; r < a.length; ++r) {
            var i = a[r];
            l.doc.replaceRange(i.text, i.start, i.end, s);
          }
        }
      }
    }
    function x(e, t, n, r) {
      var i = [],
        o = 0,
        l = !n.fullDocs;
      l || delete n.fullDocs,
        'string' == typeof n && (n = { type: n }),
        (n.lineCharPositions = !0),
        null == n.end &&
          ((n.end = r || t.doc.getCursor('end')),
          t.doc.somethingSelected() && (n.start = t.doc.getCursor('start')));
      var a = n.start || n.end;
      if (t.changed)
        if (
          t.doc.lineCount() > W &&
          l !== !1 &&
          t.changed.to - t.changed.from < 100 &&
          t.changed.from <= a.line &&
          t.changed.to > n.end.line
        ) {
          i.push(w(t, a, n.end)), (n.file = '#0');
          var o = i[0].offsetLines;
          null != n.start && (n.start = H(n.start.line - -o, n.start.ch)),
            (n.end = H(n.end.line - o, n.end.ch));
        } else
          i.push({ type: 'full', name: t.name, text: P(e, t) }),
            (n.file = t.name),
            (t.changed = null);
      else n.file = t.name;
      for (var s in e.docs) {
        var c = e.docs[s];
        c.changed &&
          c != t &&
          (i.push({ type: 'full', name: c.name, text: P(e, c) }),
          (c.changed = null));
      }
      return { query: n, files: i };
    }
    function w(t, n, r) {
      for (
        var i,
          o = t.doc,
          l = null,
          a = null,
          s = 4,
          c = n.line - 1,
          u = Math.max(0, c - 50);
        c >= u;
        --c
      ) {
        var f = o.getLine(c),
          d = f.search(/\bfunction\b/);
        if (!(d < 0)) {
          var h = e.countColumn(f, null, s);
          (null != l && l <= h) || ((l = h), (a = c));
        }
      }
      null == a && (a = u);
      var p = Math.min(o.lastLine(), r.line + 20);
      if (null == l || l == e.countColumn(o.getLine(n.line), null, s)) i = p;
      else
        for (i = r.line + 1; i < p; ++i) {
          var h = e.countColumn(o.getLine(i), null, s);
          if (h <= l) break;
        }
      var g = H(a, 0);
      return {
        type: 'part',
        name: t.name,
        offsetLines: g.line,
        text: o.getRange(g, H(i, r.line == i ? null : 0)),
      };
    }
    function C(e, t) {
      var n = document.createElement(e);
      t && (n.className = t);
      for (var r = 2; r < arguments.length; ++r) {
        var i = arguments[r];
        'string' == typeof i && (i = document.createTextNode(i)),
          n.appendChild(i);
      }
      return n;
    }
    function k(e, t, n) {
      e.openDialog
        ? e.openDialog(t + ': <input type=text>', n)
        : n(prompt(t, ''));
    }
    function S(t, n, r) {
      function i() {
        (c = !0), s || o();
      }
      function o() {
        (t.state.ternTooltip = null), a.parentNode && O(a), u();
      }
      t.state.ternTooltip && M(t.state.ternTooltip);
      var l = t.cursorCoords(),
        a = (t.state.ternTooltip = T(l.right + 1, l.bottom, n, t)),
        s = !1,
        c = !1;
      e.on(a, 'mousemove', function () {
        s = !0;
      }),
        e.on(a, 'mouseout', function (t) {
          var n = t.relatedTarget || t.toElement;
          (n && e.contains(a, n)) || (c ? o() : (s = !1));
        }),
        setTimeout(i, r.options.hintDelay ? r.options.hintDelay : 1700);
      var u = L(t, o);
    }
    function L(e, t) {
      return (
        e.on('cursorActivity', t),
        e.on('blur', t),
        e.on('scroll', t),
        e.on('setDoc', t),
        function () {
          e.off('cursorActivity', t),
            e.off('blur', t),
            e.off('scroll', t),
            e.off('setDoc', t);
        }
      );
    }
    function T(e, t, n, r, i) {
      var o = C('div', F + 'tooltip ' + (i || ''), n);
      (o.style.left = e + 'px'), (o.style.top = t + 'px');
      var l = ((r.options || {}).hintOptions || {}).container || document.body;
      l.appendChild(o);
      var a = r.cursorCoords(),
        s = window.innerWidth,
        c = window.innerHeight,
        u = o.getBoundingClientRect(),
        f = document.querySelector('.CodeMirror-hints'),
        d = u.bottom - c,
        h = u.right - s;
      if (f && h > 0) {
        o.style.left = 0;
        var u = o.getBoundingClientRect();
        (o.style.left = (e = e - f.offsetWidth - u.width) + 'px'),
          (h = u.right - s);
      }
      if (d > 0) {
        var p = u.bottom - u.top,
          g = a.top - (a.bottom - u.top);
        g - p > 0
          ? (o.style.top = a.top - p + 'px')
          : p > c &&
            ((o.style.height = c - 5 + 'px'),
            (o.style.top = a.bottom - u.top + 'px'));
      }
      return (
        h > 0 &&
          (u.right - u.left > s &&
            ((o.style.width = s - 5 + 'px'), (h -= u.right - u.left - s)),
          (o.style.left = e - h + 'px')),
        o
      );
    }
    function M(e) {
      var t = e && e.parentNode;
      t && t.removeChild(e);
    }
    function O(e) {
      (e.style.opacity = '0'),
        setTimeout(function () {
          M(e);
        }, 1100);
    }
    function N(e, t, n) {
      e.options.showError ? e.options.showError(t, n) : S(t, String(n), e);
    }
    function A(e) {
      e.activeArgHints &&
        (e.activeArgHints.clear && e.activeArgHints.clear(),
        M(e.activeArgHints),
        (e.activeArgHints = null));
    }
    function P(e, t) {
      var n = t.doc.getValue();
      return (
        e.options.fileFilter && (n = e.options.fileFilter(n, t.name, t.doc)), n
      );
    }
    function D(e) {
      function n(e, t) {
        t && ((e.id = ++i), (o[i] = t)), r.postMessage(e);
      }
      var r = (e.worker = new Worker(e.options.workerScript));
      r.postMessage({
        type: 'init',
        defs: e.options.defs,
        plugins: e.options.plugins,
        scripts: e.options.workerDeps,
      });
      var i = 0,
        o = {};
      (r.onmessage = function (r) {
        var i = r.data;
        'getFile' == i.type
          ? t(e, i.name, function (e, t) {
              n({ type: 'getFile', err: String(e), text: t, id: i.id });
            })
          : 'debug' == i.type
          ? window.console.log(i.message)
          : i.id && o[i.id] && (o[i.id](i.err, i.body), delete o[i.id]);
      }),
        (r.onerror = function (e) {
          for (var t in o) o[t](e);
          o = {};
        }),
        (this.addFile = function (e, t) {
          n({ type: 'add', name: e, text: t });
        }),
        (this.delFile = function (e) {
          n({ type: 'del', name: e });
        }),
        (this.request = function (e, t) {
          n({ type: 'req', body: e }, t);
        });
    }
    (e.TernServer = function (e) {
      var n = this;
      this.options = e || {};
      var r = this.options.plugins || (this.options.plugins = {});
      r.doc_comment || (r.doc_comment = !0),
        (this.docs = Object.create(null)),
        this.options.useWorker
          ? (this.server = new D(this))
          : (this.server = new tern.Server({
              getFile: function (e, r) {
                return t(n, e, r);
              },
              async: !0,
              defs: this.options.defs || [],
              plugins: r,
            })),
        (this.trackChange = function (e, t) {
          i(n, e, t);
        }),
        (this.cachedArgHints = null),
        (this.activeArgHints = null),
        (this.jumpStack = []),
        (this.getHint = function (e, t) {
          return l(n, e, t);
        }),
        (this.getHint.async = !0);
    }),
      (e.TernServer.prototype = {
        addDoc: function (t, n) {
          var r = { doc: n, name: t, changed: null };
          return (
            this.server.addFile(t, P(this, r)),
            e.on(n, 'change', this.trackChange),
            (this.docs[t] = r)
          );
        },
        delDoc: function (t) {
          var n = r(this, t);
          n &&
            (e.off(n.doc, 'change', this.trackChange),
            delete this.docs[n.name],
            this.server.delFile(n.name));
        },
        hideDoc: function (e) {
          A(this);
          var t = r(this, e);
          t && t.changed && o(this, t);
        },
        complete: function (e) {
          e.showHint({ hint: this.getHint });
        },
        showType: function (e, t, n) {
          s(this, e, t, 'type', n);
        },
        showDocs: function (e, t, n) {
          s(this, e, t, 'documentation', n);
        },
        updateArgHints: function (e) {
          c(this, e);
        },
        jumpToDef: function (e) {
          d(this, e);
        },
        jumpBack: function (e) {
          h(this, e);
        },
        rename: function (e) {
          v(this, e);
        },
        selectName: function (e) {
          y(this, e);
        },
        request: function (e, t, r, i) {
          var o = this,
            l = n(this, e.getDoc()),
            a = x(this, l, t, i),
            s =
              a.query &&
              this.options.queryOptions &&
              this.options.queryOptions[a.query.type];
          if (s) for (var c in s) a.query[c] = s[c];
          this.server.request(a, function (e, n) {
            !e &&
              o.options.responseFilter &&
              (n = o.options.responseFilter(l, t, a, e, n)),
              r(e, n);
          });
        },
        destroy: function () {
          A(this),
            this.worker && (this.worker.terminate(), (this.worker = null));
        },
      });
    var H = e.Pos,
      F = 'CodeMirror-Tern-',
      W = 250,
      E = 0,
      I = e.cmpPos;
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    function t(e, t) {
      if (
        ((this.cm = e),
        (this.options = t),
        (this.widget = null),
        (this.debounce = 0),
        (this.tick = 0),
        (this.startPos = this.cm.getCursor('start')),
        (this.startLen =
          this.cm.getLine(this.startPos.line).length -
          this.cm.getSelection().length),
        this.options.updateOnCursorActivity)
      ) {
        var n = this;
        e.on(
          'cursorActivity',
          (this.activityFunc = function () {
            n.cursorActivity();
          })
        );
      }
    }
    function n(e, t, n) {
      var r = e.options.hintOptions,
        i = {};
      for (var o in p) i[o] = p[o];
      if (r) for (var o in r) void 0 !== r[o] && (i[o] = r[o]);
      if (n) for (var o in n) void 0 !== n[o] && (i[o] = n[o]);
      return i.hint.resolve && (i.hint = i.hint.resolve(e, t)), i;
    }
    function r(e) {
      return 'string' == typeof e ? e : e.text;
    }
    function i(e, t) {
      function n(e, n) {
        var i;
        (i =
          'string' != typeof n
            ? function (e) {
                return n(e, t);
              }
            : r.hasOwnProperty(n)
            ? r[n]
            : n),
          (l[e] = i);
      }
      var r = {
          Up: function () {
            t.moveFocus(-1);
          },
          Down: function () {
            t.moveFocus(1);
          },
          PageUp: function () {
            t.moveFocus(-t.menuSize() + 1, !0);
          },
          PageDown: function () {
            t.moveFocus(t.menuSize() - 1, !0);
          },
          Home: function () {
            t.setFocus(0);
          },
          End: function () {
            t.setFocus(t.length - 1);
          },
          Enter: t.pick,
          Tab: t.pick,
          Esc: t.close,
        },
        i = /Mac/.test(navigator.platform);
      i &&
        ((r['Ctrl-P'] = function () {
          t.moveFocus(-1);
        }),
        (r['Ctrl-N'] = function () {
          t.moveFocus(1);
        }));
      var o = e.options.customKeys,
        l = o ? {} : r;
      if (o) for (var a in o) o.hasOwnProperty(a) && n(a, o[a]);
      var s = e.options.extraKeys;
      if (s) for (var a in s) s.hasOwnProperty(a) && n(a, s[a]);
      return l;
    }
    function o(e, t) {
      for (; t && t != e; ) {
        if ('LI' === t.nodeName.toUpperCase() && t.parentNode == e) return t;
        t = t.parentNode;
      }
    }
    function l(t, n) {
      (this.id = 'cm-complete-' + Math.floor(Math.random(1e6))),
        (this.completion = t),
        (this.data = n),
        (this.picked = !1);
      var l = this,
        a = t.cm,
        s = a.getInputField().ownerDocument,
        c = s.defaultView || s.parentWindow,
        d = (this.hints = s.createElement('ul'));
      d.setAttribute('role', 'listbox'),
        d.setAttribute('aria-expanded', 'true'),
        (d.id = this.id);
      var h = t.cm.options.theme;
      (d.className = 'CodeMirror-hints ' + h),
        (this.selectedHint = n.selectedHint || 0);
      for (var p = n.list, g = 0; g < p.length; ++g) {
        var m = d.appendChild(s.createElement('li')),
          v = p[g],
          y = u + (g != this.selectedHint ? '' : ' ' + f);
        null != v.className && (y = v.className + ' ' + y),
          (m.className = y),
          g == this.selectedHint && m.setAttribute('aria-selected', 'true'),
          (m.id = this.id + '-' + g),
          m.setAttribute('role', 'option'),
          v.render
            ? v.render(m, n, v)
            : m.appendChild(s.createTextNode(v.displayText || r(v))),
          (m.hintId = g);
      }
      var b = t.options.container || s.body,
        x = a.cursorCoords(t.options.alignWithWord ? n.from : null),
        w = x.left,
        C = x.bottom,
        k = !0,
        S = 0,
        L = 0;
      if (b !== s.body) {
        var T =
            ['absolute', 'relative', 'fixed'].indexOf(
              c.getComputedStyle(b).position
            ) !== -1,
          M = T ? b : b.offsetParent,
          O = M.getBoundingClientRect(),
          N = s.body.getBoundingClientRect();
        (S = O.left - N.left - M.scrollLeft), (L = O.top - N.top - M.scrollTop);
      }
      (d.style.left = w - S + 'px'), (d.style.top = C - L + 'px');
      var A =
          c.innerWidth ||
          Math.max(s.body.offsetWidth, s.documentElement.offsetWidth),
        P =
          c.innerHeight ||
          Math.max(s.body.offsetHeight, s.documentElement.offsetHeight);
      b.appendChild(d),
        a.getInputField().setAttribute('aria-autocomplete', 'list'),
        a.getInputField().setAttribute('aria-owns', this.id),
        a
          .getInputField()
          .setAttribute(
            'aria-activedescendant',
            this.id + '-' + this.selectedHint
          );
      var D,
        H = t.options.moveOnOverlap ? d.getBoundingClientRect() : new DOMRect(),
        F =
          !!t.options.paddingForScrollbar &&
          d.scrollHeight > d.clientHeight + 1;
      setTimeout(function () {
        D = a.getScrollInfo();
      });
      var W = H.bottom - P;
      if (W > 0) {
        var E = H.bottom - H.top,
          I = x.top - (x.bottom - H.top);
        if (I - E > 0) (d.style.top = (C = x.top - E - L) + 'px'), (k = !1);
        else if (E > P) {
          (d.style.height = P - 5 + 'px'),
            (d.style.top = (C = x.bottom - H.top - L) + 'px');
          var R = a.getCursor();
          n.from.ch != R.ch &&
            ((x = a.cursorCoords(R)),
            (d.style.left = (w = x.left - S) + 'px'),
            (H = d.getBoundingClientRect()));
        }
      }
      var z = H.right - A;
      if (
        (F && (z += a.display.nativeBarWidth),
        z > 0 &&
          (H.right - H.left > A &&
            ((d.style.width = A - 5 + 'px'), (z -= H.right - H.left - A)),
          (d.style.left = (w = x.left - z - S) + 'px')),
        F)
      )
        for (var B = d.firstChild; B; B = B.nextSibling)
          B.style.paddingRight = a.display.nativeBarWidth + 'px';
      if (
        (a.addKeyMap(
          (this.keyMap = i(t, {
            moveFocus: function (e, t) {
              l.changeActive(l.selectedHint + e, t);
            },
            setFocus: function (e) {
              l.changeActive(e);
            },
            menuSize: function () {
              return l.screenAmount();
            },
            length: p.length,
            close: function () {
              t.close();
            },
            pick: function () {
              l.pick();
            },
            data: n,
          }))
        ),
        t.options.closeOnUnfocus)
      ) {
        var j;
        a.on(
          'blur',
          (this.onBlur = function () {
            j = setTimeout(function () {
              t.close();
            }, 100);
          })
        ),
          a.on(
            'focus',
            (this.onFocus = function () {
              clearTimeout(j);
            })
          );
      }
      a.on(
        'scroll',
        (this.onScroll = function () {
          var e = a.getScrollInfo(),
            n = a.getWrapperElement().getBoundingClientRect();
          D || (D = a.getScrollInfo());
          var r = C + D.top - e.top,
            i = r - (c.pageYOffset || (s.documentElement || s.body).scrollTop);
          return (
            k || (i += d.offsetHeight),
            i <= n.top || i >= n.bottom
              ? t.close()
              : ((d.style.top = r + 'px'),
                void (d.style.left = w + D.left - e.left + 'px'))
          );
        })
      ),
        e.on(d, 'dblclick', function (e) {
          var t = o(d, e.target || e.srcElement);
          t && null != t.hintId && (l.changeActive(t.hintId), l.pick());
        }),
        e.on(d, 'click', function (e) {
          var n = o(d, e.target || e.srcElement);
          n &&
            null != n.hintId &&
            (l.changeActive(n.hintId),
            t.options.completeOnSingleClick && l.pick());
        }),
        e.on(d, 'mousedown', function () {
          setTimeout(function () {
            a.focus();
          }, 20);
        });
      var q = this.getSelectedHintRange();
      return (
        (0 === q.from && 0 === q.to) || this.scrollToActive(),
        e.signal(
          n,
          'select',
          p[this.selectedHint],
          d.childNodes[this.selectedHint]
        ),
        !0
      );
    }
    function a(e, t) {
      if (!e.somethingSelected()) return t;
      for (var n = [], r = 0; r < t.length; r++)
        t[r].supportsSelection && n.push(t[r]);
      return n;
    }
    function s(e, t, n, r) {
      if (e.async) e(t, r, n);
      else {
        var i = e(t, n);
        i && i.then ? i.then(r) : r(i);
      }
    }
    function c(t, n) {
      var r,
        i = t.getHelpers(n, 'hint');
      if (i.length) {
        var o = function (e, t, n) {
          function r(i) {
            return i == o.length
              ? t(null)
              : void s(o[i], e, n, function (e) {
                  e && e.list.length > 0 ? t(e) : r(i + 1);
                });
          }
          var o = a(e, i);
          r(0);
        };
        return (o.async = !0), (o.supportsSelection = !0), o;
      }
      return (r = t.getHelper(t.getCursor(), 'hintWords'))
        ? function (t) {
            return e.hint.fromList(t, { words: r });
          }
        : e.hint.anyword
        ? function (t, n) {
            return e.hint.anyword(t, n);
          }
        : function () {};
    }
    var u = 'CodeMirror-hint',
      f = 'CodeMirror-hint-active';
    (e.showHint = function (e, t, n) {
      if (!t) return e.showHint(n);
      n && n.async && (t.async = !0);
      var r = { hint: t };
      if (n) for (var i in n) r[i] = n[i];
      return e.showHint(r);
    }),
      e.defineExtension('showHint', function (r) {
        r = n(this, this.getCursor('start'), r);
        var i = this.listSelections();
        if (!(i.length > 1)) {
          if (this.somethingSelected()) {
            if (!r.hint.supportsSelection) return;
            for (var o = 0; o < i.length; o++)
              if (i[o].head.line != i[o].anchor.line) return;
          }
          this.state.completionActive && this.state.completionActive.close();
          var l = (this.state.completionActive = new t(this, r));
          l.options.hint &&
            (e.signal(this, 'startCompletion', this), l.update(!0));
        }
      }),
      e.defineExtension('closeHint', function () {
        this.state.completionActive && this.state.completionActive.close();
      });
    var d =
        window.requestAnimationFrame ||
        function (e) {
          return setTimeout(e, 1e3 / 60);
        },
      h = window.cancelAnimationFrame || clearTimeout;
    (t.prototype = {
      close: function () {
        this.active() &&
          ((this.cm.state.completionActive = null),
          (this.tick = null),
          this.options.updateOnCursorActivity &&
            this.cm.off('cursorActivity', this.activityFunc),
          this.widget && this.data && e.signal(this.data, 'close'),
          this.widget && this.widget.close(),
          e.signal(this.cm, 'endCompletion', this.cm));
      },
      active: function () {
        return this.cm.state.completionActive == this;
      },
      pick: function (t, n) {
        var i = t.list[n],
          o = this;
        this.cm.operation(function () {
          i.hint
            ? i.hint(o.cm, t, i)
            : o.cm.replaceRange(
                r(i),
                i.from || t.from,
                i.to || t.to,
                'complete'
              ),
            e.signal(t, 'pick', i),
            o.cm.scrollIntoView();
        }),
          this.options.closeOnPick && this.close();
      },
      cursorActivity: function () {
        this.debounce && (h(this.debounce), (this.debounce = 0));
        var e = this.startPos;
        this.data && (e = this.data.from);
        var t = this.cm.getCursor(),
          n = this.cm.getLine(t.line);
        if (
          t.line != this.startPos.line ||
          n.length - t.ch != this.startLen - this.startPos.ch ||
          t.ch < e.ch ||
          this.cm.somethingSelected() ||
          !t.ch ||
          this.options.closeCharacters.test(n.charAt(t.ch - 1))
        )
          this.close();
        else {
          var r = this;
          (this.debounce = d(function () {
            r.update();
          })),
            this.widget && this.widget.disable();
        }
      },
      update: function (e) {
        if (null != this.tick) {
          var t = this,
            n = ++this.tick;
          s(this.options.hint, this.cm, this.options, function (r) {
            t.tick == n && t.finishUpdate(r, e);
          });
        }
      },
      finishUpdate: function (t, n) {
        this.data && e.signal(this.data, 'update');
        var r =
          (this.widget && this.widget.picked) ||
          (n && this.options.completeSingle);
        this.widget && this.widget.close(),
          (this.data = t),
          t &&
            t.list.length &&
            (r && 1 == t.list.length
              ? this.pick(t, 0)
              : ((this.widget = new l(this, t)), e.signal(t, 'shown')));
      },
    }),
      (l.prototype = {
        close: function () {
          if (this.completion.widget == this) {
            (this.completion.widget = null),
              this.hints.parentNode &&
                this.hints.parentNode.removeChild(this.hints),
              this.completion.cm.removeKeyMap(this.keyMap);
            var e = this.completion.cm.getInputField();
            e.removeAttribute('aria-activedescendant'),
              e.removeAttribute('aria-owns');
            var t = this.completion.cm;
            this.completion.options.closeOnUnfocus &&
              (t.off('blur', this.onBlur), t.off('focus', this.onFocus)),
              t.off('scroll', this.onScroll);
          }
        },
        disable: function () {
          this.completion.cm.removeKeyMap(this.keyMap);
          var e = this;
          (this.keyMap = {
            Enter: function () {
              e.picked = !0;
            },
          }),
            this.completion.cm.addKeyMap(this.keyMap);
        },
        pick: function () {
          this.completion.pick(this.data, this.selectedHint);
        },
        changeActive: function (t, n) {
          if (
            (t >= this.data.list.length
              ? (t = n ? this.data.list.length - 1 : 0)
              : t < 0 && (t = n ? 0 : this.data.list.length - 1),
            this.selectedHint != t)
          ) {
            var r = this.hints.childNodes[this.selectedHint];
            r &&
              ((r.className = r.className.replace(' ' + f, '')),
              r.removeAttribute('aria-selected')),
              (r = this.hints.childNodes[(this.selectedHint = t)]),
              (r.className += ' ' + f),
              r.setAttribute('aria-selected', 'true'),
              this.completion.cm
                .getInputField()
                .setAttribute('aria-activedescendant', r.id),
              this.scrollToActive(),
              e.signal(
                this.data,
                'select',
                this.data.list[this.selectedHint],
                r
              );
          }
        },
        scrollToActive: function () {
          var e = this.getSelectedHintRange(),
            t = this.hints.childNodes[e.from],
            n = this.hints.childNodes[e.to],
            r = this.hints.firstChild;
          t.offsetTop < this.hints.scrollTop
            ? (this.hints.scrollTop = t.offsetTop - r.offsetTop)
            : n.offsetTop + n.offsetHeight >
                this.hints.scrollTop + this.hints.clientHeight &&
              (this.hints.scrollTop =
                n.offsetTop +
                n.offsetHeight -
                this.hints.clientHeight +
                r.offsetTop);
        },
        screenAmount: function () {
          return (
            Math.floor(
              this.hints.clientHeight / this.hints.firstChild.offsetHeight
            ) || 1
          );
        },
        getSelectedHintRange: function () {
          var e = this.completion.options.scrollMargin || 0;
          return {
            from: Math.max(0, this.selectedHint - e),
            to: Math.min(this.data.list.length - 1, this.selectedHint + e),
          };
        },
      }),
      e.registerHelper('hint', 'auto', { resolve: c }),
      e.registerHelper('hint', 'fromList', function (t, n) {
        var r,
          i = t.getCursor(),
          o = t.getTokenAt(i),
          l = e.Pos(i.line, o.start),
          a = i;
        o.start < i.ch && /\w/.test(o.string.charAt(i.ch - o.start - 1))
          ? (r = o.string.substr(0, i.ch - o.start))
          : ((r = ''), (l = i));
        for (var s = [], c = 0; c < n.words.length; c++) {
          var u = n.words[c];
          u.slice(0, r.length) == r && s.push(u);
        }
        if (s.length) return { list: s, from: l, to: a };
      }),
      (e.commands.autocomplete = e.showHint);
    var p = {
      hint: e.hint.auto,
      completeSingle: !0,
      alignWithWord: !0,
      closeCharacters: /[\s()\[\]{};:>,]/,
      closeOnPick: !0,
      closeOnUnfocus: !0,
      updateOnCursorActivity: !0,
      completeOnSingleClick: !0,
      container: null,
      customKeys: null,
      extraKeys: null,
      paddingForScrollbar: !0,
      moveOnOverlap: !0,
    };
    e.defineOption('hintOptions', null);
  }),
  (function (e) {
    'object' == typeof exports && 'object' == typeof module
      ? e(require('../../lib/codemirror'))
      : 'function' == typeof define && define.amd
      ? define(['../../lib/codemirror'], e)
      : e(CodeMirror);
  })(function (e) {
    'use strict';
    function t(e) {
      var t = e.search(o);
      return t == -1 ? 0 : t;
    }
    function n(e, t, n) {
      return (
        /\bstring\b/.test(e.getTokenTypeAt(l(t.line, 0))) &&
        !/^[\'\"\`]/.test(n)
      );
    }
    function r(e, t) {
      var n = e.getMode();
      return n.useInnerComments !== !1 && n.innerMode ? e.getModeAt(t) : n;
    }
    var i = {},
      o = /[^\s\u00a0]/,
      l = e.Pos,
      a = e.cmpPos;
    (e.commands.toggleComment = function (e) {
      e.toggleComment();
    }),
      e.defineExtension('toggleComment', function (e) {
        e || (e = i);
        for (
          var t = this,
            n = 1 / 0,
            r = this.listSelections(),
            o = null,
            a = r.length - 1;
          a >= 0;
          a--
        ) {
          var s = r[a].from(),
            c = r[a].to();
          s.line >= n ||
            (c.line >= n && (c = l(n, 0)),
            (n = s.line),
            null == o
              ? t.uncomment(s, c, e)
                ? (o = 'un')
                : (t.lineComment(s, c, e), (o = 'line'))
              : 'un' == o
              ? t.uncomment(s, c, e)
              : t.lineComment(s, c, e));
        }
      }),
      e.defineExtension('lineComment', function (e, a, s) {
        s || (s = i);
        var c = this,
          u = r(c, e),
          f = c.getLine(e.line);
        if (null != f && !n(c, e, f)) {
          var d = s.lineComment || u.lineComment;
          if (!d)
            return void (
              (s.blockCommentStart || u.blockCommentStart) &&
              ((s.fullLines = !0), c.blockComment(e, a, s))
            );
          var h = Math.min(
              0 != a.ch || a.line == e.line ? a.line + 1 : a.line,
              c.lastLine() + 1
            ),
            p = null == s.padding ? ' ' : s.padding,
            g = s.commentBlankLines || e.line == a.line;
          c.operation(function () {
            if (s.indent) {
              for (var n = null, r = e.line; r < h; ++r) {
                var i = c.getLine(r),
                  a = i.slice(0, t(i));
                (null == n || n.length > a.length) && (n = a);
              }
              for (var r = e.line; r < h; ++r) {
                var i = c.getLine(r),
                  u = n.length;
                (g || o.test(i)) &&
                  (i.slice(0, u) != n && (u = t(i)),
                  c.replaceRange(n + d + p, l(r, 0), l(r, u)));
              }
            } else for (var r = e.line; r < h; ++r) (g || o.test(c.getLine(r))) && c.replaceRange(d + p, l(r, 0));
          });
        }
      }),
      e.defineExtension('blockComment', function (e, t, n) {
        n || (n = i);
        var s = this,
          c = r(s, e),
          u = n.blockCommentStart || c.blockCommentStart,
          f = n.blockCommentEnd || c.blockCommentEnd;
        if (!u || !f)
          return void (
            (n.lineComment || c.lineComment) &&
            0 != n.fullLines &&
            s.lineComment(e, t, n)
          );
        if (!/\bcomment\b/.test(s.getTokenTypeAt(l(e.line, 0)))) {
          var d = Math.min(t.line, s.lastLine());
          d != e.line && 0 == t.ch && o.test(s.getLine(d)) && --d;
          var h = null == n.padding ? ' ' : n.padding;
          e.line > d ||
            s.operation(function () {
              if (0 != n.fullLines) {
                var r = o.test(s.getLine(d));
                s.replaceRange(h + f, l(d)),
                  s.replaceRange(u + h, l(e.line, 0));
                var i = n.blockCommentLead || c.blockCommentLead;
                if (null != i)
                  for (var p = e.line + 1; p <= d; ++p)
                    (p != d || r) && s.replaceRange(i + h, l(p, 0));
              } else {
                var g = 0 == a(s.getCursor('to'), t),
                  m = !s.somethingSelected();
                s.replaceRange(f, t),
                  g && s.setSelection(m ? t : s.getCursor('from'), t),
                  s.replaceRange(u, e);
              }
            });
        }
      }),
      e.defineExtension('uncomment', function (e, t, n) {
        n || (n = i);
        var a,
          s = this,
          c = r(s, e),
          u = Math.min(
            0 != t.ch || t.line == e.line ? t.line : t.line - 1,
            s.lastLine()
          ),
          f = Math.min(e.line, u),
          d = n.lineComment || c.lineComment,
          h = [],
          p = null == n.padding ? ' ' : n.padding;
        e: if (d) {
          for (var g = f; g <= u; ++g) {
            var m = s.getLine(g),
              v = m.indexOf(d);
            if (
              (v > -1 &&
                !/comment/.test(s.getTokenTypeAt(l(g, v + 1))) &&
                (v = -1),
              v == -1 && o.test(m))
            )
              break e;
            if (v > -1 && o.test(m.slice(0, v))) break e;
            h.push(m);
          }
          if (
            (s.operation(function () {
              for (var e = f; e <= u; ++e) {
                var t = h[e - f],
                  n = t.indexOf(d),
                  r = n + d.length;
                n < 0 ||
                  (t.slice(r, r + p.length) == p && (r += p.length),
                  (a = !0),
                  s.replaceRange('', l(e, n), l(e, r)));
              }
            }),
            a)
          )
            return !0;
        }
        var y = n.blockCommentStart || c.blockCommentStart,
          b = n.blockCommentEnd || c.blockCommentEnd;
        if (!y || !b) return !1;
        var x = n.blockCommentLead || c.blockCommentLead,
          w = s.getLine(f),
          C = w.indexOf(y);
        if (C == -1) return !1;
        var k = u == f ? w : s.getLine(u),
          S = k.indexOf(b, u == f ? C + y.length : 0),
          L = l(f, C + 1),
          T = l(u, S + 1);
        if (
          S == -1 ||
          !/comment/.test(s.getTokenTypeAt(L)) ||
          !/comment/.test(s.getTokenTypeAt(T)) ||
          s.getRange(L, T, '\n').indexOf(b) > -1
        )
          return !1;
        var M = w.lastIndexOf(y, e.ch),
          O = M == -1 ? -1 : w.slice(0, e.ch).indexOf(b, M + y.length);
        if (M != -1 && O != -1 && O + b.length != e.ch) return !1;
        O = k.indexOf(b, t.ch);
        var N = k.slice(t.ch).lastIndexOf(y, O - t.ch);
        return (
          (M = O == -1 || N == -1 ? -1 : t.ch + N),
          (O == -1 || M == -1 || M == t.ch) &&
            (s.operation(function () {
              s.replaceRange(
                '',
                l(u, S - (p && k.slice(S - p.length, S) == p ? p.length : 0)),
                l(u, S + b.length)
              );
              var e = C + y.length;
              if (
                (p && w.slice(e, e + p.length) == p && (e += p.length),
                s.replaceRange('', l(f, C), l(f, e)),
                x)
              )
                for (var t = f + 1; t <= u; ++t) {
                  var n = s.getLine(t),
                    r = n.indexOf(x);
                  if (r != -1 && !o.test(n.slice(0, r))) {
                    var i = r + x.length;
                    p && n.slice(i, i + p.length) == p && (i += p.length),
                      s.replaceRange('', l(t, r), l(t, i));
                  }
                }
            }),
            !0)
        );
      });
  });
